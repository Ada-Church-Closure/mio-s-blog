<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="light"
  data-auto-appearance="false"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>CS61A:Structure and Interpretation of Computer Programs &middot; Mio&#39;s Tea Time</title>
  <meta name="title" content="CS61A:Structure and Interpretation of Computer Programs &middot; Mio&#39;s Tea Time" />
  
  <meta name="description" content="Mio&#39;s Tea Time" />
  
  
  
  <link rel="canonical" href="http://localhost:1313/cs61/cs61astructure-and-interpretation-of-computer-programs/" />
  
  
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.1c9cd0d1ebaf117272b5c4f6bd49878475cb210d5e0da4f061632d779f5bb46851881c187e6e634dba5071c4e3d80e7d5cec1dd80443b2fa68acd358f9eda881.css"
    integrity="sha512-HJzQ0euvEXJytcT2vUmHhHXLIQ1eDaTwYWMtd59btGhRiBwYfm5jTbpQccTj2A59XOwd2ARDsvporNNY&#43;e2ogQ==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.65b5de43825ad54a420102c9ddccece1f1015665fe76e5b399ba259e1de29f6c83ac1b3cf77beed3d29e26604dfebf561a8e1db523cb6add0d6acccc9e8f1307.js"
    integrity="sha512-ZbXeQ4Ja1UpCAQLJ3czs4fEBVmX&#43;duWzmbolnh3in2yDrBs893vu09KeJmBN/r9WGo4dtSPLat0NaszMno8TBw==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S&#43;Yti0U7QtuZvQ=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  <meta name="google-site-verification" content="wgfczhyzH3lSC7Nvoty3A1-Ekb1NZsLDiZjGnjb-LbU" />
  
  
  
  
  
  
  <meta property="og:url" content="http://localhost:1313/cs61/cs61astructure-and-interpretation-of-computer-programs/">
  <meta property="og:site_name" content="Mio&#39;s Tea Time">
  <meta property="og:title" content="CS61A:Structure and Interpretation of Computer Programs">
  <meta property="og:description" content="CS61A：Structure and Interpretation of Computer Programs # ​	相当于简单学习一下py，再打一打编程的基础，因为课程lab的质量很高。">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="cs61">
    <meta property="article:published_time" content="2025-08-10T16:28:19+08:00">
    <meta property="article:modified_time" content="2025-08-10T16:28:19+08:00">
    <meta property="og:image" content="http://localhost:1313/cs61/cs61astructure-and-interpretation-of-computer-programs/featured.png">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/cs61/cs61astructure-and-interpretation-of-computer-programs/featured.png">
  <meta name="twitter:title" content="CS61A:Structure and Interpretation of Computer Programs">
  <meta name="twitter:description" content="CS61A：Structure and Interpretation of Computer Programs # ​	相当于简单学习一下py，再打一打编程的基础，因为课程lab的质量很高。">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Cs61s",
    "name": "CS61A:Structure and Interpretation of Computer Programs",
    "headline": "CS61A:Structure and Interpretation of Computer Programs",
    
    "abstract": "\u003ch1 class=\u0022relative group\u0022\u003eCS61A：Structure and Interpretation of Computer Programs \n    \u003cdiv id=\u0022cs61astructure-and-interpretation-of-computer-programs\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\u0022\u003e\n        \u003ca class=\u0022group-hover:text-primary-300 dark:group-hover:text-neutral-700\u0022\n            style=\u0022text-decoration-line: none !important;\u0022 href=\u0022#cs61astructure-and-interpretation-of-computer-programs\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e        \n    \n\u003c\/h1\u003e\n\u003cblockquote\u003e\n\u003cp\u003e​\t相当于简单学习一下py，再打一打编程的基础，因为课程lab的质量很高。\u003c\/p\u003e",
    "inLanguage": "en",
    "url" : "http:\/\/localhost:1313\/cs61\/cs61astructure-and-interpretation-of-computer-programs\/",
    "author" : {
      "@type": "Person",
      "name": "mio"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-08-10T16:28:19\u002b08:00",
    "datePublished": "2025-08-10T16:28:19\u002b08:00",
    
    "dateModified": "2025-08-10T16:28:19\u002b08:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "5039"
  }]
  </script>


  
  
  <meta name="author" content="mio" />
  
  
  
  <link href="https://nunotabashinobu066@gmail.com" rel="me" />
  
  
  <link href="https://space.bilibili.com/167160408" rel="me" />
  
  
  <link href="https://github.com/Ada-Church-Closure" rel="me" />
  
  
  <link href="https://www.google.com/" rel="me" />
  
  
  <link href="https://steamcommunity.com/id/331979248/" rel="me" />
  
  
  <link href="https://www.youtube.com/@NunotabaShinobu" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  
  



  
  
  <meta name="theme-color"/>
  
  
  
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script>

    const firebaseConfig = {
      apiKey: "AIzaSyCswaKAVVuCYg9UesFR0aQOkre1tVIv5co",
      authDomain: "AIzaSyCswaKAVVuCYg9UesFR0aQOkre1tVIv5co",
      projectId: "mio-s-app",
      storageBucket: "mio-s-app.firebasestorage.app",
      messagingSenderId: "491061548873",
      appId: "1:491061548873:web:9de625ab436bdfd1e3ec98",
      measurementId: "G-EH5EXVC7V4"
    };

    var app = firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    var auth = firebase.auth();

  </script>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3">
    
    
    
    <div>
        <a href="/" class="flex">
            <span class="sr-only">Mio&rsquo;s Tea Time</span>

            
            <img src="/img/logo.png" width="342" height="318"
                class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Mio&#39;s Tea Time" />
            

        </a>
    </div>
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Mio&rsquo;s Tea Time</a>
            

        </nav>
        <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">

            
            
             
  <div>
  <div class="cursor-pointer flex items-center nested-menu">
    
    <a  class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title="">
      Class
    </a>
    <span>
      

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


    </span>
  </div>
  <div class="absolute menuhide">
    <div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl">
      <div class="flex flex-col space-y-3">
        
        <a href="/notes/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            Lecture Notes
          </p>
        </a>
        
        <a href="/csapp/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="">
            CS:APP
          </p>
        </a>
        
        <a href="/cs61/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
          
          <p class="text-sm font-sm" title="Cs61s">
            CS61:Series
          </p>
        </a>
        
      </div>
    </div>
  </div>
</div>



            
            
  <a href="/tech/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Tech">
        Tech
    </p>
</a>



            
            
  <a href="/thinking/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Thinking">
        Thinking
    </p>
</a>



            
            
  <a href="/life/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="Life">
        Life
    </p>
</a>



            
            
  <a href="/author/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        Author
    </p>
</a>



            
            
  <a href="https://github.com/Ada-Church-Closure"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>



            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class=" flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 md:hidden">

        <label id="menu-button" class="block">
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li id="menu-close-button">
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                     
  <li class="mt-1">
    <a href="" class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Class
        </p>
        <span>
            

  <span class="relative block icon">
    <svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 20 20"
  fill="currentColor"
  aria-hidden="true"
>
  <path
    fill-rule="evenodd"
    d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
    clip-rule="evenodd"
  />
</svg>

  </span>


        </span>
    </a>
</li>

<li class="mt-1">
    <a href="/notes/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            Lecture Notes
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/csapp/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="">
            CS:APP
        </p>
    </a>
</li>

<li class="mt-1">
    <a href="/cs61/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-sm font-small" title="Cs61s">
            CS61:Series
        </p>
    </a>
</li>

<li class="mb-2"></li>




                    

                    
  <li class="mt-1">
    <a href="/tech/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Tech">
            Tech
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/thinking/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Thinking">
            Thinking
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/life/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="Life">
            Life
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="/author/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Author
        </p>
    </a>
</li>




                    

                    
  <li class="mt-1">
    <a href="https://github.com/Ada-Church-Closure"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>




                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>





  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  
        
            <div class="w-full h-36 md:h-56 lg:h-72 single_hero_basic nozoom" style="background-image:url(/cs61/cs61astructure-and-interpretation-of-computer-programs/featured_hu_c779ea691abcb892.png);"></div>
        
    
  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      CS61A:Structure and Interpretation of Computer Programs
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  





  



  



  



  



  







<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2025-08-10T16:28:19&#43;08:00">10 August 2025</time><span class="px-2 text-primary-500">&middot;</span><span>5039 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">24 mins</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="views_cs61/CS61A:Structure and Interpretation of Computer Programs/index.md" class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400" title="views">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
<path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
  
  
    
    
      
      
        
        
      
      
    
  
  <span id="likes_cs61/CS61A:Structure and Interpretation of Computer Programs/index.md"
    class="animate-pulse inline-block text-transparent max-h-3 rounded-full mt-[-2px] align-middle bg-neutral-300 dark:bg-neutral-400"
    title="likes">loading</span>
  <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

</span>
</span><span class="px-2 text-primary-500">&middot;</span><span>
    <button id="button_likes"
        class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400"
        onclick="process_article()">
        <span id="button_likes_heart" style="display:none" class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg>
  </span>

 </span>
        <span id="button_likes_emtpty_heart" class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path fill="currentColor" d="M244 84L255.1 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 0 232.4 0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84C243.1 84 244 84.01 244 84L244 84zM255.1 163.9L210.1 117.1C188.4 96.28 157.6 86.4 127.3 91.44C81.55 99.07 48 138.7 48 185.1V190.9C48 219.1 59.71 246.1 80.34 265.3L256 429.3L431.7 265.3C452.3 246.1 464 219.1 464 190.9V185.1C464 138.7 430.4 99.07 384.7 91.44C354.4 86.4 323.6 96.28 301.9 117.1L255.1 163.9z"/></svg>
  </span>

</span>
        <span id="button_likes_text">&nbsp;Like</span>
    </button>
</span>
  

  
  
</div>








    </div>

    
    
    
    
    

    

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10">

         <details open id="TOCView"
  class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#11第一章-函数构建抽象">1.1第一章 函数构建抽象</a>
      <ul>
        <li><a href="#111高阶函数">1.1.1高阶函数</a>
          <ul>
            <li><a href="#1111函数作为参数传递">1.1.1.1<strong>函数作为参数传递：</strong></a></li>
            <li><a href="#1112嵌套函数的定义">1.1.1.2<strong>嵌套函数的定义：</strong></a></li>
            <li><a href="#1113python-中词法作用域的两个关键优势">1.1.1.3<strong>Python 中词法作用域的两个关键优势：</strong></a></li>
            <li><a href="#1114把函数作为返回值">1.1.1.4<strong>把函数作为返回值</strong></a></li>
            <li><a href="#1115柯里化curring">1.1.1.5<strong>柯里化（Curring）</strong></a></li>
            <li><a href="#1116lambda表达式">1.1.1.6<strong>Lambda表达式</strong></a></li>
            <li><a href="#1117函数装饰器">1.1.1.7<strong>函数装饰器</strong></a></li>
            <li><a href="#1118递归函数">1.1.1.8递归函数</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#12第二章-数据构建抽象">1.2第二章 数据构建抽象</a>
      <ul>
        <li><a href="#121原始数据类型">1.2.1原始数据类型</a></li>
        <li><a href="#122数据抽象">1.2.2数据抽象</a></li>
        <li><a href="#123序列">1.2.3序列</a>
          <ul>
            <li><a href="#1231list-列表">1.2.3.1list 列表</a></li>
            <li><a href="#1232序列的处理">1.2.3.2序列的处理</a></li>
            <li><a href="#1233序列的抽象">1.2.3.3序列的抽象</a></li>
            <li><a href="#1234tree">1.2.3.4Tree</a></li>
            <li><a href="#1235linkedlist">1.2.3.5LinkedList</a></li>
          </ul>
        </li>
        <li><a href="#124可变数据">1.2.4可变数据</a>
          <ul>
            <li><a href="#1241字典dictionary">1.2.4.1字典（Dictionary）</a></li>
            <li><a href="#1242局部状态">1.2.4.2局部状态</a></li>
          </ul>
        </li>
        <li><a href="#125列表和字典实现">1.2.5列表和字典实现</a></li>
        <li><a href="#126约束传递-propagating-constraints">1.2.6约束传递 (Propagating Constraints)</a></li>
        <li><a href="#127面向对象编程-oop">1.2.7面向对象编程 OOP</a>
          <ul>
            <li><a href="#1271对象和类">1.2.7.1对象和类</a></li>
            <li><a href="#1272类的定义">1.2.7.2类的定义</a></li>
            <li><a href="#1273消息传递和点表达式">1.2.7.3消息传递和点表达式</a></li>
            <li><a href="#1274类属性">1.2.7.4类属性</a></li>
            <li><a href="#1275继承">1.2.7.5继承</a></li>
            <li><a href="#1276对象的作用">1.2.7.6对象的作用</a></li>
          </ul>
        </li>
        <li><a href="#128实现类和对象">1.2.8实现类和对象</a></li>
        <li><a href="#129对象抽象">1.2.9对象抽象</a>
          <ul>
            <li><a href="#1291字符串转换">1.2.9.1字符串转换</a></li>
            <li><a href="#1292专用方法">1.2.9.2专用方法</a></li>
            <li><a href="#1293多重表示">1.2.9.3多重表示</a></li>
            <li><a href="#1294泛型函数">1.2.9.4泛型函数</a></li>
          </ul>
        </li>
        <li><a href="#1210效率">1.2.10效率</a></li>
        <li><a href="#1211递归对象">1.2.11递归对象</a></li>
      </ul>
    </li>
    <li><a href="#13计算机程序的解释">1.3计算机程序的解释</a>
      <ul>
        <li><a href="#131引言">1.3.1引言</a></li>
        <li><a href="#132函数式编程">1.3.2函数式编程</a>
          <ul>
            <li><a href="#1321表达式">1.3.2.1表达式</a></li>
            <li><a href="#1322定义">1.3.2.2定义</a></li>
            <li><a href="#1323复合类型">1.3.2.3复合类型</a></li>
            <li><a href="#1324符号数据">1.3.2.4符号数据</a></li>
          </ul>
        </li>
        <li><a href="#133异常-exceptions">1.3.3异常 Exceptions</a></li>
        <li><a href="#134组合语言的解释器">1.3.4组合语言的解释器</a>
          <ul>
            <li><a href="#1341基于scheme语法的计算器">1.3.4.1基于Scheme语法的计算器</a></li>
            <li><a href="#1342表达式树">1.3.4.2表达式树</a></li>
            <li><a href="#1343解析表达式">1.3.4.3解析表达式</a></li>
            <li><a href="#1344计算器语言求值">1.3.4.4计算器语言求值</a></li>
          </ul>
        </li>
        <li><a href="#135抽象语言的解释器">1.3.5抽象语言的解释器</a>
          <ul>
            <li><a href="#1351结构">1.3.5.1结构</a></li>
            <li><a href="#1352环境env">1.3.5.2环境ENV</a></li>
            <li><a href="#1353数据即程序">1.3.5.3数据即程序</a></li>
            <li><a href="#schemelab简单记录">schemeLab简单记录</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#14数据处理">1.4数据处理</a>
      <ul>
        <li><a href="#141隐式序列">1.4.1隐式序列</a>
          <ul>
            <li><a href="#1411iterator">1.4.1.1iterator</a></li>
            <li><a href="#1412可迭代性">1.4.1.2可迭代性</a></li>
            <li><a href="#1413内置迭代器">1.4.1.3内置迭代器</a></li>
            <li><a href="#1414for语句">1.4.1.4For语句</a></li>
            <li><a href="#1415生成器和yield语句">1.4.1.5生成器和yield语句</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#11第一章-函数构建抽象">1.1第一章 函数构建抽象</a>
      <ul>
        <li><a href="#111高阶函数">1.1.1高阶函数</a>
          <ul>
            <li><a href="#1111函数作为参数传递">1.1.1.1<strong>函数作为参数传递：</strong></a></li>
            <li><a href="#1112嵌套函数的定义">1.1.1.2<strong>嵌套函数的定义：</strong></a></li>
            <li><a href="#1113python-中词法作用域的两个关键优势">1.1.1.3<strong>Python 中词法作用域的两个关键优势：</strong></a></li>
            <li><a href="#1114把函数作为返回值">1.1.1.4<strong>把函数作为返回值</strong></a></li>
            <li><a href="#1115柯里化curring">1.1.1.5<strong>柯里化（Curring）</strong></a></li>
            <li><a href="#1116lambda表达式">1.1.1.6<strong>Lambda表达式</strong></a></li>
            <li><a href="#1117函数装饰器">1.1.1.7<strong>函数装饰器</strong></a></li>
            <li><a href="#1118递归函数">1.1.1.8递归函数</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#12第二章-数据构建抽象">1.2第二章 数据构建抽象</a>
      <ul>
        <li><a href="#121原始数据类型">1.2.1原始数据类型</a></li>
        <li><a href="#122数据抽象">1.2.2数据抽象</a></li>
        <li><a href="#123序列">1.2.3序列</a>
          <ul>
            <li><a href="#1231list-列表">1.2.3.1list 列表</a></li>
            <li><a href="#1232序列的处理">1.2.3.2序列的处理</a></li>
            <li><a href="#1233序列的抽象">1.2.3.3序列的抽象</a></li>
            <li><a href="#1234tree">1.2.3.4Tree</a></li>
            <li><a href="#1235linkedlist">1.2.3.5LinkedList</a></li>
          </ul>
        </li>
        <li><a href="#124可变数据">1.2.4可变数据</a>
          <ul>
            <li><a href="#1241字典dictionary">1.2.4.1字典（Dictionary）</a></li>
            <li><a href="#1242局部状态">1.2.4.2局部状态</a></li>
          </ul>
        </li>
        <li><a href="#125列表和字典实现">1.2.5列表和字典实现</a></li>
        <li><a href="#126约束传递-propagating-constraints">1.2.6约束传递 (Propagating Constraints)</a></li>
        <li><a href="#127面向对象编程-oop">1.2.7面向对象编程 OOP</a>
          <ul>
            <li><a href="#1271对象和类">1.2.7.1对象和类</a></li>
            <li><a href="#1272类的定义">1.2.7.2类的定义</a></li>
            <li><a href="#1273消息传递和点表达式">1.2.7.3消息传递和点表达式</a></li>
            <li><a href="#1274类属性">1.2.7.4类属性</a></li>
            <li><a href="#1275继承">1.2.7.5继承</a></li>
            <li><a href="#1276对象的作用">1.2.7.6对象的作用</a></li>
          </ul>
        </li>
        <li><a href="#128实现类和对象">1.2.8实现类和对象</a></li>
        <li><a href="#129对象抽象">1.2.9对象抽象</a>
          <ul>
            <li><a href="#1291字符串转换">1.2.9.1字符串转换</a></li>
            <li><a href="#1292专用方法">1.2.9.2专用方法</a></li>
            <li><a href="#1293多重表示">1.2.9.3多重表示</a></li>
            <li><a href="#1294泛型函数">1.2.9.4泛型函数</a></li>
          </ul>
        </li>
        <li><a href="#1210效率">1.2.10效率</a></li>
        <li><a href="#1211递归对象">1.2.11递归对象</a></li>
      </ul>
    </li>
    <li><a href="#13计算机程序的解释">1.3计算机程序的解释</a>
      <ul>
        <li><a href="#131引言">1.3.1引言</a></li>
        <li><a href="#132函数式编程">1.3.2函数式编程</a>
          <ul>
            <li><a href="#1321表达式">1.3.2.1表达式</a></li>
            <li><a href="#1322定义">1.3.2.2定义</a></li>
            <li><a href="#1323复合类型">1.3.2.3复合类型</a></li>
            <li><a href="#1324符号数据">1.3.2.4符号数据</a></li>
          </ul>
        </li>
        <li><a href="#133异常-exceptions">1.3.3异常 Exceptions</a></li>
        <li><a href="#134组合语言的解释器">1.3.4组合语言的解释器</a>
          <ul>
            <li><a href="#1341基于scheme语法的计算器">1.3.4.1基于Scheme语法的计算器</a></li>
            <li><a href="#1342表达式树">1.3.4.2表达式树</a></li>
            <li><a href="#1343解析表达式">1.3.4.3解析表达式</a></li>
            <li><a href="#1344计算器语言求值">1.3.4.4计算器语言求值</a></li>
          </ul>
        </li>
        <li><a href="#135抽象语言的解释器">1.3.5抽象语言的解释器</a>
          <ul>
            <li><a href="#1351结构">1.3.5.1结构</a></li>
            <li><a href="#1352环境env">1.3.5.2环境ENV</a></li>
            <li><a href="#1353数据即程序">1.3.5.3数据即程序</a></li>
            <li><a href="#schemelab简单记录">schemeLab简单记录</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#14数据处理">1.4数据处理</a>
      <ul>
        <li><a href="#141隐式序列">1.4.1隐式序列</a>
          <ul>
            <li><a href="#1411iterator">1.4.1.1iterator</a></li>
            <li><a href="#1412可迭代性">1.4.1.2可迭代性</a></li>
            <li><a href="#1413内置迭代器">1.4.1.3内置迭代器</a></li>
            <li><a href="#1414for语句">1.4.1.4For语句</a></li>
            <li><a href="#1415生成器和yield语句">1.4.1.5生成器和yield语句</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</details>

<script>

  var margin = 200;
  var marginError = 50;

  (function () {
    var $window = $(window);
    var $toc = $('#TOCView');
    var tocHeight = $toc.height();

    function onResize() {
      var windowAndMarginHeight = $window.height() - margin;
      if(tocHeight >= windowAndMarginHeight) {
        $toc.css("overflow-y", "scroll")
        $toc.css("max-height", (windowAndMarginHeight + marginError) + "px")
      } else {
        $toc.css("overflow-y", "hidden")
        $toc.css("max-height", "9999999px")
      }
    }

    $window.on('resize', onResize);
    $(document).ready(onResize);
  })();



</script>
   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          

<h1 class="relative group">CS61A：Structure and Interpretation of Computer Programs 
    <div id="cs61astructure-and-interpretation-of-computer-programs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#cs61astructure-and-interpretation-of-computer-programs" aria-label="Anchor">#</a>
    </span>        
    
</h1>
<blockquote>
<p>​	相当于简单学习一下py，再打一打编程的基础，因为课程lab的质量很高。</p>
<p><strong>坚持下去，哪怕它没有学分。</strong></p>
<p>​	这也是计算机的一大圣经(计算机程序的构造和解释)了，但是我还没有好好理解过。</p>
<p>​	笔者做这个课程的时候已经是大二结束了，所以不会重复很多基础的东西，比较跳跃。</p>
<p>​	资源来自于中文课本：https://composingprograms.netlify.app/</p>
<p>​	会摘录其中我觉得对我有用的内容(未报备)。我认为有些部分翻译的很抽象.如果你英语还可以,可以对照着看.</p></blockquote>


<h2 class="relative group">1.1第一章 函数构建抽象 
    <div id="11%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%87%BD%E6%95%B0%E6%9E%84%E5%BB%BA%E6%8A%BD%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#11%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%87%BD%E6%95%B0%E6%9E%84%E5%BB%BA%E6%8A%BD%E8%B1%A1" aria-label="Anchor">#</a>
    </span>        
    
</h2>


<h3 class="relative group">1.1.1高阶函数 
    <div id="111%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#111%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0" aria-label="Anchor">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1.1.1.1<strong>函数作为参数传递：</strong> 
    <div id="1111%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1111%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"> <span class="c1"># 把函数作为参数传递</span>
</span></span><span class="line"><span class="cl"> <span class="k">def</span> <span class="nf">summation</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">term</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">     <span class="nb">sum</span> <span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">     <span class="k">while</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">         <span class="nb">sum</span> <span class="o">+=</span> <span class="n">term</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="nb">sum</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="k">def</span> <span class="nf">pi_term</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="mi">8</span> <span class="o">/</span> <span class="p">((</span><span class="mi">4</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="k">def</span> <span class="nf">pi_sum</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="n">summation</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">pi_term</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl"> <span class="n">res</span> <span class="o">=</span> <span class="n">pi_sum</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</span></span></code></pre></div>

<h4 class="relative group">1.1.1.2<strong>嵌套函数的定义：</strong> 
    <div id="1112%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1112%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>继承环境 帧链</p>
<p>​	<code>sqrt_update</code> 函数体中的返回表达式可以通过遵循这一帧链来解析 <code>a</code> 的值。查找名称会找到当前环境中绑定到该名称的第一个值。Python 首先在 <code>sqrt_update</code> 帧中进行检查 &ndash;&gt; 不存在 <code>a</code> ，然后又到 <code>sqrt_update</code> 的父帧 <code>f1</code> 中进行检查，发现 <code>a</code> 被绑定到了 256。</p>
<blockquote>
<p>环境的继承，在父帧中找。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"> <span class="mi">1</span> <span class="k">def</span> <span class="nf">average</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"> <span class="mi">2</span>       <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"> <span class="mi">3</span>   
</span></span><span class="line"><span class="cl"> <span class="mi">4</span>   <span class="k">def</span> <span class="nf">improve</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">close</span><span class="p">,</span> <span class="n">guess</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"> <span class="mi">5</span>       <span class="k">while</span> <span class="ow">not</span> <span class="n">close</span><span class="p">(</span><span class="n">guess</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"> <span class="mi">6</span>           <span class="n">guess</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">guess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="mi">7</span>       <span class="k">return</span> <span class="n">guess</span>
</span></span><span class="line"><span class="cl"> <span class="mi">8</span>   
</span></span><span class="line"><span class="cl"> <span class="mi">9</span>   <span class="k">def</span> <span class="nf">approx_eq</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"> <span class="mi">10</span>      <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tolerance</span>
</span></span><span class="line"><span class="cl"> <span class="mi">11</span>  
</span></span><span class="line"><span class="cl"> <span class="mi">12</span>  <span class="k">def</span> <span class="nf">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"> <span class="mi">13</span>      <span class="k">def</span> <span class="nf">sqrt_update</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"> <span class="mi">14</span>          <span class="k">return</span> <span class="n">average</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="o">/</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="mi">15</span>      <span class="k">def</span> <span class="nf">sqrt_close</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl"> <span class="mi">16</span>          <span class="k">return</span> <span class="n">approx_eq</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="mi">17</span>      <span class="k">return</span> <span class="n">improve</span><span class="p">(</span><span class="n">sqrt_update</span><span class="p">,</span> <span class="n">sqrt_close</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="mi">18</span>  
</span></span><span class="line"><span class="cl"> <span class="mi">19</span>  <span class="n">result</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span>
</span></span></code></pre></div>

<h4 class="relative group">1.1.1.3<strong>Python 中词法作用域的两个关键优势：</strong> 
    <div id="1113python-%E4%B8%AD%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%85%B3%E9%94%AE%E4%BC%98%E5%8A%BF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1113python-%E4%B8%AD%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%85%B3%E9%94%AE%E4%BC%98%E5%8A%BF" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<ul>
<li>局部函数的名称<strong>不会影响定义它的函数的外部名称</strong>，因为<strong>局部函数的名称将绑定在定义它的当前局部环境</strong>中，而<strong>不是全局环境</strong>中。</li>
<li><strong>局部函数可以访问外层函数的环境</strong>，这是因为<strong>局部函数的函数体的求值环境会继承定义它的求值环境</strong>。</li>
</ul>
<p>​	这里的 <code>sqrt_update</code> 函数自带了一些数据：<code>a</code> 在定义它的环境中引用的值，因为它以这种方式“封装”信息，所以<strong>局部定义的函数通常被称为闭包</strong>（closures）。</p>


<h4 class="relative group">1.1.1.4<strong>把函数作为返回值</strong> 
    <div id="1114%E6%8A%8A%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1114%E6%8A%8A%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">compose1</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">         <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">             <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">         <span class="k">return</span> <span class="n">h</span>
</span></span></code></pre></div>

<h4 class="relative group">1.1.1.5<strong>柯里化（Curring）</strong> 
    <div id="1115%E6%9F%AF%E9%87%8C%E5%8C%96curring" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1115%E6%9F%AF%E9%87%8C%E5%8C%96curring" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<blockquote>
<p>​	我认为这里的便捷性是，有一个函数有两个参数，你在调用的时候可以分两次调用分别传入两个参数。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">curried_pow</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">         <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">             <span class="k">return</span> <span class="nb">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="k">return</span> <span class="n">h</span>
</span></span><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="n">curried_pow</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="mi">8</span>
</span></span></code></pre></div><p>这个参数传递<strong>稍微有点抽象</strong>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">map_to_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">         <span class="k">while</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">             <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">start</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">             <span class="n">start</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="n">map_to_range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">curried_pow</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"> <span class="mi">4</span>
</span></span><span class="line"><span class="cl"> <span class="mi">8</span>
</span></span><span class="line"><span class="cl"> <span class="mi">16</span>
</span></span><span class="line"><span class="cl"> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"> <span class="mi">64</span>
</span></span><span class="line"><span class="cl"> <span class="mi">128</span>
</span></span><span class="line"><span class="cl"> <span class="mi">256</span>
</span></span><span class="line"><span class="cl"> <span class="mi">512</span>
</span></span></code></pre></div><p>curried_pow(2)本身就可以作为一个可以传入一个参数的函数。</p>
<p>更复杂：curring和uncurring</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">curry2</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">         <span class="s2">&#34;&#34;&#34;返回给定的双参数函数的柯里化版本&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">             <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                 <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">             <span class="k">return</span> <span class="n">h</span>
</span></span><span class="line"><span class="cl">         <span class="k">return</span> <span class="n">g</span>
</span></span><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">uncurry2</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">         <span class="s2">&#34;&#34;&#34;返回给定的柯里化函数的双参数版本&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">             <span class="k">return</span> <span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">)(</span><span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="k">return</span> <span class="n">f</span>
</span></span><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="n">pow_curried</span> <span class="o">=</span> <span class="n">curry2</span><span class="p">(</span><span class="nb">pow</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="n">pow_curried</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="n">map_to_range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">pow_curried</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"> <span class="mi">4</span>
</span></span><span class="line"><span class="cl"> <span class="mi">8</span>
</span></span><span class="line"><span class="cl"> <span class="mi">16</span>
</span></span><span class="line"><span class="cl"> <span class="mi">32</span>
</span></span><span class="line"><span class="cl"> <span class="mi">64</span>
</span></span><span class="line"><span class="cl"> <span class="mi">128</span>
</span></span><span class="line"><span class="cl"> <span class="mi">256</span>
</span></span><span class="line"><span class="cl"> <span class="mi">512</span>
</span></span></code></pre></div><p>​	<code>curry2</code> 函数接受一个<strong>双参数函数</strong> <code>f</code> 并返回一个单参数函数 <code>g</code>。当 <code>g</code> 应用于参数 <code>x</code> 时，它返回一个单参数函数 <code>h</code>。当 <code>h</code> 应用于参数 <code>y</code> 时，它调用 <code>f(x, y)</code>。因此，<code>curry2(f)(x)(y)</code> <strong>等价于</strong> <code>f(x, y)</code> 。<code>uncurry2</code> <strong>函数反转了柯里化变换</strong>，因此 <code>uncurry2(curry2(f))</code> 等价于 <code>f</code>。</p>


<h4 class="relative group">1.1.1.6<strong>Lambda表达式</strong> 
    <div id="1116lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1116lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>一个 <strong>lambda</strong> 表达式的计算结果是一个函数，它仅有一个<strong>返回表达式</strong>作为主体。不允许使用<strong>赋值和控制</strong>语句。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"> <span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">compose1</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">         <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</span></span></code></pre></div><p><strong>匿名函数</strong>：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">function</span> <span class="o">&lt;</span><span class="k">lambda</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0xf3f490</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">144</span>
</span></span></code></pre></div><p><strong>嵌套lambda</strong>，有点难以辨认：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">compose1</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</span></span></code></pre></div><p>这么理解：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">lambda</span>              <span class="n">x</span>         <span class="p">:</span>              <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;A function that    takes x   and returns    f(g(x))&#34;</span>
</span></span></code></pre></div>

<h4 class="relative group">1.1.1.7<strong>函数装饰器</strong> 
    <div id="1117%E5%87%BD%E6%95%B0%E8%A3%85%E9%A5%B0%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1117%E5%87%BD%E6%95%B0%E8%A3%85%E9%A5%B0%E5%99%A8" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">wrapped</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&gt; &#39;</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">wrapped</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nd">@trace</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">triple</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">triple</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">-&gt;</span>  <span class="o">&lt;</span><span class="n">function</span> <span class="n">triple</span> <span class="n">at</span> <span class="mh">0x102a39848</span><span class="o">&gt;</span> <span class="p">(</span> <span class="mi">12</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">36</span>
</span></span></code></pre></div><p>​	在这个例子中，定义了一个高阶函数 <code>trace</code>，它返回一个函数，该函数在调用其参数前先输出一个打印语句来显示该参数。<code>triple</code> 的 <code>def</code> 语句有一个注解（annotation） <code>@trace</code>，它会影响 <code>def</code> 执行的规则。和往常一样，函数 <code>triple</code> 被创建了。<strong>但是，名称 triple 不会绑定到这个函数上。相反，这个名称会被绑定到在新定义的 <code>triple</code> 函数调用 <code>trace</code> 后返回的函数值上</strong>。代码中，这个装饰器等价于：</p>
<blockquote>
<p>相当于函数是把自己作为参数，调用上面的函数来作为返回值的结果，有什么作用，还没理解？</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">triple</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">triple</span> <span class="o">=</span> <span class="n">trace</span><span class="p">(</span><span class="n">triple</span><span class="p">)</span>
</span></span></code></pre></div><p>​	装饰器符号 <code>@</code> 也可以后跟一个调用表达式。跟在 <code>@</code> 后面的表达式会先被解析（就像上面的 &rsquo;trace&rsquo; 名称一样），然后是 <code>def</code> 语句，最后将装饰器表达式的运算结果应用到新定义的函数上，并将其结果绑定到 <code>def</code> 语句中的名称上。</p>
<blockquote>
<p>Hog写完了，比较简单也比较有趣，整体就是关于函数的抽象这里的一些内容，如果没有理解可能会容易绕进去：2025.5.23 14:28.</p></blockquote>


<h4 class="relative group">1.1.1.8递归函数 
    <div id="1118%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1118%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>就是递归（？）,主要就是递归的思想，比较基础。</p>
<p>这里的hw03就是一些普通的递归函数。</p>


<h2 class="relative group">1.2第二章 数据构建抽象 
    <div id="12%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E6%95%B0%E6%8D%AE%E6%9E%84%E5%BB%BA%E6%8A%BD%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#12%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E6%95%B0%E6%8D%AE%E6%9E%84%E5%BB%BA%E6%8A%BD%E8%B1%A1" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<blockquote>
<p>有效使用内置数据类型和用户定义的数据类型是数据处理型应用（data processing applications）的基础。</p>
<p>面向对象，对象就是数据，抽象或者具体的。</p></blockquote>


<h3 class="relative group">1.2.1原始数据类型 
    <div id="121%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#121%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>三种</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="n">j</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">complex</span><span class="s1">&#39;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">int</span><span class="s1">&#39;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">float</span><span class="s1">&#39;&gt;</span>
</span></span></code></pre></div><blockquote>
<p>​	非数值类型（Non-numeric types）：值可以表示许多其他类型的数据，比如<strong>声音、图像、位置、网址、网络连接</strong>等等。它们<strong>中间的少数可以用原始数据类型</strong>表示，例如用于值 <code>True</code> 和 <code>False</code> 的 <code>bool</code> 类，其他大多数值的类型必须由程序员使用我们将在本章中学习到的组合和抽象方法来定义。</p></blockquote>


<h3 class="relative group">1.2.2数据抽象 
    <div id="122%E6%95%B0%E6%8D%AE%E6%8A%BD%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#122%E6%95%B0%E6%8D%AE%E6%8A%BD%E8%B1%A1" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>程序&mdash;》操作抽象数据  + 定义具体表示</p>
<p>list 列表</p>
<p><strong>抽象屏障</strong>：上层的抽象利用下层的抽象，不可以越级来调用。</p>
<blockquote>
<p>特定表示的函数越少，程序越好得以维护。</p></blockquote>


<h3 class="relative group">1.2.3序列 
    <div id="123%E5%BA%8F%E5%88%97" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#123%E5%BA%8F%E5%88%97" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<blockquote>
<p>​	序列（<strong>sequence</strong>）是一组<strong>有顺序的值的集合</strong>，是计算机科学中的一个强大且基本的抽象概念。序列<strong>并不是特定内置类型或抽象数据表示的实例</strong>，而是一个包含不同类型数据间共享行为的集合。也就是说，序列有很多种类，但它们都具有共同的行为。</p></blockquote>


<h4 class="relative group">1.2.3.1list 列表 
    <div id="1231list-%E5%88%97%E8%A1%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1231list-%E5%88%97%E8%A1%A8" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">digits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">digits</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">8</span>
</span></span></code></pre></div><p><strong>序列计算：</strong></p>
<blockquote>
<p>我觉得py比较奇妙的地方。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="n">digits</span> <span class="o">*</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</span></span></code></pre></div><p><strong>for循环的执行过程：</strong></p>
<p>一个 <code>for</code> 循环语句由如下格式的单个子句组成：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">for</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">suite</span><span class="o">&gt;</span>
</span></span></code></pre></div><p><code>for</code> 循环语句按以下过程执行：</p>
<ol>
<li>执行头部（header）中的 <code>&lt;expression&gt;</code>，它必须产生一个可迭代（iterable）的值（译者注：可迭代的详细概念可见 <em>4.2 隐式序列</em>）</li>
<li>对该可迭代值中的每个元素，按顺序：
<ol>
<li>将当前帧的 <code>&lt;name&gt;</code> 绑定到该元素值</li>
<li>执行 <code>&lt;suite&gt;</code></li>
</ol>
</li>
</ol>
<p><strong>序列解包</strong></p>
<p><strong>range (start, end(unincluded), step)</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
</span></span></code></pre></div><p>范围通常出现在 <code>for</code> 循环头部中的表达式，以指定 <code>&lt;suite&gt;</code> 应执行的次数。一个惯用的使用方式是：如果 <code>&lt;name&gt;</code> 没有在 <code>&lt;suite&gt;</code> 中被使用到，则用下划线字符 &ldquo;_&rdquo; 作为 <code>&lt;name&gt;</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Go Bears!&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">Go</span> <span class="n">Bears</span><span class="err">!</span>
</span></span><span class="line"><span class="cl"><span class="n">Go</span> <span class="n">Bears</span><span class="err">!</span>
</span></span><span class="line"><span class="cl"><span class="n">Go</span> <span class="n">Bears</span><span class="err">!</span>
</span></span></code></pre></div><p>对解释器而言，这个下划线只是环境中的另一个名称，但对程序员具有约定俗成的含义，表示该名称不会出现在任何未来的表达式中。</p>


<h4 class="relative group">1.2.3.2序列的处理 
    <div id="1232%E5%BA%8F%E5%88%97%E7%9A%84%E5%A4%84%E7%90%86" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1232%E5%BA%8F%E5%88%97%E7%9A%84%E5%A4%84%E7%90%86" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<blockquote>
<p>序列是复合数据的一种常见形式，常见到整个程序都可能围绕着这个单一的抽象来组织。</p>
<p>比如malloc函数在堆内存上的分配。</p></blockquote>
<p><strong>列表推导式（List Comprehensions）</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">odds</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">odds</span> <span class="k">if</span> <span class="mi">25</span> <span class="o">%</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</span></span></code></pre></div><p>一般推导的形式：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="p">[</span><span class="o">&lt;</span><span class="nb">map</span> <span class="n">expression</span><span class="o">&gt;</span> <span class="k">for</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">sequence</span> <span class="n">expression</span><span class="o">&gt;</span> <span class="k">if</span> <span class="o">&lt;</span><span class="nb">filter</span> <span class="n">expression</span><span class="o">&gt;</span><span class="p">]</span>
</span></span></code></pre></div>

<h4 class="relative group">1.2.3.3序列的抽象 
    <div id="1233%E5%BA%8F%E5%88%97%E7%9A%84%E6%8A%BD%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1233%E5%BA%8F%E5%88%97%E7%9A%84%E6%8A%BD%E8%B1%A1" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>成员资格：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">digits</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="mi">2</span> <span class="ow">in</span> <span class="n">digits</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="mi">1828</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">digits</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span></code></pre></div><p>slicing 切片：选取特定的范围，也可以选取step</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">digits</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">digits</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</span></span></code></pre></div><blockquote>
<p>这里看完可以先做lab03理解一下。</p>
<p>整个lab03是比较简单的，都是最简单的递归函数。</p></blockquote>


<h4 class="relative group">1.2.3.4Tree 
    <div id="1234tree" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1234tree" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<blockquote>
<p>​	使用列表包含其他列表，闭包（Closure Property）属性。</p>
<p>​	「数学中，若对某个集合的成员进行一种<strong>运算</strong>，生成的仍然是这个集合的成员，则该集合被称为<strong>在这个运算下闭合</strong>。」</p></blockquote>
<p>就是tree，没什么说的，这个很好理解。</p>
<p>遍历处理Tree上的所有数字，注意使用<code>isinstsnce</code>来判断是否是某个类型对应的实例。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">deep_map</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Replace all non-list elements x with f(x) in the nested list s.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; six = [1, 2, [3, [4], 5], 6]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; deep_map(lambda x: x * x, six)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; six
</span></span></span><span class="line"><span class="cl"><span class="s2">    [1, 4, [9, [16], 25], 36]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; # Check that you&#39;re not making new lists
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s = [3, [1, [4, [1]]]]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s1 = s[1]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s2 = s1[1]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s3 = s2[1]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; deep_map(lambda x: x + 1, s)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s
</span></span></span><span class="line"><span class="cl"><span class="s2">    [4, [2, [5, [2]]]]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s1 is s[1]
</span></span></span><span class="line"><span class="cl"><span class="s2">    True
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s2 is s1[1]
</span></span></span><span class="line"><span class="cl"><span class="s2">    True
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s3 is s2[1]
</span></span></span><span class="line"><span class="cl"><span class="s2">    True
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">s</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">deep_map</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span></span></code></pre></div><blockquote>
<p>这里要读一读官网的手册，要不然会看不懂在干什么。</p>
<p>比较像简单的leetcode问题。</p></blockquote>


<h4 class="relative group">1.2.3.5LinkedList 
    <div id="1235linkedlist" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1235linkedlist" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<blockquote>
<p>我们再次来理解一下什么是链表。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">four</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;empty&#39;</span><span class="p">]]]]</span>
</span></span></code></pre></div><p>我们把这样的一个嵌套的序列理解成一个链表。</p>
<p>其实和tree的构成是类似的。</p>
<p>那么这个链表的方法就应该这样定义：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">empty</span> <span class="o">=</span> <span class="s1">&#39;empty&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">is_link</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;判断 s 是否为链表&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">s</span> <span class="o">==</span> <span class="n">empty</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">is_link</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">link</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">rest</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;用 first 和 rest 构建一个链表&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">is_link</span><span class="p">(</span><span class="n">rest</span><span class="p">),</span> <span class="s2">&#34; rest 必须是一个链表&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">[</span><span class="n">first</span><span class="p">,</span> <span class="n">rest</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">first</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;返回链表 s 的第一个元素&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">is_link</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="s2">&#34; first 只能用于链表&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">s</span> <span class="o">!=</span> <span class="n">empty</span><span class="p">,</span> <span class="s2">&#34;空链表没有第一个元素&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">rest</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;返回 s 的剩余元素&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">is_link</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="s2">&#34; rest 只能用于链表&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">s</span> <span class="o">!=</span> <span class="n">empty</span><span class="p">,</span> <span class="s2">&#34;空链表没有剩余元素&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span></code></pre></div>

<h3 class="relative group">1.2.4可变数据 
    <div id="124%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#124%E5%8F%AF%E5%8F%98%E6%95%B0%E6%8D%AE" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>1.对象OOP的基本概念。</p>
<p>2.可变对象&mdash;》列表</p>
<p>比较典型的概念，检查是alias还是copy。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span> <span class="ow">is</span> <span class="n">nest</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span> <span class="ow">is</span> <span class="p">[</span><span class="s1">&#39;heart&#39;</span><span class="p">,</span> <span class="s1">&#39;diamond&#39;</span><span class="p">,</span> <span class="s1">&#39;spade&#39;</span><span class="p">,</span> <span class="s1">&#39;club&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">suits</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;heart&#39;</span><span class="p">,</span> <span class="s1">&#39;diamond&#39;</span><span class="p">,</span> <span class="s1">&#39;spade&#39;</span><span class="p">,</span> <span class="s1">&#39;club&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span></code></pre></div><p>tuple元组：</p>
<p><strong>不可变</strong>对象。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="s2">&#34;the&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s2">&#34;and&#34;</span><span class="p">,</span> <span class="s2">&#34;only&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;only&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">tuple</span><span class="s1">&#39;&gt;</span>
</span></span></code></pre></div><p>类似的语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">code</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;up&#34;</span><span class="p">,</span> <span class="s2">&#34;up&#34;</span><span class="p">,</span> <span class="s2">&#34;down&#34;</span><span class="p">,</span> <span class="s2">&#34;down&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&#34;left&#34;</span><span class="p">,</span> <span class="s2">&#34;right&#34;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">code</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;down&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">code</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&#34;down&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">code</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&#34;left&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span>
</span></span></code></pre></div><p>但是不能和list一样对于序列进行自由的操作。</p>


<h4 class="relative group">1.2.4.1字典（Dictionary） 
    <div id="1241%E5%AD%97%E5%85%B8dictionary" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1241%E5%AD%97%E5%85%B8dictionary" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>其实就是<strong>HashTable</strong>？</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;I&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;V&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">10</span>
</span></span></code></pre></div><p>字典本身是乱序的。</p>
<blockquote>
<p>​	Python 3.7 及以上版本的字典顺序会确保为插入顺序，此行为是自 3.6 版开始的 CPython 实现细节，字典会保留插入时的顺序，对键的更新也不会影响顺序，删除后再次添加的键将被插入到末尾</p></blockquote>
<p>字典类型也有一些限制：</p>
<ul>
<li>
<p>字典的 key <strong>不可以是可变数据，也不能包含可变数据</strong>。</p>
</li>
<li>
<p>一个 key 只能对应一个 value。</p>
<p>get方法：</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">numerals</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span>
</span></span></code></pre></div><p>推导式创建dic的语法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">25</span><span class="p">}</span>
</span></span></code></pre></div><blockquote>
<p>先来做lab04,我们再继续来研究理论内容。</p></blockquote>
<p>例子：嵌套构建一个dic。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">quotients</span><span class="p">,</span> <span class="n">divisors</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Return a dictonary in which each quotient q is a key for the list of
</span></span></span><span class="line"><span class="cl"><span class="s2">    divisors that it divides evenly.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; divide([3, 4, 5], [8, 9, 10, 11, 12])
</span></span></span><span class="line"><span class="cl"><span class="s2">    {3: [9, 12], 4: [8, 12], 5: [10]}
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; divide(range(1, 5), range(20, 25))
</span></span></span><span class="line"><span class="cl"><span class="s2">    {1: [20, 21, 22, 23, 24], 2: [20, 22, 24], 3: [21, 24], 4: [20, 24]}
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">divisors</span> <span class="k">if</span> <span class="n">y</span> <span class="o">%</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">quotients</span><span class="p">}</span>
</span></span></code></pre></div><p>下一个纯自己实现确实有点复杂。</p>
<blockquote>
<p>使用<strong>nonlocal</strong>引用闭包之外的变量。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">buy</span><span class="p">(</span><span class="n">fruits_to_buy</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">total_amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Print ways to buy some of each fruit so that the sum of prices is amount.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; prices = {&#39;oranges&#39;: 4, &#39;apples&#39;: 3, &#39;bananas&#39;: 2, &#39;kiwis&#39;: 9}
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; buy([&#39;apples&#39;, &#39;oranges&#39;, &#39;bananas&#39;], prices, 12)  # We can only buy apple, orange, and banana, but not kiwi
</span></span></span><span class="line"><span class="cl"><span class="s2">    [2 apples][1 orange][1 banana]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; buy([&#39;apples&#39;, &#39;oranges&#39;, &#39;bananas&#39;], prices, 16)
</span></span></span><span class="line"><span class="cl"><span class="s2">    [2 apples][1 orange][3 bananas]
</span></span></span><span class="line"><span class="cl"><span class="s2">    [2 apples][2 oranges][1 banana]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; buy([&#39;apples&#39;, &#39;kiwis&#39;], prices, 36)
</span></span></span><span class="line"><span class="cl"><span class="s2">    [3 apples][3 kiwis]
</span></span></span><span class="line"><span class="cl"><span class="s2">    [6 apples][2 kiwis]
</span></span></span><span class="line"><span class="cl"><span class="s2">    [9 apples][1 kiwi]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">ans_count</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">fruits</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">cart</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">nonlocal</span> <span class="n">ans_count</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">fruits</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">amount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">fruit</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">cart</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">                <span class="n">ans_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">ans_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">fruit</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">cart</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">s</span> <span class="o">=</span> <span class="n">fruit</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">s</span> <span class="o">=</span> <span class="n">fruit</span><span class="p">[:]</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;[&#34;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34; &#34;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="s2">&#34;]&#34;</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl">            <span class="k">return</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">fruit</span> <span class="o">=</span> <span class="n">fruits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">price</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">fruit</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">count</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">//</span> <span class="n">price</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">cart</span><span class="p">[</span><span class="n">fruit</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
</span></span><span class="line"><span class="cl">            <span class="n">add</span><span class="p">(</span><span class="n">fruits</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">amount</span> <span class="o">-</span> <span class="n">price</span> <span class="o">*</span> <span class="n">index</span><span class="p">,</span> <span class="n">cart</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">cart</span><span class="p">[</span><span class="n">fruit</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">cart</span> <span class="o">=</span> <span class="p">{</span><span class="n">fruit</span> <span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruits_to_buy</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">add</span><span class="p">(</span><span class="n">fruits_to_buy</span><span class="p">,</span> <span class="n">total_amount</span><span class="p">,</span> <span class="n">cart</span><span class="p">)</span>
</span></span></code></pre></div><p>相对来说比较简单，能理解字典的工作原理即可。</p>
<blockquote>
<p>接着来hw04，稍微有点难度，考察对于Tree的理解。</p></blockquote>
<p>一个交错洗牌的函数，<strong>zip</strong>就是把两个list对应位置的元素合成一个tuple元组。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">shuffle</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Return a shuffled list that interleaves the two halves of s.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; shuffle(range(6))
</span></span></span><span class="line"><span class="cl"><span class="s2">    [0, 3, 1, 4, 2, 5]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; letters = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; shuffle(letters)
</span></span></span><span class="line"><span class="cl"><span class="s2">    [&#39;a&#39;, &#39;e&#39;, &#39;b&#39;, &#39;f&#39;, &#39;c&#39;, &#39;g&#39;, &#39;d&#39;, &#39;h&#39;]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; shuffle(shuffle(letters))
</span></span></span><span class="line"><span class="cl"><span class="s2">    [&#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;g&#39;, &#39;b&#39;, &#39;d&#39;, &#39;f&#39;, &#39;h&#39;]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; letters  # Original list should not be modified
</span></span></span><span class="line"><span class="cl"><span class="s2">    [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;len(seq) must be even&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 交错洗牌</span>
</span></span><span class="line"><span class="cl">    <span class="n">mid</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">    <span class="n">list1</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="n">mid</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">list2</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">mid</span><span class="p">:]</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">num1</span><span class="p">,</span> <span class="n">num2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="n">list2</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="n">num1</span><span class="p">,</span> <span class="n">num2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">res</span>
</span></span></code></pre></div><blockquote>
<p>接下来我们会接触大量概念性的东西。</p></blockquote>


<h4 class="relative group">1.2.4.2局部状态 
    <div id="1242%E5%B1%80%E9%83%A8%E7%8A%B6%E6%80%81" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1242%E5%B1%80%E9%83%A8%E7%8A%B6%E6%80%81" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>​	列表和字典拥有局部状态（local state），即它们可以在程序执行过程中的某个时间点修改自身的值。状态（state）就意味着当前的值有可能发生变化。</p>
<p>​	函数也有状态，会改变状态的就不叫纯函数，很多coding中令人疑惑的错误就是没有理解函数状态的改变造成的，比如<strong>iterator</strong>迭代器。</p>
<blockquote>
<p>就是不要在迭代的过程中修改原来的序列。</p></blockquote>
<blockquote>
<p>注意这里的nonlocal,一旦是非局部的，我们不会把这个balance的值和局部帧绑定起来。</p>
<p>Python 中 <strong>nonlocal</strong> 声明的效果：当前执行帧之外的变量可以通过赋值语句更改。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">make_withdraw</span><span class="p">(</span><span class="n">balance</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;返回一个每次调用都会减少 balance 的 withdraw 函数&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">nonlocal</span> <span class="n">balance</span>                 <span class="c1"># 声明 balance 是非局部的</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="n">balance</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="s1">&#39;余额不足&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span>       <span class="c1"># 重新绑定</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">balance</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">withdraw</span>
</span></span></code></pre></div><p>​	通过引入非局部语句，我们为赋值语句创建了双重作用。他们可以更改局部绑定 (local bindings)，也可以更改非局部绑定  (nonlocal  bindings)。事实上，赋值语句已经有了很多作用：它们可以创建新的变量，也可以为现有变量重新赋值。赋值也可以改变列表和字典的内容。Python 中赋值语句的多种作用可能会使执行赋值语句时的效果变得不太明显。作为程序员，我们有责任清楚地记录代码，以便其他人可以理解赋值的效果。</p>
<blockquote>
<p>那么有的时候，赋值语句高不清楚会让人很迷惑。</p></blockquote>
<p>​	<strong>Python 特质 (Python Particulars)</strong>。这种非局部赋值模式是具有高阶函数和词法作用域的编程语言的普遍特征。大多数其他语言根本不需要非局部语句。相反，非局部赋值通常是赋值语句的默认行为。</p>
<p>​	<strong>Python</strong> 在变量名称查找方面也有一个不常见的限制：在一个函数体内，<strong>多次出现的同一个变量名必须处于同一个运行帧</strong>内。因此，<strong>Python</strong>  无法在非局部帧中查找某个变量名对应的值，然后在局部帧中为同样名称的变量赋值，因为同名变量会在同一函数的两个不同帧中被访问。此限制允许  Python 在执行函数体之前预先计算哪个帧包含哪个名称。当代码违反了这个限制时，程序会产生令人困惑的错误消息。</p>
<p>​	正确理解包含 <strong>nonlocal</strong> 声明的代码的关键是记住：只有函数调用才能引入新帧。赋值语句只能更改现有帧中的绑定关系。</p>
<p>​	<strong>相同与变化 (Sameness and change)</strong>。这些微妙之处的出现是因为，通过引入改变非局部环境的非纯函数，我们改变了表达式的性质。仅包含纯函数调用的表达式是引用透明 (referentially transparent) 的；即如果在函数中，用一个等于子表达式的值来替换子表达式，它的值不会改变。</p>
<p>​	重新绑定操作违反了引用透明的条件，因为它们不仅仅是返回一个值；他们还会在执行过程中改变运行环境。当我们引入任意的重新绑定时，我们遇到了一个棘手的认识论问题：两个值相同意味着什么。在我们的计算环境模型中，两个单独定义的函数是不同的，因为对一个函数的更改可能不会反映在另一个函数中。</p>
<blockquote>
<p>关于这样的操作，我们不能随便绑定和引入别名。</p></blockquote>


<h3 class="relative group">1.2.5列表和字典实现 
    <div id="125%E5%88%97%E8%A1%A8%E5%92%8C%E5%AD%97%E5%85%B8%E5%AE%9E%E7%8E%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#125%E5%88%97%E8%A1%A8%E5%92%8C%E5%AD%97%E5%85%B8%E5%AE%9E%E7%8E%B0" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<blockquote>
<p>状态就意味着对象的存在。</p>
<p>带状态的函数就是一个对象。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">mutable_link</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;返回一个可变链表的函数&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">contents</span> <span class="o">=</span> <span class="n">empty</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">nonlocal</span> <span class="n">contents</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">message</span> <span class="o">==</span> <span class="s1">&#39;len&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">len_link</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">message</span> <span class="o">==</span> <span class="s1">&#39;getitem&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">getitem_link</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">message</span> <span class="o">==</span> <span class="s1">&#39;push_first&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">contents</span> <span class="o">=</span> <span class="n">link</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">contents</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">message</span> <span class="o">==</span> <span class="s1">&#39;pop_first&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">f</span> <span class="o">=</span> <span class="n">first</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">contents</span> <span class="o">=</span> <span class="n">rest</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">f</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">message</span> <span class="o">==</span> <span class="s1">&#39;str&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">join_link</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="s2">&#34;, &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dispatch</span>
</span></span></code></pre></div><p>​	<strong>dispatch</strong> 函数是实现抽象数据消息传递接口的通用方法。为实现消息分发，到目前为止，我们使用条件语句将消息字符串与一组固定的已知消息进行比较。</p>
<blockquote>
<p>注意下面这样的实现方式，不用ifelse,直接把str和定义的函数名称绑定起来。</p>
<p>而是使用字典，这就是<strong>调度字典</strong>。&mdash;》避免使用了nonlocal定义。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">account</span><span class="p">(</span><span class="n">initial_balance</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">dispatch</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dispatch</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="n">dispatch</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s1">&#39;Insufficient funds&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">dispatch</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">dispatch</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">dispatch</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;deposit&#39;</span><span class="p">:</span>   <span class="n">deposit</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;withdraw&#39;</span><span class="p">:</span>  <span class="n">withdraw</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s1">&#39;balance&#39;</span><span class="p">:</span>   <span class="n">initial_balance</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">dispatch</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">account</span><span class="p">[</span><span class="s1">&#39;withdraw&#39;</span><span class="p">](</span><span class="n">amount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">account</span><span class="p">[</span><span class="s1">&#39;deposit&#39;</span><span class="p">](</span><span class="n">amount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">check_balance</span><span class="p">(</span><span class="n">account</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">account</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">a</span> <span class="o">=</span> <span class="n">account</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">deposit</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">withdraw</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">check_balance</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span></span></code></pre></div>

<h3 class="relative group">1.2.6约束传递 (Propagating Constraints) 
    <div id="126%E7%BA%A6%E6%9D%9F%E4%BC%A0%E9%80%92-propagating-constraints" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#126%E7%BA%A6%E6%9D%9F%E4%BC%A0%E9%80%92-propagating-constraints" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<blockquote>
<p>​	传统的计算机计算是单向的，但是如果要计算p * v = n * k * t这样的一个对象，我们要怎么处理。</p></blockquote>
<p>​	比较复杂，但是简单来说还是一种编程方式，一种参数网络，更改其中的参数会对于网络中的其余部分产生影响。</p>
<blockquote>
<p>我们来做lab05。</p></blockquote>
<p>关于对象的引用</p>
<p>is	是判断同一个对象。</p>
<p>==	判断内容是否相同。</p>
<p>理解这个过程中在干什么？</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span> <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">10</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</span></span></code></pre></div><p>​	然后是<code>iter()</code>函数，关于序列的迭代器的讨论。</p>
<p>​	这个lab要对于上面提到的概念非常熟悉。</p>
<blockquote>
<p>​	简单的示例代码，我把代码放在这里是为了当我看到的时候，知道该怎么使用和要注意些什么东西。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl">   <span class="n">grouped</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">key</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">grouped</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">grouped</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">grouped</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">grouped</span>
</span></span></code></pre></div><blockquote>
<p>利用强大的切片功能。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">partial_reverse</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Reverse part of a list in-place, starting with start up to the end of
</span></span></span><span class="line"><span class="cl"><span class="s2">    the list.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; a = [1, 2, 3, 4, 5, 6, 7]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; partial_reverse(a, 2)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; a
</span></span></span><span class="line"><span class="cl"><span class="s2">    [1, 2, 7, 6, 5, 4, 3]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; partial_reverse(a, 5)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; a
</span></span></span><span class="line"><span class="cl"><span class="s2">    [1, 2, 7, 6, 5, 3, 4]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">start</span><span class="p">:][::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></span></code></pre></div><blockquote>
<p>接下来做homework05的内容。</p>
<p>这里是使用关键字<strong>yield</strong>来生成数字：处理任务调度，复杂迭代，超大文件等等。</p>
<p>你可以直接理解成一个可以自定义行为的迭代器。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">hailstone</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Yields the elements of the hailstone sequence starting at n.
</span></span></span><span class="line"><span class="cl"><span class="s2">    At the end of the sequence, yield 1 infinitely.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; hail_gen = hailstone(10)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; [next(hail_gen) for _ in range(10)]
</span></span></span><span class="line"><span class="cl"><span class="s2">    [10, 5, 16, 8, 4, 2, 1, 1, 1, 1]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; next(hail_gen)
</span></span></span><span class="line"><span class="cl"><span class="s2">    1
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 返回一个长度为n的数组的迭代器,怎么做到一直返回1？</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 使用yield关键字进行生成：暂时返回，懒惰生成数据。</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="k">yield</span> <span class="n">n</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">n</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">      <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">      <span class="k">yield</span> <span class="mi">1</span>
</span></span></code></pre></div><blockquote>
<p>虽然是简单的爬楼梯问题，但是还是需要思考。</p>
<p>主要是要理解生成器迭代时候的行为。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">stair_ways</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Yield all the ways to climb a set of n stairs taking
</span></span></span><span class="line"><span class="cl"><span class="s2">    1 or 2 steps at a time.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; list(stair_ways(0))
</span></span></span><span class="line"><span class="cl"><span class="s2">    [[]]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; s_w = stair_ways(4)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; sorted([next(s_w) for _ in range(5)])
</span></span></span><span class="line"><span class="cl"><span class="s2">    [[1, 1, 1, 1], [1, 1, 2], [1, 2, 1], [2, 1, 1], [2, 2]]
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; list(s_w) # Ensure you&#39;re not yielding extra
</span></span></span><span class="line"><span class="cl"><span class="s2">    []
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 虽然是简单的问题，当涉及到生成器的时候，我们就从生成器的行为上来考虑</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">yield</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">way</span> <span class="ow">in</span> <span class="n">stair_ways</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">yield</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">way</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">way</span> <span class="ow">in</span> <span class="n">stair_ways</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">yield</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">way</span>
</span></span></code></pre></div>

<h3 class="relative group">1.2.7面向对象编程 OOP 
    <div id="127%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B-oop" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#127%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B-oop" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<blockquote>
<p>​	关于py的<strong>OOP</strong>部分，我一直关于这个不是很理解，在此之前我已经接触了Java和Cpp的OOP部分，我认为想要学明白OOP,一定要在工程实践中才能理解透彻。再多的理论都很难让人理解具体的用法和为什么要这样使用，<strong>设计模式</strong>这样的东西也是一样，总之我们来看一看。</p></blockquote>


<h4 class="relative group">1.2.7.1对象和类 
    <div id="1271%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1271%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%B1%BB" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>类是模板，对象是初始化的实例。</p>
<p>对象具有方法和属性。</p>


<h4 class="relative group">1.2.7.2类的定义 
    <div id="1272%E7%B1%BB%E7%9A%84%E5%AE%9A%E4%B9%89" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1272%E7%B1%BB%E7%9A%84%E5%AE%9A%E4%B9%89" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">class</span> <span class="err">&lt;</span><span class="nc">name</span><span class="o">&gt;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="o">&lt;</span><span class="n">suite</span><span class="o">&gt;</span>
</span></span></code></pre></div><blockquote>
<p>基本概念。</p></blockquote>
<p>构造函数：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Account</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_holder</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">holder</span> <span class="o">=</span> <span class="n">account_holder</span>
</span></span></code></pre></div><p>​	一般来说，我们使用参数名称 <code>self</code> 作为<strong>构造函数的第一个参数</strong>，它<strong>会自动绑定到正在实例化的对象</strong>。几乎所有的 Python 代码都遵守这个规定。这就类似于Java中的this，注意py中的语法。</p>
<blockquote>
<p>对象的独立性。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">a</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">b</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span></code></pre></div><p>我们怎么定义方法：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Account</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 构造函数</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_holder</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">holder</span> <span class="o">=</span> <span class="n">account_holder</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">+</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="s1">&#39;Insufficient funds&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span>
</span></span></code></pre></div><p>​	为了使用点表达式，我们的方法都要使用<strong>self首参</strong>：每个方法都包含着一个特殊的首参 <code>self</code> ，该参数绑定调用该方法的对象。例如，假设在特定的 <code>Account</code> 对象上调用 <code>deposit</code> 并传递单个参数：存入的金额。对象本身就被绑定到 <code>self</code> ，而传入的参数绑定到 <code>amount</code> 。所有调用的方法都可以通过 <code>self</code> 参数来访问对象，因此它们<strong>都可以访问和操作对象的状态</strong>。</p>


<h4 class="relative group">1.2.7.3消息传递和点表达式 
    <div id="1273%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E5%92%8C%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1273%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E5%92%8C%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>​	<strong>方法和函数</strong>：在对象上调用方法时，该对象将作为第一个参数隐式传递给该方法。也就是说，点左侧的 <code>&lt;expression&gt;</code> 值的对象将自动作为第一个参数传递给点表达式右侧命名的方法。因此，对象绑定到参数 <code>self</code>。</p>
<p>​	为了实现自动 <code>self</code> 绑定，Python 区分了我们从文本开头就一直在创建的函数和绑定方法，它们将函数和将调用该方法的对象耦合在一起。绑定方法值已与其第一个参数（调用它的实例）相关联，在调用该方法时将命名为 <code>self</code>。</p>
<p>​	作为一个类的属性，这是一个函数，但是作为一个实例的属性，这是一个方法（自动绑定的）。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">Account</span><span class="o">.</span><span class="n">deposit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">Function</span><span class="s1">&#39;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">spock_account</span><span class="o">.</span><span class="n">deposit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">method</span><span class="s1">&#39;&gt;</span>
</span></span></code></pre></div><p>​	这两个结果的区别仅在于第一个是参数为 <code>self</code> 和 <code>amount</code> 的标准双参数函数。第二种是单参数方法，调用方法时，名称 <code>self</code> 将自动绑定到名为 <code>spock_account</code> 的对象，而参数 <code>amount</code> 将绑定到传递给方法的参数。这两个值（无论是函数值还是绑定方法值）都与相同的 <code>deposit</code> 函数体相关联。</p>
<p>​	那么我们就可以这样使用方法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">Account</span><span class="o">.</span><span class="n">deposit</span><span class="p">(</span><span class="n">spock_account</span><span class="p">,</span> <span class="mi">1001</span><span class="p">)</span>    <span class="c1"># 函数 deposit 接受两个参数</span>
</span></span><span class="line"><span class="cl"><span class="mi">1011</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">spock_account</span><span class="o">.</span><span class="n">deposit</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>             <span class="c1"># 方法 deposit 接受一个参数</span>
</span></span><span class="line"><span class="cl"><span class="mi">2011</span>
</span></span></code></pre></div><blockquote>
<p>​	<strong>命名约定</strong>：类名通常使用 CapWords 约定（也称为 CamelCase，因为名称中间的大写字母看起来像驼峰）编写。方法名称遵循使用下划线分隔的小写单词命名函数的标准约定。</p>
<p>​	在某些情况下，有一些实例变量和方法与对象的维护和一致性相关，我们不希望对象的用户看到或使用。它们不是类定义的抽象的一部分，而是实现的一部分。Python 的约定规定，如果属性名称以下划线开头，则只能在类本身的方法中访问它，而不是用户访问。（这就是私有的方法）</p></blockquote>


<h4 class="relative group">1.2.7.4类属性 
    <div id="1274%E7%B1%BB%E5%B1%9E%E6%80%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1274%E7%B1%BB%E5%B1%9E%E6%80%A7" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>就是静态变量，可以认为是共有的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Account</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">interest</span> <span class="o">=</span> <span class="mf">0.02</span>            <span class="c1"># 类属性</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_holder</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">holder</span> <span class="o">=</span> <span class="n">account_holder</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 在这里定义更多的方法</span>
</span></span></code></pre></div><p>如果同名，我们优先考虑实例的属性，接着再考虑类属性：</p>
<ol>
<li>点表达式左侧的 <code>&lt;expression&gt;</code> ，生成点表达式的对象。</li>
<li><code>&lt;name&gt;</code> 与该对象的实例属性匹配；如果存在具有该名称的属性，则返回属性值。</li>
<li>如果实例属性中没有 <code>&lt;name&gt;</code> ，则在类中查找 <code>&lt;name&gt;</code>，生成类属性。</li>
<li>除非它是函数，否则返回属性值。如果是函数，则返回该名称绑定的方法。</li>
</ol>


<h4 class="relative group">1.2.7.5继承 
    <div id="1275%E7%BB%A7%E6%89%BF" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1275%E7%BB%A7%E6%89%BF" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>​	在面向对象编程范式中，我们经常会发现不同类型之间存在关联，尤其是在类的专业化程度上。即使两个类具有相似的属性，它们的特殊性也可能不同，为了实现逻辑上相同的类之间的差异性。</p>
<p>​	<code>CheckingAccount</code> 是 <code>Account</code> 的特化。在 OOP 术语中，通用帐户将用作 <code>CheckingAccount</code> 的基类，而 <code>CheckingAccount</code> 将用作 <code>Account</code> 的子类。术语基类（base class）也常叫父类（parent class）和超类（superclass），而子类（subclass）也叫孩子类（child class）。</p>
<p>我们怎么从基类做继承的操作：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Account</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;一个余额非零的账户。&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">interest</span> <span class="o">=</span> <span class="mf">0.02</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_holder</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">holder</span> <span class="o">=</span> <span class="n">account_holder</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;&#34;&#34;存入账户 amount，并返回变化后的余额&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">+</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;&#34;&#34;从账号中取出 amount，并返回变化后的余额&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="s1">&#39;Insufficient funds&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">-</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">CheckingAccount</span><span class="p">(</span><span class="n">Account</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;从账号取钱会扣出手续费的账号&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">withdraw_charge</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">interest</span> <span class="o">=</span> <span class="mf">0.01</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Account</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">withdraw_charge</span><span class="p">)</span>
</span></span></code></pre></div><p>对于基类的方法进行重写。</p>
<p>关于多重继承：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">SavingsAccount</span><span class="p">(</span><span class="n">Account</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">deposit_charge</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Account</span><span class="o">.</span><span class="n">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">deposit_charge</span><span class="p">)</span>
</span></span></code></pre></div><p>同时继承两个基类，当我们使用这个类的方法的时候，它自动就会使用两个基类中重写的方法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">AsSeenOnTVAccount</span><span class="p">(</span><span class="n">CheckingAccount</span><span class="p">,</span> <span class="n">SavingsAccount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">account_holder</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">holder</span> <span class="o">=</span> <span class="n">account_holder</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">1</span>           <span class="c1"># 赠送的 1 $!</span>
</span></span></code></pre></div><p>那么重名？有具体的方法解析的顺序。</p>


<h4 class="relative group">1.2.7.6对象的作用 
    <div id="1276%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%9C%E7%94%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1276%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%BD%9C%E7%94%A8" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<blockquote>
<p>​	多范式语言，如 <strong>Python</strong>，允许程序员将组织范式与适当的问题相匹配。学会识别何时引入新类，而不是新函数，以简化或模块化程序，是软件工程中一项重要的设计技能，值得认真关注。</p>
<p>​	接下来是lab06,关于OOP的基本概念。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Mint</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;A mint creates coins by stamping on years.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    The update method sets the mint&#39;s stamp to Mint.present_year.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; mint = Mint()
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; mint.year
</span></span></span><span class="line"><span class="cl"><span class="s2">    2024
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; dime = mint.create(Dime)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; dime.year
</span></span></span><span class="line"><span class="cl"><span class="s2">    2024
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; Mint.present_year = 2104  # Time passes
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; nickel = mint.create(Nickel)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; nickel.year     # The mint has not updated its stamp yet
</span></span></span><span class="line"><span class="cl"><span class="s2">    2024
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; nickel.worth()  # 5 cents + (80 - 50 years)
</span></span></span><span class="line"><span class="cl"><span class="s2">    35
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; mint.update()   # The mint&#39;s year is updated to 2104
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; Mint.present_year = 2179     # More time passes
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; mint.create(Dime).worth()    # 10 cents + (75 - 50 years)
</span></span></span><span class="line"><span class="cl"><span class="s2">    35
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; Mint().create(Dime).worth()  # A new mint has the current year
</span></span></span><span class="line"><span class="cl"><span class="s2">    10
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; dime.worth()     # 10 cents + (155 - 50 years)
</span></span></span><span class="line"><span class="cl"><span class="s2">    115
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; Dime.cents = 20  # Upgrade all dimes!
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; dime.worth()     # 20 cents + (155 - 50 years)
</span></span></span><span class="line"><span class="cl"><span class="s2">    125
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">present_year</span> <span class="o">=</span> <span class="mi">2024</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">coin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">year</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">Mint</span><span class="o">.</span><span class="n">present_year</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Coin</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">cents</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># will be provided by subclasses, but not by Coin itself</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">=</span> <span class="n">year</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">worth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">Mint</span><span class="o">.</span><span class="n">present_year</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="mi">50</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cents</span> <span class="o">+</span> <span class="n">Mint</span><span class="o">.</span><span class="n">present_year</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="mi">50</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cents</span>    
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Nickel</span><span class="p">(</span><span class="n">Coin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">cents</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Dime</span><span class="p">(</span><span class="n">Coin</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">cents</span> <span class="o">=</span> <span class="mi">10</span>
</span></span></code></pre></div><p>​	比较简单的关于继承的逻辑，只有几行代码，但是一定要搞清楚在干嘛。</p>
<blockquote>
<p>接下来我们做pro中的cats部分。</p>
<p>有点意思，测试打字速度并且有自动纠错的功能。</p>
<p>还要实现多个玩家的功能。</p></blockquote>
<pre tabindex="0"><code class="language-OK" data-lang="OK">Point breakdown
    Problem 1: 1.0/1
    Problem 2: 1.0/1
    Problem 3: 2.0/2
    Problem 4: 1.0/1
    Problem 5: 2.0/2
    Problem 6: 3.0/3
    Problem 7: 3.0/3
    Problem 8: 2.0/2
    Problem 9: 1.0/1
    Problem 10: 3.0/3

Score:
    Total: 19.0
</code></pre><blockquote>
<p>​	ok,那么也是拿下了，整体也不难，主要就是有一个编辑距离的问题和熟悉基本的语法。</p>
<p>不做附加问题了，主要就是装饰器，memo优化的内容，来不及了。</p>
<p>​	接下来我们先把第二章的内容看完。再去做作业之类的。</p></blockquote>


<h3 class="relative group">1.2.8实现类和对象 
    <div id="128%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#128%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>​	用字典可以实现,并且函数可以实现一切.</p>
<p>​	有点抽象,总之就是使用调度字段来实现功能.</p>


<h3 class="relative group">1.2.9对象抽象 
    <div id="129%E5%AF%B9%E8%B1%A1%E6%8A%BD%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#129%E5%AF%B9%E8%B1%A1%E6%8A%BD%E8%B1%A1" aria-label="Anchor">#</a>
    </span>        
    
</h3>


<h4 class="relative group">1.2.9.1字符串转换 
    <div id="1291%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1291%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>抽象数据描述&mdash;&gt;泛型函数</p>
<p>py对于一个原始值的字符串表示:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="mf">12e12</span>
</span></span><span class="line"><span class="cl"><span class="mf">12000000000000.0</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="mf">12e12</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="mf">12000000000000.0</span>
</span></span></code></pre></div><p>如果没有这个原始值,就是一个尖括号的字符串描述:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">min</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;&lt;built-in function min&gt;&#39;</span>
</span></span></code></pre></div><p>str构造器不相同的地方:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">tues</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">repr</span><span class="p">(</span><span class="n">tues</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;datetime.date(2011, 9, 12)&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">tues</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;2011-09-12&#39;</span>
</span></span></code></pre></div><p>​	定义 <code>repr</code> 函数带来了一个新的挑战：我们想要它正确地应用于所有的数据类型，即使是那些实现 <code>repr</code> 时还不存在的类型。我们希望它是一个<strong>通用的或者多态（polymorphic）的函数</strong>，可以被应用于数据的多种（多）不同形式（态）。</p>
<p>​	在这情况下，对象系统提供了一种优雅的解决方案：<code>repr</code> 函数总是在其参数值上调用一个名为 <code>__repr__</code> 的方法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">tues</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;datetime.date(2011, 9, 12)&#39;</span>
</span></span></code></pre></div><p>​	通过在用户定义类中实现这个相同的方法，我们可以将 <code>repr</code> 函数的适用范围扩展到将来我们创建的任何类。这个例子突出了点表达式的另一个优势，那就是它们提供了一种机制，可以把现有的函数的作用域扩展到新的对象类型。</p>


<h4 class="relative group">1.2.9.2专用方法 
    <div id="1292%E4%B8%93%E7%94%A8%E6%96%B9%E6%B3%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1292%E4%B8%93%E7%94%A8%E6%96%B9%E6%B3%95" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<blockquote>
<p>​	在 Python 中，某些特殊名称会在特殊情况下被 Python 解释器调用。例如，类的 <code>__init__</code> 方法会在对象被创建时自动调用。<code>__str__</code> 方法会在打印时自动调用，<code>__repr__</code> 方法会在交互式环境显示其值的时候自动调用。</p></blockquote>
<p>​	这就是&quot;专用&quot;.</p>
<p>​	一般任务一个对象是True,但是可以定义__bool__,当我们想按照自己的逻辑判断真假的时候,就会自动调用这个函数.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">Account</span><span class="o">.</span><span class="fm">__bool__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">!=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">bool</span><span class="p">(</span><span class="n">Account</span><span class="p">(</span><span class="s1">&#39;Jack&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">Account</span><span class="p">(</span><span class="s1">&#39;Jack&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Jack has nothing&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Jack</span> <span class="n">has</span> <span class="n">nothing</span>
</span></span></code></pre></div><p>比如len:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="s1">&#39;Go Bears!&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">9</span>
</span></span></code></pre></div><p>实际上是因为所有序列的内置类型都设置了__len__的方法:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;Go Bears!&#39;</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="mi">9</span>
</span></span></code></pre></div><p><code>__getitem__</code> 方法由元素选择操作符调用，但也可以直接调用它。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;Go Bears!&#39;</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;B&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;Go Bears!&#39;</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;B&#39;</span>
</span></span></code></pre></div><p>考虑这个高阶函数:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">make_adder</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">adder</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="n">k</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">adder</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">add_three</span> <span class="o">=</span> <span class="n">make_adder</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">add_three</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">7</span>
</span></span></code></pre></div><p>可以定义一个类,看起来就像是一个高阶函数,利用__call__方法:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Adder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+</span> <span class="n">k</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">add_three_obj</span> <span class="o">=</span> <span class="n">Adder</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>	<span class="c1"># 创建一个对象的时候会调用__call__方法</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">add_three_obj</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">7</span>
</span></span></code></pre></div><blockquote>
<p>​	算术运算。特定的方法也可以定义应用在用户定义的对象上的内置操作符的行为。为了提供这种通用性，Python 遵循特定的协议来应用每个操作符。例如，为了计算包含 <code>+</code> 操作符的表达式，Python 会检查操作符左右两侧的运算对象上是否有特定的方法。首先 Python 在左侧运算对象上检查其是否有 <code>__add__</code> 方法，然后在右侧运算对象上检查其是否有 <code>__radd__</code> 方法。如果找到了其中一个方法，就会将另一个运算对象的值作为它的参数来调用这个方法。</p></blockquote>


<h4 class="relative group">1.2.9.3多重表示 
    <div id="1293%E5%A4%9A%E9%87%8D%E8%A1%A8%E7%A4%BA" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1293%E5%A4%9A%E9%87%8D%E8%A1%A8%E7%A4%BA" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>​	对于一个相同的数据对象,在不同的场景下我们可能想使用不同的表示方法,比如复数.</p>
<blockquote>
<p>​	实现的逻辑是自顶向下的.</p></blockquote>
<p>比如实现复数系统,这是一个超类:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Number</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mul</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span></span></code></pre></div><p>这是复数,具体来实现add和mul的逻辑:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Complex</span><span class="p">(</span><span class="n">Number</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">ComplexRI</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imag</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">magnitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">magnitude</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">ComplexMA</span><span class="p">(</span><span class="n">magnitude</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">angle</span><span class="p">)</span>
</span></span></code></pre></div><p>这个实现假定存在两个表示复数的类，分别对应他们的两种自然表示形式。</p>
<ul>
<li><code>ComplexRI</code> 使用实部和虚部构建一个复数。</li>
<li><code>ComplexMA</code> 使用幅度和角度构建一个复数。</li>
</ul>
<p>​	我们怎么保证多重属性之间是共通的,比如实部和虚部发生变化的时候,对应的弧度和幅值也会发生相应的变化.</p>
<blockquote>
<p>​	Python 有一种简单的计算属性的特性，可以通过零参数函数实时的计算属性。<code>@property</code> 修饰符允许函数在没有调用表达式语法（表达式后跟随圆括号）的情况下被调用。<code>Complex</code> 类存储了 <code>real</code> 和 <code>imag</code> 属性并在需要时计算 <code>magnitude</code> 和 <code>angle</code> 属性。</p></blockquote>
<p>实际上这是一种计算出来的属性:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">atan2</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">ComplexRI</span><span class="p">(</span><span class="n">Complex</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">real</span> <span class="o">=</span> <span class="n">real</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">imag</span> <span class="o">=</span> <span class="n">imag</span>
</span></span><span class="line"><span class="cl">        <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">magnitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">real</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">imag</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="cl">        <span class="nd">@property</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">angle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">atan2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s1">&#39;ComplexRI(</span><span class="si">{0:g}</span><span class="s1">, </span><span class="si">{1:g}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
</span></span></code></pre></div><p>调用的时候:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">ri</span> <span class="o">=</span> <span class="n">ComplexRI</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">ri</span><span class="o">.</span><span class="n">real</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">ri</span><span class="o">.</span><span class="n">magnitude</span>
</span></span><span class="line"><span class="cl"><span class="mf">13.0</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">ri</span><span class="o">.</span><span class="n">real</span> <span class="o">=</span> <span class="mi">9</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">ri</span><span class="o">.</span><span class="n">real</span>
</span></span><span class="line"><span class="cl"><span class="mi">9</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">ri</span><span class="o">.</span><span class="n">magnitude</span>
</span></span><span class="line"><span class="cl"><span class="mf">15.0</span>
</span></span></code></pre></div><p>​	@property是用本身的属性在调用的时候可以进行零参数的实时计算,他并没有改变什么具有状态的值.</p>
<blockquote>
<p>​	实际上我认为这并没有达到我想象中的效果,因为<strong>本质上还是持有不同的类</strong>.</p></blockquote>
<blockquote>
<p>​	使用接口来编码多重表示具有十分吸引人的特点。<strong>每一种表示形式的类都可以被单独开发</strong>；它们只需要就它们共享的属性名称和和对于这些属性的行为条件达成一致。接口还具有可添加性。如果程序员想要添加一个复数的第三方表现形式到同一个程序中，他们只需要创建一个拥有相同属性名称的类即可。</p></blockquote>
<p>但是一定要约定相同的转换方式,但是如果有三个或者多个表示形式的时候,这样的表示方式还合适么?</p>


<h4 class="relative group">1.2.9.4泛型函数 
    <div id="1294%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1294%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>​	我们上面的Complex.add的方法就是一个泛型的函数,因为可以接受两个类类型的参数.</p>
<blockquote>
<p>​	使用接口和消息传递只是多种可以被用于实现泛型函数的方法中的一种。在本节我们将会考虑另外两个方法：<strong>类型派发和类型强制转换</strong>。</p></blockquote>
<p>比如我们加上一个Rational类来实现Number:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span> <span class="n">gcd</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Rational</span><span class="p">(</span><span class="n">Number</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numer</span><span class="p">,</span> <span class="n">denom</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">g</span> <span class="o">=</span> <span class="n">gcd</span><span class="p">(</span><span class="n">numer</span><span class="p">,</span> <span class="n">denom</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">numer</span> <span class="o">=</span> <span class="n">numer</span> <span class="o">//</span> <span class="n">g</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">denom</span> <span class="o">=</span> <span class="n">denom</span> <span class="o">//</span> <span class="n">g</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="s1">&#39;Rational(</span><span class="si">{0}</span><span class="s1">, </span><span class="si">{1}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">denom</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">nx</span><span class="p">,</span> <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">denom</span>
</span></span><span class="line"><span class="cl">            <span class="n">ny</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">numer</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">denom</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Rational</span><span class="p">(</span><span class="n">nx</span> <span class="o">*</span> <span class="n">dy</span> <span class="o">+</span> <span class="n">ny</span> <span class="o">*</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dx</span> <span class="o">*</span> <span class="n">dy</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">mul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">numer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numer</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">numer</span>
</span></span><span class="line"><span class="cl">            <span class="n">denom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">denom</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">denom</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">Rational</span><span class="p">(</span><span class="n">numer</span><span class="p">,</span> <span class="n">denom</span><span class="p">)</span>
</span></span></code></pre></div><p>这实现了分数的add和mul.</p>
<p>那么可以实现的是:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">Rational</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">Rational</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Rational</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">Rational</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="n">Rational</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Rational</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</span></span></code></pre></div><p>但是我们想让分数和复数进行加减,虽然数学上有定义,但是现在暂时还是不支持.</p>
<blockquote>
<p>​	<strong>类型派发</strong>。一种实现跨类型操作的方式是选择<strong>基于函数或方法的参数类型来选择相应的行为</strong>。类型派发的思想是写一个<strong>能够检查它所收到的参数的类型的函数</strong>，然后<strong>根据参数类型执行恰当的代码</strong>。</p></blockquote>
<p>根据不同类型采取不同的行为.</p>
<p>​	内置的函数 <code>isinstance</code> 接受一个对象或一个类。如果对象的类是所给的类或者继承自所给的类，它会返回一个真值。&mdash;&gt;判断是否是对象的一个实例.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">ComplexRI</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">ComplexRI</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Complex</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">ComplexMA</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kc">False</span>
</span></span></code></pre></div><p>用isinstance就能针对不同的类型采取不同的行为:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;Return whether c is a real number with no imaginary part.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">ComplexRI</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span> <span class="o">==</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">ComplexMA</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">angle</span> <span class="o">%</span> <span class="n">pi</span> <span class="o">==</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">is_real</span><span class="p">(</span><span class="n">ComplexRI</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">is_real</span><span class="p">(</span><span class="n">ComplexMA</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span></code></pre></div><p>我们还可以使用一种属性来确定是否相同:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;Return whether c is a real number with no imaginary part.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">ComplexRI</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span> <span class="o">==</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">ComplexMA</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">angle</span> <span class="o">%</span> <span class="n">pi</span> <span class="o">==</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">is_real</span><span class="p">(</span><span class="n">ComplexRI</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">is_real</span><span class="p">(</span><span class="n">ComplexMA</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="kc">True</span>
</span></span></code></pre></div><p>那就可以写这样一个函数:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">add_complex_and_rational</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ComplexRI</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">r</span><span class="o">.</span><span class="n">numer</span><span class="o">/</span><span class="n">r</span><span class="o">.</span><span class="n">denom</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
</span></span></code></pre></div><p>然后:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">mul_complex_and_rational</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">r_magnitude</span><span class="p">,</span> <span class="n">r_angle</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">numer</span><span class="o">/</span><span class="n">r</span><span class="o">.</span><span class="n">denom</span><span class="p">,</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">r_magnitude</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">r_magnitude</span><span class="p">,</span> <span class="n">r_angle</span> <span class="o">=</span> <span class="o">-</span><span class="n">r_magnitude</span><span class="p">,</span> <span class="n">pi</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ComplexMA</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">*</span> <span class="n">r_magnitude</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">angle</span> <span class="o">+</span> <span class="n">r_angle</span><span class="p">)</span>
</span></span></code></pre></div><p>add和mul基本定义,然后交换顺序:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">add_rational_and_complex</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">add_complex_and_rational</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">mul_rational_and_complex</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">mul_complex_and_rational</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
</span></span></code></pre></div><p>这样看起来是否很臃肿,接下来我们实现类型派发:(更改的是超类Number)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">Number</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_tag</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">type_tag</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_tag</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type_tag</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">adders</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cross_apply</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adders</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type_tag</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">type_tag</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mul</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_tag</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type_tag</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">multipliers</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cross_apply</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">multipliers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">def</span> <span class="nf">cross_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">cross_fns</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">cross_fn</span> <span class="o">=</span> <span class="n">cross_fns</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">type_tag</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">type_tag</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">cross_fn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">adders</span> <span class="o">=</span> <span class="p">{(</span><span class="s2">&#34;com&#34;</span><span class="p">,</span> <span class="s2">&#34;rat&#34;</span><span class="p">):</span> <span class="n">add_complex_and_rational</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="p">(</span><span class="s2">&#34;rat&#34;</span><span class="p">,</span> <span class="s2">&#34;com&#34;</span><span class="p">):</span> <span class="n">add_rational_and_complex</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">multipliers</span> <span class="o">=</span> <span class="p">{(</span><span class="s2">&#34;com&#34;</span><span class="p">,</span> <span class="s2">&#34;rat&#34;</span><span class="p">):</span> <span class="n">mul_complex_and_rational</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="p">(</span><span class="s2">&#34;rat&#34;</span><span class="p">,</span> <span class="s2">&#34;com&#34;</span><span class="p">):</span> <span class="n">mul_rational_and_complex</span><span class="p">}</span>
</span></span></code></pre></div><p>那么如果有新的子类,就可以在字典里面再加入一些值.</p>
<p>那么就可以实现功能:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">ComplexRI</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">Rational</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">ComplexRI</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">Rational</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">ComplexMA</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">ComplexMA</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">pi</span><span class="p">)</span>
</span></span></code></pre></div><p>那么强制类型转换其实也很简单了:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">rational_to_complex</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ComplexRI</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">numer</span><span class="o">/</span><span class="n">r</span><span class="o">.</span><span class="n">denom</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span></code></pre></div><p>在可以转换的情况下,可以直接返回一个实部是分数值,虚部是0的一个虚数.</p>
<blockquote>
<p>​	这一节比较长,但是不难理解.</p></blockquote>


<h3 class="relative group">1.2.10效率 
    <div id="1210%E6%95%88%E7%8E%87" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1210%E6%95%88%E7%8E%87" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>记忆化	时空复杂度的问题</p>


<h3 class="relative group">1.2.11递归对象 
    <div id="1211%E9%80%92%E5%BD%92%E5%AF%B9%E8%B1%A1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1211%E9%80%92%E5%BD%92%E5%AF%B9%E8%B1%A1" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>链表,树和集合</p>
<blockquote>
<p>​	后面两篇没咋看,直接做lab,先做ants(<a href="https://insideempire.github.io/CS61A-Website-Archive/proj/ants/index.html%29" target="_blank">https://insideempire.github.io/CS61A-Website-Archive/proj/ants/index.html)</a>.主要就是OOP的思想实现一个类似于植物大战僵尸的小游戏,感觉也比较有意思,我们来体验一下OOP.</p></blockquote>
<p>​	这个unlock部分就好像是在做什么任务型阅读一样.</p>
<p>​	游戏确实还是比较有意思的,基本就是读逻辑,然后去实现,比PVZ简单很多.</p>
<blockquote>
<p>​	要注意更改list的浅拷贝遍历的问题,以及不要打破抽象屏障才是规范的.</p>
<p>​	技巧就是在浅拷贝上面遍历,在原来要修改的地方进行修改.</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">reduce_health</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;Reduce health by AMOUNT, and remove the FireAnt from its place if it
</span></span></span><span class="line"><span class="cl"><span class="s2">        has no health remaining.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">        Make sure to reduce the health of each bee in the current place, and apply
</span></span></span><span class="line"><span class="cl"><span class="s2">        the additional damage if the fire ant dies.
</span></span></span><span class="line"><span class="cl"><span class="s2">        &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># BEGIN Problem 5</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;*** YOUR CODE HERE ***&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 尽力不打破抽象屏障</span>
</span></span><span class="line"><span class="cl">        <span class="n">damage_to_bees</span> <span class="o">=</span> <span class="n">amount</span>
</span></span><span class="line"><span class="cl">        <span class="n">bees_with_fire</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="o">.</span><span class="n">bees</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Ant</span><span class="o">.</span><span class="n">reduce_health</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">health</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">damage_to_bees</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">damage</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 使用浅拷贝,注意操作的对象还是一样的,两个数组之间的对象不是独立的,所以才叫&#34;浅&#34;拷贝</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">bee</span> <span class="ow">in</span> <span class="n">bees_with_fire</span><span class="p">[:]:</span>
</span></span><span class="line"><span class="cl">            <span class="n">Insect</span><span class="o">.</span><span class="n">reduce_health</span><span class="p">(</span><span class="n">bee</span><span class="p">,</span> <span class="n">damage_to_bees</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">bee</span><span class="o">.</span><span class="n">health</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">Insect</span><span class="o">.</span><span class="n">remove_from</span><span class="p">(</span><span class="n">bee</span><span class="p">,</span> <span class="n">bee</span><span class="o">.</span><span class="n">place</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># END Problem 5</span>
</span></span></code></pre></div><blockquote>
<p>​	注意我们在调用方法和参数的时候,self,以及类名对应.</p>
<p>​	比如在没有更改的情况下,self.damage的值和class持有的damage的值是相同的,但是一旦发生变化,那么就各自持有各自的值.</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="c1">#Problem 6</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">HungryAnt</span><span class="p">(</span><span class="n">Ant</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Hungry&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">implemented</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="n">damage</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="n">food_cost</span> <span class="o">=</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl">    <span class="n">chew_cooldown</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">health</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cooldown</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">health</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">cooldown</span> <span class="o">=</span> <span class="n">cooldown</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gamestate</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cooldown</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">unlucky_bee</span> <span class="o">=</span> <span class="n">random_bee</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">place</span><span class="o">.</span><span class="n">bees</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">unlucky_bee</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">Insect</span><span class="o">.</span><span class="n">reduce_health</span><span class="p">(</span><span class="n">unlucky_bee</span><span class="p">,</span> <span class="n">unlucky_bee</span><span class="o">.</span><span class="n">health</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">cooldown</span> <span class="o">=</span> <span class="n">HungryAnt</span><span class="o">.</span><span class="n">chew_cooldown</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">cooldown</span> <span class="o">-=</span> <span class="mi">1</span>
</span></span></code></pre></div><blockquote>
<p>​	OK,Ants结束,很好的体验了一下简单的OOP,附加就暂时不写了,时间比较紧张.</p></blockquote>
<p>之后做lab08,hw05已经做过了,我们就结束了第二章.</p>
<p>简单力扣水平吧.</p>


<h2 class="relative group">1.3计算机程序的解释 
    <div id="13%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%A7%A3%E9%87%8A" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#13%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%A7%A3%E9%87%8A" aria-label="Anchor">#</a>
    </span>        
    
</h2>


<h3 class="relative group">1.3.1引言 
    <div id="131%E5%BC%95%E8%A8%80" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#131%E5%BC%95%E8%A8%80" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>解释器	设计语言而不是仅仅是使用者,这是程序员的视角</p>
<blockquote>
<p>用py写一个解释Scheme语言的解释器.</p></blockquote>
<p>​	我们研究怎样设计一个解释器,核心是两个互递归函数,第一个求解环境中的表达式,第二个把函数应用于参数</p>
<p>Lab10:</p>
<p>REPL&mdash;读取,求值,打印循环</p>
<p>1.读取:</p>
<p>词法分析:把输入的字符串分解为token</p>
<p>语法分析:把这些token组织成数据结构,用来处理&mdash;pair</p>
<p>2.求值:</p>
<p>eval:评估表达式,当是调用函数的时候,用apply获取结果.</p>
<p>apply:评估之后的运算符用于参数,还会调用eval.</p>
<p>这是类似于那种前缀表达式之类的计算</p>
<blockquote>
<p>​	这相当于是一个小的预习.整体的感觉就像下面一样,eval进行语法分析,并且调用具体的计算,apply根据不同的operand确定不同的计算方法,其中的部分还是会使用调用eval.</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">calc_eval</span><span class="p">(</span><span class="n">exp</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 这是进行语法分析</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="n">Pair</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">operator</span> <span class="o">=</span>  <span class="n">exp</span><span class="o">.</span><span class="n">first</span><span class="c1"># UPDATE THIS FOR Q2, e.g (+ 1 2), + is the operator</span>
</span></span><span class="line"><span class="cl">        <span class="n">operands</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">rest</span> <span class="c1"># UPDATE THIS FOR Q2, e.g (+ 1 2), 1 and 2 are operands</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;and&#39;</span><span class="p">:</span> <span class="c1"># and expressions</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">eval_and</span><span class="p">(</span><span class="n">operands</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s1">&#39;define&#39;</span><span class="p">:</span> <span class="c1"># define expressions</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">eval_define</span><span class="p">(</span><span class="n">operands</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span> <span class="c1"># Call expressions</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">calc_apply</span><span class="p">(</span><span class="n">calc_eval</span><span class="p">(</span><span class="n">operator</span><span class="p">),</span> <span class="n">operands</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">calc_eval</span><span class="p">))</span> <span class="c1"># UPDATE THIS FOR Q2, what is type(operator)?</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">exp</span> <span class="ow">in</span> <span class="n">OPERATORS</span><span class="p">:</span>   <span class="c1"># Looking up procedures</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">OPERATORS</span><span class="p">[</span><span class="n">exp</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exp</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>   <span class="c1"># Numbers and booleans</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">exp</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 用bindings实现变量的定义的问题</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">exp</span> <span class="ow">in</span> <span class="n">bindings</span><span class="p">:</span> <span class="c1"># CHANGE THIS CONDITION FOR Q4 where are variables stored?</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">bindings</span><span class="p">[</span><span class="n">exp</span><span class="p">]</span> <span class="c1"># UPDATE THIS FOR Q4, how do you access a variable?</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">calc_apply</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">op</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">floor_div</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 实现除法的逻辑,apply把&#39;//&#39;绑定到我们的这个方法上面去</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 类似与链表,用循环处理</span>
</span></span><span class="line"><span class="cl">    <span class="n">curr</span> <span class="o">=</span> <span class="n">args</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="n">first</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">curr</span><span class="o">.</span><span class="n">rest</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">//=</span> <span class="n">curr</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">first</span>
</span></span><span class="line"><span class="cl">        <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="n">rest</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">res</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">scheme_t</span> <span class="o">=</span> <span class="kc">True</span>   <span class="c1"># Scheme&#39;s #t</span>
</span></span><span class="line"><span class="cl"><span class="n">scheme_f</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Scheme&#39;s #f</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">eval_and</span><span class="p">(</span><span class="n">expressions</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 实现一个and表达式,注意所有表达式为True,返回最后一个表达式的值</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">expressions</span> <span class="ow">is</span> <span class="n">nil</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">scheme_t</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">curr</span> <span class="o">=</span> <span class="n">expressions</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">curr</span><span class="o">.</span><span class="n">rest</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">nil</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">value</span> <span class="o">=</span> <span class="n">calc_eval</span><span class="p">(</span><span class="n">curr</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="n">scheme_f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">scheme_f</span>
</span></span><span class="line"><span class="cl">        <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="n">rest</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 理解pair是怎么工作的</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">calc_eval</span><span class="p">(</span><span class="n">curr</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="n">bindings</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">eval_define</span><span class="p">(</span><span class="n">expressions</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 直接进行符号绑定,要先进行求值的操作</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 注意要绑定的是一个值表达式,所以是exp.rest.first!!!</span>
</span></span><span class="line"><span class="cl">    <span class="n">variable</span> <span class="o">=</span> <span class="n">expressions</span><span class="o">.</span><span class="n">first</span>
</span></span><span class="line"><span class="cl">    <span class="n">value_exp</span> <span class="o">=</span> <span class="n">expressions</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">first</span>
</span></span><span class="line"><span class="cl">    <span class="n">value</span> <span class="o">=</span> <span class="n">calc_eval</span><span class="p">(</span><span class="n">value_exp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">bindings</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">variable</span>
</span></span></code></pre></div>

<h3 class="relative group">1.3.2函数式编程 
    <div id="132%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#132%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>​	Scheme 是 <a href="http://en.wikipedia.org/wiki/Lisp_%28programming_language%29" target="_blank">Lisp</a> 的一个变种，而 Lisp 是继 <a href="http://en.wikipedia.org/wiki/Fortran" target="_blank">Fortran</a> 之后仍然广受欢迎的第二古老的编程语言。Lisp 程序员社区几十年来持续蓬勃发展，<a href="http://en.wikipedia.org/wiki/Clojure" target="_blank">Clojure</a> 等 Lisp 的新方言拥有现代编程语言中增长最快的开发人员社区。如果你想亲手试试本文中的例子，可以下载一个 <a href="http://inst.eecs.berkeley.edu/~scheme/" target="_blank">Scheme 的解释器</a> 来操作。</p>


<h4 class="relative group">1.3.2.1表达式 
    <div id="1321%E8%A1%A8%E8%BE%BE%E5%BC%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1321%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>前缀表达式:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="mi">3</span> <span class="mi">5</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="mi">10</span> <span class="mi">6</span><span class="p">))</span>
</span></span></code></pre></div><p>可以写在多行上面:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="mi">3</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">* </span><span class="mi">2</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">         <span class="p">(</span><span class="nb">+ </span><span class="mi">3</span> <span class="mi">5</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nb">- </span><span class="mi">10</span> <span class="mi">7</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="mi">6</span><span class="p">))</span>
</span></span></code></pre></div><p>if表达式:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">if </span><span class="nv">&lt;predicate&gt;</span> <span class="nv">&lt;consequent&gt;</span> <span class="nv">&lt;alternative&gt;</span><span class="p">)</span>
</span></span></code></pre></div><p>比较方法:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="p">(</span><span class="o">&gt;=</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></div><ul>
<li><code>(and &lt;e1&gt; ... &lt;en&gt;)</code> 解释器会从左到右依次检查 <code>&lt;e&gt;</code> 表达式。一旦有一个 <code>&lt;e&gt;</code> 的结果是假，整个 <code>and</code> 表达式就直接返回假，并且剩下的 <code>&lt;e&gt;</code> 表达式不再检查。只有当所有 <code>&lt;e&gt;</code> 都是真时，<code>and</code> 表达式的返回值才是最后一个表达式的结果。</li>
<li><code>(or &lt;e1&gt; ... &lt;en&gt;)</code> 解释器会从左到右依次检查 <code>&lt;e&gt;</code> 表达式。一旦有一个 <code>&lt;e&gt;</code> 的结果是真，<code>or</code> 表达式就直接返回那个真值，并且剩下的 <code>&lt;e&gt;</code> 表达式不再检查。只有当所有 <code>&lt;e&gt;</code> 都是假时，<code>or</code> 表达式才返回假。</li>
<li><code>(not &lt;e&gt;)</code> 当 <code>&lt;e&gt;</code> 表达式的结果是假时，<code>not</code> 表达式就返回真，否则返回假。</li>
</ul>


<h4 class="relative group">1.3.2.2定义 
    <div id="1322%E5%AE%9A%E4%B9%89" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1322%E5%AE%9A%E4%B9%89" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>define可以定义一个新的变量.</p>
<p>类似于:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">&lt;name&gt;</span> <span class="nv">&lt;formal</span> <span class="nv">parameters&gt;</span><span class="p">)</span> <span class="nv">&lt;body&gt;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">square</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">square</span> <span class="mi">21</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">square</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">2</span> <span class="mi">5</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">square</span> <span class="p">(</span><span class="nf">square</span> <span class="mi">3</span><span class="p">))</span>
</span></span></code></pre></div><p>嵌套定义 递归 局部定义:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">sqrt</span> <span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">good</span><span class="o">-</span><span class="n">enough</span><span class="err">?</span> <span class="n">guess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="o">&lt;</span> <span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="o">-</span> <span class="p">(</span><span class="n">square</span> <span class="n">guess</span><span class="p">)</span> <span class="n">x</span><span class="p">))</span> <span class="mf">0.001</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="n">average</span> <span class="n">guess</span> <span class="p">(</span><span class="o">/</span> <span class="n">x</span> <span class="n">guess</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="n">define</span> <span class="p">(</span><span class="n">sqrt</span><span class="o">-</span><span class="nb">iter</span> <span class="n">guess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">good</span><span class="o">-</span><span class="n">enough</span><span class="err">?</span> <span class="n">guess</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">guess</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="n">sqrt</span><span class="o">-</span><span class="nb">iter</span> <span class="p">(</span><span class="n">improve</span> <span class="n">guess</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="n">sqrt</span><span class="o">-</span><span class="nb">iter</span> <span class="mf">1.0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="n">sqrt</span> <span class="mi">9</span><span class="p">)</span>
</span></span></code></pre></div><p>创建lambda表达式:(只是不用设置函数名)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">x</span> <span class="nv">y</span> <span class="p">(</span><span class="nf">square</span> <span class="nv">z</span><span class="p">)))</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
</span></span></code></pre></div>

<h4 class="relative group">1.3.2.3复合类型 
    <div id="1323%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1323%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>pair内置数据结构.</p>
<p>你可以这样访问,注意表示的方式.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="nv">x</span> <span class="p">(</span><span class="nb">cons </span><span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="nv">x</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">1</span> <span class="o">.</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">car </span><span class="nv">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">cdr </span><span class="nv">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span>
</span></span></code></pre></div>

<h4 class="relative group">1.3.2.4符号数据 
    <div id="1324%E7%AC%A6%E5%8F%B7%E6%95%B0%E6%8D%AE" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1324%E7%AC%A6%E5%8F%B7%E6%95%B0%E6%8D%AE" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>引用符号a b而不是他们的值,怎么上符号.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="k">define </span><span class="nv">a</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span>
</span></span><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="k">define </span><span class="nv">b</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span>
</span></span><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="nb">list </span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="nb">list </span><span class="ss">&#39;a</span> <span class="nv">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">a</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="nb">list </span><span class="ss">&#39;a</span> <span class="ss">&#39;b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">a</span> <span class="nv">b</span><span class="p">)</span>
</span></span></code></pre></div><p>任何不被求值的表达式都是引用.</p>


<h3 class="relative group">1.3.3异常 Exceptions 
    <div id="133%E5%BC%82%E5%B8%B8-exceptions" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#133%E5%BC%82%E5%B8%B8-exceptions" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>异常是一个对象实例,继承自某个BaseException类,常见用法就是构造实例然后抛出.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39; An error occurred&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">	<span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="ne">Exception</span><span class="p">:</span> <span class="n">an</span> <span class="n">error</span> <span class="n">occurred</span>
</span></span></code></pre></div><p>&ldquo;<stdin>&ldquo;表示这个异常是在交互会话中触发的,而并非来自于某个文件.</p>
<p>handling exceptions:</p>
<p>用try来处理:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="o">&lt;</span><span class="k">try</span> <span class="n">suite</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">except</span> <span class="o">&lt;</span><span class="n">exception</span> <span class="n">class</span><span class="o">&gt;</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="o">&lt;</span><span class="k">except</span> <span class="n">suite</span><span class="o">&gt;</span>
</span></span></code></pre></div><p>​	在执行 try 语句时，<code>&lt;try suite&gt;</code> 总是立即执行。只有在执行 <code>&lt;try suite&gt;</code> 过程中发生异常时，except 子句的内容才会执行。每个 except 子句指定了要处理的特定异常类。例如，如果 <code>&lt;exception class&gt;</code> 是 <code>AssertionError</code>，那么在执行 <code>&lt;try suite&gt;</code> 过程中引发的任何继承自 <code>AssertionError</code> 类的实例都将由随后的 <code>&lt;except suite&gt;</code> 处理。在 <code>&lt;except suite&gt;</code> 内部，标识符 <code>&lt;name&gt;</code> 绑定到被引发的异常对象，但此绑定不会在 <code>&lt;except suite&gt;</code> 之外存在。</p>
<p>比如:当出现某种异常的时候,我们会有对应的处理方法.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">		<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;handling a&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">		<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">handling</span> <span class="n">a</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">ZeroDivisionError</span><span class="s1">&#39;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
</span></span><span class="line"><span class="cl"><span class="mi">0</span>
</span></span></code></pre></div><p>异常对象.</p>
<p>自定义继承于Exception即可,可以具有属性.</p>
<blockquote>
<p>​	简单来讲,异常处理使得程序更有健壮性.</p></blockquote>


<h3 class="relative group">1.3.4组合语言的解释器 
    <div id="134%E7%BB%84%E5%90%88%E8%AF%AD%E8%A8%80%E7%9A%84%E8%A7%A3%E9%87%8A%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#134%E7%BB%84%E5%90%88%E8%AF%AD%E8%A8%80%E7%9A%84%E8%A7%A3%E9%87%8A%E5%99%A8" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>解释器就是一种函数.</p>


<h4 class="relative group">1.3.4.1基于Scheme语法的计算器 
    <div id="1341%E5%9F%BA%E4%BA%8Escheme%E8%AF%AD%E6%B3%95%E7%9A%84%E8%AE%A1%E7%AE%97%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1341%E5%9F%BA%E4%BA%8Escheme%E8%AF%AD%E6%B3%95%E7%9A%84%E8%AE%A1%E7%AE%97%E5%99%A8" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>基本运算:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="nf">*</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="nb">* </span><span class="mi">1</span> <span class="mi">1</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">1</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">80</span>
</span></span></code></pre></div><p>​	减法（）具有两种行为。只传入一个参数时，它会对该值取相反数。传入至少两个参数时，它会用第一个参数减去之后的所有参数。除法（）也有类似的两种行为：计算单个参数的倒数，或用第一个参数除以之后的所有参数.</p>
<p>先对于子表达式求值,再得到最后的结果:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="nv">scm&gt;</span> <span class="p">(</span><span class="nb">- </span><span class="mi">100</span> <span class="p">(</span><span class="nb">* </span><span class="mi">7</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">8</span> <span class="p">(</span><span class="nb">/ </span><span class="mi">-12</span> <span class="mi">-3</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl"><span class="mf">16.0</span>
</span></span></code></pre></div>

<h4 class="relative group">1.3.4.2表达式树 
    <div id="1342%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A0%91" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1342%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A0%91" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>​	Scheme对,列表一定是嵌套对.</p>
<p>​	实现的时候,所有的计算器语言表达式都是py的Pair列表,我们读入嵌套的列表并且转换为pair实例的表达式树.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="n">Pair</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">Pair</span><span class="p">(</span><span class="n">Pair</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">Pair</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">Pair</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">nil</span><span class="p">))),</span> <span class="n">Pair</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">nil</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="o">+</span> <span class="p">(</span><span class="o">*</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">second</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="o">*</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span><span class="o">.</span><span class="n">second</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">second</span><span class="o">.</span><span class="n">first</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span></code></pre></div>

<h4 class="relative group">1.3.4.3解析表达式 
    <div id="1343%E8%A7%A3%E6%9E%90%E8%A1%A8%E8%BE%BE%E5%BC%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1343%E8%A7%A3%E6%9E%90%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>原始文本&mdash;&gt;表达式树 的过程.</p>
<p>解析器:</p>
<p>1.词法分析器 lexical analyzer</p>
<p>​	输入字符串&mdash;&gt;划分成token</p>
<p>2.语法分析器 syntactic analyzer</p>
<p>​	根据生成的token生成表达式树 token序列会被语法分析器消耗</p>


<h5 class="relative group">1.3.4.3.1词法分析 
    <div id="13431%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#13431%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90" aria-label="Anchor">#</a>
    </span>        
    
</h5>
<p>tokenizer</p>
<p>对于格式良好的表达式进行分词的操作:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">tokenize_line</span><span class="p">(</span><span class="s1">&#39;(+ 1 (* 2.3 45))&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">]</span>
</span></span></code></pre></div><p>可以单独作用于每一行</p>


<h5 class="relative group">1.3.4.3.2语法分析 
    <div id="13432%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#13432%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90" aria-label="Anchor">#</a>
    </span>        
    
</h5>
<p>树递归.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="nv">&gt;&gt;&gt;</span> <span class="nv">lines</span> <span class="nv">=</span> <span class="p">[</span><span class="o">&#39;</span><span class="p">(</span><span class="nv">+</span> <span class="mi">1</span><span class="ss">&#39;,</span> <span class="o">&#39;</span>   <span class="p">(</span><span class="nb">* </span><span class="mf">2.3</span> <span class="mi">45</span><span class="p">))</span><span class="o">&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">&gt;&gt;&gt;</span> <span class="nv">expression</span> <span class="nv">=</span> <span class="nv">scheme_read</span><span class="p">(</span><span class="nf">Buffer</span><span class="p">(</span><span class="nf">tokenize_lines</span><span class="p">(</span><span class="nf">lines</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="nv">&gt;&gt;&gt;</span> <span class="nv">expression</span>
</span></span><span class="line"><span class="cl"><span class="nv">Pair</span><span class="p">(</span><span class="ss">&#39;+&#39;,</span> <span class="nv">Pair</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span> <span class="nv">Pair</span><span class="p">(</span><span class="nf">Pair</span><span class="p">(</span><span class="ss">&#39;*&#39;,</span> <span class="nv">Pair</span><span class="p">(</span><span class="mf">2.3</span><span class="o">,</span> <span class="nv">Pair</span><span class="p">(</span><span class="mi">45</span><span class="o">,</span> <span class="nv">nil</span><span class="p">)))</span><span class="o">,</span> <span class="nv">nil</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="nv">&gt;&gt;&gt;</span> <span class="nv">print</span><span class="p">(</span><span class="nf">expression</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="p">(</span><span class="nb">* </span><span class="mf">2.3</span> <span class="mi">45</span><span class="p">))</span>
</span></span></code></pre></div><p>​	信息丰富的语法错误的反馈,可以极大地提高解释器的可用性(也就是异常)。由此引发的 <code>SyntaxError</code> 异常包含对所遇问题的描述。</p>
<blockquote>
<p>​	总之就是读取token,然后生成Pair.</p></blockquote>


<h4 class="relative group">1.3.4.4计算器语言求值 
    <div id="1344%E8%AE%A1%E7%AE%97%E5%99%A8%E8%AF%AD%E8%A8%80%E6%B1%82%E5%80%BC" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1344%E8%AE%A1%E7%AE%97%E5%99%A8%E8%AF%AD%E8%A8%80%E6%B1%82%E5%80%BC" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>求值器,表达式作为一个参数并且返回一个值.</p>


<h3 class="relative group">1.3.5抽象语言的解释器 
    <div id="135%E6%8A%BD%E8%B1%A1%E8%AF%AD%E8%A8%80%E7%9A%84%E8%A7%A3%E9%87%8A%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#135%E6%8A%BD%E8%B1%A1%E8%AF%AD%E8%A8%80%E7%9A%84%E8%A7%A3%E9%87%8A%E5%99%A8" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<blockquote>
<p>​	我们的大部分lab都将在这一章结束.</p>
<p>​	HW 07、HW 08、HW 09、Lab 10&amp;Lab11、Scheme、Scheme Challenge、Scheme Contest.</p>
<p>​	加油!</p></blockquote>
<p>怎么定义新的运算符以及为我们的值进行命名.</p>


<h4 class="relative group">1.3.5.1结构 
    <div id="1351%E7%BB%93%E6%9E%84" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1351%E7%BB%93%E6%9E%84" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>1.正确解析点列表和引号</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">read_line</span><span class="p">(</span><span class="s2">&#34;(car &#39;(1 . 2))&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Pair</span><span class="p">(</span><span class="s1">&#39;car&#39;</span><span class="p">,</span> <span class="n">Pair</span><span class="p">(</span><span class="n">Pair</span><span class="p">(</span><span class="s1">&#39;quote&#39;</span><span class="p">,</span> <span class="n">Pair</span><span class="p">(</span><span class="n">Pair</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">nil</span><span class="p">)),</span> <span class="n">nil</span><span class="p">))</span>
</span></span></code></pre></div><p>2.求值&mdash;一种简化的形式</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">scheme_eval</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;Evaluate Scheme expression expr in environment env.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">scheme_symbolp</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">env</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">scheme_atomp</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">expr</span>
</span></span><span class="line"><span class="cl">        <span class="n">first</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">second</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&#34;lambda&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">do_lambda_form</span><span class="p">(</span><span class="n">rest</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">first</span> <span class="o">==</span> <span class="s2">&#34;define&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">do_define_form</span><span class="p">(</span><span class="n">rest</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">procedure</span> <span class="o">=</span> <span class="n">scheme_eval</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">args</span> <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">operand</span><span class="p">:</span> <span class="n">scheme_eval</span><span class="p">(</span><span class="n">operand</span><span class="p">,</span> <span class="n">env</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">scheme_apply</span><span class="p">(</span><span class="n">procedure</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
</span></span></code></pre></div><p>基本流程还是lab10中我们写过的.</p>


<h4 class="relative group">1.3.5.2环境ENV 
    <div id="1352%E7%8E%AF%E5%A2%83env" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1352%E7%8E%AF%E5%A2%83env" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>​	类似于py,现在我们已经描述了 Scheme 解释器的结构，接下来我们来实现构成环境的 <code>Frame</code> 类。每个 <code>Frame</code> 实例代表一个环境，在这个环境中，符号与值绑定。一个帧有一个保存绑定（<code>bindings</code>）的字典，以及一个父（<code>parent</code>）帧。对于全局帧而言，父帧为 <code>None</code>。这就是环境的实现方法.</p>
<p>​	绑定不能直接访问，而是通过两种 <code>Frame</code> 方法：<code>lookup</code> 和 <code>define</code>。第一个方法实现了第一章中描述的计算环境模型的查找流程。符号与当前帧的绑定相匹配。如果找到它，则返回它绑定到的值。如果没有找到，则继续在父帧中查找。另一方面，<code>define</code> 方法用来将符号绑定到当前帧中的值。</p>
<p>lookup逐渐向上进行查找,define用来和frame进行绑定.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">factorial</span> <span class="nv">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">n</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">* </span><span class="nv">n</span> <span class="p">(</span><span class="nf">factorial</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)))))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="nf">factorial</span> <span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">120</span>
</span></span></code></pre></div><p>do_define_form来进行求值的操作.</p>
<p>来分析上面的两个输入.</p>
<p>第一个输入表达式是一个 <code>define</code> 形式，将由 Python 函数 <code>do_define_form</code> 求值。定义一个函数有如下步骤：</p>
<ol>
<li>检查表达式的格式，确保它是一个格式良好的 Scheme 列表，在关键字 <code>define</code> 后面至少有两个元素。</li>
<li>分析第一个元素（这里是一个 <code>Pair</code>），找出函数名称 <code>factorial</code> 和形式参数表 <code>(n)</code>。</li>
<li>使用提供的形式参数、函数主体和父环境创建 <code>LambdaProcedure</code>。</li>
<li>在当前环境的第一帧中，将 <code>factorial</code> 符号与此函数绑定。在示例中，环境只包括全局帧。</li>
</ol>
<p>第二个输入是调用表达式。传递给 <code>scheme_apply</code> 的 <code>procedure</code> 是刚刚创建并绑定到符号 <code>factorial</code> 的 <code>LambdaProcedure</code>。传入的 <code>args</code> 是一个单元素 Scheme 列表 <code>(5)</code>。为了应用该函数，我们将创建一个新帧来扩展全局帧（<code>factorial</code> 函数的父环境）。在这帧中，符号 <code>n</code> 被绑定为数值 5。然后，我们将在该环境中对 <code>factorial</code> 函数主体进行求值，并返回其值。</p>
<blockquote>
<p>​	这里有点复杂,还是具体做的时候再看.</p></blockquote>


<h4 class="relative group">1.3.5.3数据即程序 
    <div id="1353%E6%95%B0%E6%8D%AE%E5%8D%B3%E7%A8%8B%E5%BA%8F" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1353%E6%95%B0%E6%8D%AE%E5%8D%B3%E7%A8%8B%E5%BA%8F" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>程序是对于抽象机器的描述.</p>
<p>用户的程序就是解释器的数据.</p>
<p>在执行过程中对于构建的表达式进行求值.</p>


<h4 class="relative group">schemeLab简单记录 
    <div id="schemelab%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#schemelab%E7%AE%80%E5%8D%95%E8%AE%B0%E5%BD%95" aria-label="Anchor">#</a>
    </span>        
    
</h4>


<h5 class="relative group">熟悉scheme 
    <div id="%E7%86%9F%E6%82%89scheme" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E7%86%9F%E6%82%89scheme" aria-label="Anchor">#</a>
    </span>        
    
</h5>
<blockquote>
<p>​	逆天超级小括号语言.</p></blockquote>
<p>scheme其实是一种诞生于这门课程的著名的教学语言.</p>
<p>会写简单的scheme代码,主要是理解前缀表达式.</p>
<p>比如实现幂函数:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">pow</span> <span class="nv">base</span> <span class="nv">exp</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="k">or </span><span class="p">(</span><span class="nb">= </span><span class="nv">base</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">= </span><span class="nv">exp</span> <span class="mi">0</span><span class="p">))</span> 
</span></span><span class="line"><span class="cl">    <span class="mi">1</span>
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="nb">* </span><span class="nv">base</span> <span class="p">(</span><span class="nf">pow</span> <span class="nv">base</span> <span class="p">(</span><span class="nb">- </span><span class="nv">exp</span> <span class="mi">1</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>let语句进行局部变量的绑定:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">repeatedly-cube</span> <span class="nv">n</span> <span class="nv">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">zero? </span><span class="nv">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">x</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">y</span> <span class="p">(</span><span class="nb">* </span><span class="nv">x</span> <span class="nv">x</span> <span class="nv">x</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nf">repeatedly-cube</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">y</span><span class="p">))))</span>
</span></span></code></pre></div><p><strong>car</strong>:获取list的第一个元素.</p>
<p><strong>cdr</strong>:获取list中除第一个元素的剩余部分.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nb">cadr </span><span class="nv">s</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nb">caddr </span><span class="nv">s</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cdr </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>那么这样的简单实现就是返回list中的第几个元素.</p>
<p>怎么使用条件?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">ascending?</span> <span class="nv">s</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="k">or </span><span class="p">(</span><span class="nb">null? </span><span class="nv">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">null? </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="k">and </span><span class="p">(</span><span class="nb">&lt;= </span><span class="p">(</span><span class="nb">car </span><span class="nv">s</span><span class="p">)</span> <span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">)))</span> <span class="p">(</span><span class="nf">ascending?</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>返回满足条件的list中的元素,list的本质还是pair对:</p>
<p>cond就是类似于switch语句,最后的else就是default.</p>
<p>cons就是给定两个参数,构造一个pair的数据对象.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">my-filter</span> <span class="nv">pred</span> <span class="nv">s</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">null? </span><span class="nv">s</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">            <span class="p">((</span><span class="nf">pred</span> <span class="p">(</span><span class="nb">car </span><span class="nv">s</span><span class="p">))</span> <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">car </span><span class="nv">s</span><span class="p">)</span> <span class="p">(</span><span class="nf">my-filter</span> <span class="nv">pred</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">my-filter</span> <span class="nv">pred</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>交替取两个数组的元素:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">interleave</span> <span class="nv">lst1</span> <span class="nv">lst2</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">   <span class="p">(</span><span class="k">cond </span>   <span class="p">((</span><span class="nb">null? </span><span class="nv">lst1</span><span class="p">)</span>  <span class="nv">lst2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">((</span><span class="nb">null? </span><span class="nv">lst2</span><span class="p">)</span>  <span class="nv">lst1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">car </span><span class="nv">lst1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">car </span><span class="nv">lst2</span><span class="p">)</span> <span class="p">(</span><span class="nf">interleave</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">lst1</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">lst2</span><span class="p">)))))))</span>
</span></span></code></pre></div><p>怎么用lambda函数:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">no-repeats</span> <span class="nv">s</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="nv">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="o">&#39;</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">car </span><span class="nv">s</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="nf">no-repeats</span> 
</span></span><span class="line"><span class="cl">                <span class="p">(</span><span class="nf">filter</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">= </span><span class="nv">x</span> <span class="p">(</span><span class="nb">car </span><span class="nv">s</span><span class="p">))))</span> 
</span></span><span class="line"><span class="cl">                        <span class="p">(</span><span class="nb">cdr </span><span class="nv">s</span><span class="p">))))))</span>
</span></span></code></pre></div><p>`做代码构造,有点模板的味道,还有  ,  表示先不要引用,先进行动态的求值.</p>
<p>代码生成,动态构造lambda表达式.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">curry-cook</span> <span class="nv">formals</span> <span class="nv">body</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">formals</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="o">`</span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="nb">car </span><span class="nv">formals</span><span class="p">))</span> <span class="o">,</span><span class="nv">body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="o">`</span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="o">,</span><span class="p">(</span><span class="nb">car </span><span class="nv">formals</span><span class="p">))</span> <span class="o">,</span><span class="p">(</span><span class="nf">curry-cook</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">formals</span><span class="p">)</span> <span class="nv">body</span><span class="p">))))</span>
</span></span></code></pre></div><p>curry展开的操作:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">curry-consume</span> <span class="nv">curry</span> <span class="nv">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">null? </span><span class="nv">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">curry</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">result</span> <span class="p">(</span><span class="nf">curry</span> <span class="p">(</span><span class="nb">car </span><span class="nv">args</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">curry-consume</span> <span class="nv">result</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">args</span><span class="p">)))))</span>
</span></span></code></pre></div><p>这几行代码真是抽象过头了:</p>
<p>把switch语句转换成cond语句,`做代码生成,map把lambda应用于list上面去.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">switch-to-cond</span> <span class="nv">switch-expr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="nb">cons </span><span class="o">`</span><span class="nv">cond</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">option</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">               <span class="p">(</span><span class="nb">cons </span><span class="p">(</span><span class="nb">list </span><span class="o">`</span><span class="nv">equal?</span> <span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">switch-expr</span><span class="p">))(</span><span class="nb">car </span><span class="nv">option</span><span class="p">))</span>  <span class="p">(</span><span class="nb">cdr </span><span class="nv">option</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">             <span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cdr </span><span class="p">(</span><span class="nb">cdr </span><span class="nv">switch-expr</span><span class="p">)))</span> <span class="p">)</span> <span class="p">))</span>
</span></span></code></pre></div><p>比如实现欧几里得算法:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nb">gcd </span><span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">b</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">a</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">gcd</span> <span class="nv">b</span> <span class="p">(</span><span class="nb">modulo </span><span class="nv">a</span> <span class="nv">b</span><span class="p">))))</span>
</span></span></code></pre></div><p>插入:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">pow-expr</span> <span class="nv">base</span> <span class="nv">exp</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">exp</span> <span class="mi">0</span><span class="p">)</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">((</span><span class="nb">= </span><span class="nv">exp</span> <span class="mi">1</span><span class="p">)</span> <span class="o">`</span><span class="p">(</span><span class="nb">* </span><span class="o">,</span><span class="nv">base</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">((</span><span class="nb">even? </span><span class="nv">exp</span><span class="p">)</span> <span class="o">`</span><span class="p">(</span><span class="nf">square</span> <span class="o">,</span><span class="p">(</span><span class="nf">pow-expr</span> <span class="nv">base</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">exp</span> <span class="mi">2</span><span class="p">))))</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="k">else </span><span class="o">`</span><span class="p">(</span><span class="nb">* </span><span class="o">,</span><span class="nv">base</span> <span class="o">,</span><span class="p">(</span><span class="nf">pow-expr</span> <span class="nv">base</span> <span class="p">(</span><span class="nb">- </span><span class="nv">exp</span> <span class="mi">1</span><span class="p">))))))</span>
</span></span></code></pre></div><p>宏函数和begin的用法:</p>
<p>宏定义.begin&mdash;&gt;按照顺序执行一系列的子句(&hellip;)(&hellip;)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="p">(</span><span class="nf">define-macro</span> <span class="p">(</span><span class="nf">repeat</span> <span class="nv">n</span> <span class="nv">expr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">`</span><span class="p">(</span><span class="nf">repeated-call</span> <span class="o">,</span><span class="nv">n</span> <span class="p">(</span><span class="nf">lambda</span><span class="p">()</span> <span class="o">,</span><span class="nv">expr</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">; Call zero-argument procedure f n times and return the final result.</span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">repeated-call</span> <span class="nv">n</span> <span class="nv">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nf">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="k">begin </span><span class="p">(</span><span class="nf">f</span><span class="p">)</span> <span class="p">(</span><span class="nf">repeated-call</span> <span class="p">(</span><span class="nb">- </span><span class="nv">n</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">f</span><span class="p">))))</span>
</span></span></code></pre></div>

<h5 class="relative group">解释器的实现 
    <div id="%E8%A7%A3%E9%87%8A%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0" aria-label="Anchor">#</a>
    </span>        
    
</h5>
<p>我们要更改四个文件:</p>
<ul>
<li><code>scheme_eval_apply.py</code></li>
<li><code>scheme_forms.py</code></li>
<li><code>scheme_classes.py</code></li>
<li><code>questions.scm</code></li>
</ul>


<h6 class="relative group">PARTI:Evaluator 
    <div id="partievaluator" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#partievaluator" aria-label="Anchor">#</a>
    </span>        
    
</h6>
<p>求值器的作用.</p>
<p>符号定义和查找.</p>
<p>表达式求值.</p>
<p>调用已经实现的方法.</p>
<p>环境,frame的问题,比如lookup的实现:</p>
<p>我们遍历字典的键值对.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="c1"># 从我当前的这个frame开始往parent的frame进行查找,找到并且返回这个value</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symbol</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;Return the value bound to SYMBOL. Errors if SYMBOL is not found.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># BEGIN PROBLEM 1</span>
</span></span><span class="line"><span class="cl">        <span class="n">curr</span> <span class="o">=</span> <span class="bp">self</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="n">curr</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">curr</span><span class="o">.</span><span class="n">bindings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">symbol</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">curr</span><span class="o">.</span><span class="n">bindings</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="n">parent</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># END PROBLEM 1</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="n">SchemeError</span><span class="p">(</span><span class="s1">&#39;unknown identifier: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">symbol</span><span class="p">))</span>
</span></span></code></pre></div>

<h6 class="relative group">PARTII:Procedures 
    <div id="partiiprocedures" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#partiiprocedures" aria-label="Anchor">#</a>
    </span>        
    
</h6>
<p>lambda函数,自定义函数,动态作用域</p>
<p>理解我们自己创建的函数是怎么被调用的,以及frame的作用原理和规则</p>


<h6 class="relative group">PARTIII:Special Forms 
    <div id="partiiispecial-forms" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#partiiispecial-forms" aria-label="Anchor">#</a>
    </span>        
    
</h6>
<p>这是关于如何实现let函数,主要是还是理解expr的Pair形式是怎样的.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">make_let_frame</span><span class="p">(</span><span class="n">bindings</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Create a child frame of Frame ENV that contains the definitions given in
</span></span></span><span class="line"><span class="cl"><span class="s2">    BINDINGS. The Scheme list BINDINGS must have the form of a proper bindings
</span></span></span><span class="line"><span class="cl"><span class="s2">    list in a let expression: each item must be a list containing a symbol
</span></span></span><span class="line"><span class="cl"><span class="s2">    and a Scheme expression.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="ow">not</span> <span class="n">scheme_listp</span><span class="p">(</span><span class="n">bindings</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="n">SchemeError</span><span class="p">(</span><span class="s1">&#39;bad bindings list in let form&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">names</span> <span class="o">=</span> <span class="n">vals</span> <span class="o">=</span> <span class="n">nil</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># BEGIN PROBLEM 14</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 传进来的bindings应该是一个pair对象</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 我还要倒着构造两个pair串</span>
</span></span><span class="line"><span class="cl">    <span class="n">curr</span> <span class="o">=</span> <span class="n">bindings</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">curr</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">validate_form</span><span class="p">(</span><span class="n">curr</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">binding</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="n">first</span>
</span></span><span class="line"><span class="cl">        <span class="n">names</span> <span class="o">=</span> <span class="n">Pair</span><span class="p">(</span><span class="n">binding</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">vals</span> <span class="o">=</span> <span class="n">Pair</span><span class="p">(</span><span class="n">binding</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="n">rest</span>
</span></span><span class="line"><span class="cl">    <span class="n">validate_formals</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 然后还要对于vals表达式进行求值</span>
</span></span><span class="line"><span class="cl">    <span class="n">vals</span> <span class="o">=</span> <span class="n">nil</span>
</span></span><span class="line"><span class="cl">    <span class="n">curr</span> <span class="o">=</span> <span class="n">bindings</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">curr</span> <span class="o">!=</span> <span class="n">nil</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">val</span> <span class="o">=</span> <span class="n">scheme_eval</span><span class="p">(</span><span class="n">curr</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">vals</span> <span class="o">=</span> <span class="n">Pair</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">curr</span> <span class="o">=</span> <span class="n">curr</span><span class="o">.</span><span class="n">rest</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># END PROBLEM 14</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">env</span><span class="o">.</span><span class="n">make_child_frame</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
</span></span></code></pre></div><blockquote>
<p>​	整体实现难度不高,都在我的仓库里面.</p></blockquote>


<h2 class="relative group">1.4数据处理 
    <div id="14%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#14%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<blockquote>
<p>程序被组织成对于顺序数据流操作的管道.</p>
<p>有效的处理和操作连续的数据流.</p>
<p>无限序列.</p></blockquote>


<h3 class="relative group">1.4.1隐式序列 
    <div id="141%E9%9A%90%E5%BC%8F%E5%BA%8F%E5%88%97" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#141%E9%9A%90%E5%BC%8F%E5%BA%8F%E5%88%97" aria-label="Anchor">#</a>
    </span>        
    
</h3>
<p>不是把所有元素显式的存放在内存中.而是在访问某个元素的时候,才去计算它的值.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scheme" data-lang="scheme"><span class="line"><span class="cl"><span class="nv">&gt;&gt;&gt;</span> <span class="nv">r</span> <span class="nv">=</span> <span class="nv">range</span><span class="p">(</span><span class="mi">10000</span><span class="o">,</span><span class="mi">1000000000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">&gt;&gt;&gt;</span> <span class="nv">r</span><span class="p">[</span><span class="mi">45006230</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="mi">45016230</span>
</span></span></code></pre></div><p>显然range肯定不会存放这么多数字,而是调用的时候直接加上一个值得到value.</p>
<p>那么这就是惰性计算(<strong>Lazy Computation</strong>),这是本篇的重点.</p>


<h4 class="relative group">1.4.1.1iterator 
    <div id="1411iterator" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1411iterator" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">primes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">primes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">list</span><span class="s1">&#39;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">primes</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">list</span><span class="o">-</span><span class="n">iterator</span><span class="s1">&#39;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span>
</span></span></code></pre></div><p>获取迭代器,和基本的遍历操作.</p>
<p>没有更多,引发StopIteration异常:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">7</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">las</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="ne">StopIteration</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">next</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No more values&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">No</span> <span class="n">more</span> <span class="n">values</span>
</span></span></code></pre></div><p>两个迭代器是独立的:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">r</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>  <span class="c1"># r 的第一个迭代器</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>  <span class="c1"># r 的第二个迭代器</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">u</span> <span class="o">=</span> <span class="n">t</span>        <span class="c1"># u 绑定到 r 的第二个迭代器</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">6</span>
</span></span></code></pre></div>

<h4 class="relative group">1.4.1.2可迭代性 
    <div id="1412%E5%8F%AF%E8%BF%AD%E4%BB%A3%E6%80%A7" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1412%E5%8F%AF%E8%BF%AD%E4%BB%A3%E6%80%A7" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>可迭代对象:序列 + 容器</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">k</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;one&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;three&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span></code></pre></div><p>py3.6+&mdash;&gt;字典是有序的,按照插入的顺序</p>


<h4 class="relative group">1.4.1.3内置迭代器 
    <div id="1413%E5%86%85%E7%BD%AE%E8%BF%AD%E4%BB%A3%E5%99%A8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1413%E5%86%85%E7%BD%AE%E8%BF%AD%E4%BB%A3%E5%99%A8" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">double_and_print</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;***&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;=&gt;&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;***&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">doubled</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">double_and_print</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>  <span class="c1"># double_and_print 未被调用</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">doubled</span><span class="p">)</span>                       <span class="c1"># double_and_print 调用一次</span>
</span></span><span class="line"><span class="cl"><span class="o">***</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="mi">6</span> <span class="o">***</span>
</span></span><span class="line"><span class="cl"><span class="mi">6</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">next</span><span class="p">(</span><span class="n">doubled</span><span class="p">)</span>                       <span class="c1"># double_and_print 再次调用</span>
</span></span><span class="line"><span class="cl"><span class="o">***</span> <span class="mi">4</span> <span class="o">=&gt;</span> <span class="mi">8</span> <span class="o">***</span>
</span></span><span class="line"><span class="cl"><span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">doubled</span><span class="p">)</span>                       <span class="c1"># double_and_print 再次调用兩次</span>
</span></span><span class="line"><span class="cl"><span class="o">***</span> <span class="mi">5</span> <span class="o">=&gt;</span> <span class="mi">10</span> <span class="o">***</span>                         <span class="c1"># list() 会把剩余的值都计算出来并生成一个列表</span>
</span></span><span class="line"><span class="cl"><span class="o">***</span> <span class="mi">6</span> <span class="o">=&gt;</span> <span class="mi">12</span> <span class="o">***</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
</span></span></code></pre></div><p>例如map函数,只有iterator被next调用的时候,才会产生计算.</p>


<h4 class="relative group">1.4.1.4For语句 
    <div id="1414for%E8%AF%AD%E5%8F%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1414for%E8%AF%AD%E5%8F%A5" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>for是对于迭代对象进行操作.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="n">counts</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">             <span class="n">item</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">             <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl"><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="mi">3</span>
</span></span></code></pre></div>

<h4 class="relative group">1.4.1.5生成器和yield语句 
    <div id="1415%E7%94%9F%E6%88%90%E5%99%A8%E5%92%8Cyield%E8%AF%AD%E5%8F%A5" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#1415%E7%94%9F%E6%88%90%E5%99%A8%E5%92%8Cyield%E8%AF%AD%E5%8F%A5" aria-label="Anchor">#</a>
    </span>        
    
</h4>
<p>比如:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">letters_generator</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="n">current</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="n">current</span> <span class="o">&lt;=</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">yield</span> <span class="n">current</span>
</span></span><span class="line"><span class="cl">            <span class="n">current</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">letters_generator</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">a</span>
</span></span><span class="line"><span class="cl"><span class="n">b</span>
</span></span><span class="line"><span class="cl"><span class="n">c</span>
</span></span><span class="line"><span class="cl"><span class="n">d</span>
</span></span></code></pre></div><p>每次调用next的时候,每次执行到一个yield语句就直接返回.</p>
<p>我们可以手动调用__next__来遍历这个生成器:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span> <span class="o">=</span> <span class="n">letters_generator</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">letters</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">generator</span><span class="s1">&#39;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;a&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;b&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;c&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="s1">&#39;d&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;&gt;&gt;</span> <span class="n">letters</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">  <span class="n">File</span> <span class="s2">&#34;&lt;stdin&gt;&#34;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="ne">StopIteration</span>
</span></span></code></pre></div><blockquote>
<p>​	结语,第四章的内容整体比较抽象,都是一些概览性的intro的内容,比如数据库,并行计算,多线程,开发,网络等,是很好的科普内容.</p></blockquote>

          
          
          
        </div>
        
        

          
            
            
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
      alt="mio" src="/img/blowfish_logo_hu_2d15729eafedea4d.png" />
    
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      mio
    </div>
    
    
    <div class="text-sm text-neutral-700 dark:text-neutral-400">I&rsquo;m Just A Student&hellip;</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://nunotabashinobu066@gmail.com"
          target="_blank"
          aria-label="Email"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://space.bilibili.com/167160408"
          target="_blank"
          aria-label="Link"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/Ada-Church-Closure"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.google.com/"
          target="_blank"
          aria-label="Google"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 488 512"><path fill="currentColor" d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://steamcommunity.com/id/331979248/"
          target="_blank"
          aria-label="Steam"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M496 256c0 137-111.2 248-248.4 248-113.8 0-209.6-76.3-239-180.4l95.2 39.3c6.4 32.1 34.9 56.4 68.9 56.4 39.2 0 71.9-32.4 70.2-73.5l84.5-60.2c52.1 1.3 95.8-40.9 95.8-93.5 0-51.6-42-93.5-93.7-93.5s-93.7 42-93.7 93.5v1.2L176.6 279c-15.5-.9-30.7 3.4-43.5 12.1L0 236.1C10.2 108.4 117.1 8 247.6 8 384.8 8 496 119 496 256zM155.7 384.3l-30.5-12.6a52.79 52.79 0 0 0 27.2 25.8c26.9 11.2 57.8-1.6 69-28.4 5.4-13 5.5-27.3.1-40.3-5.4-13-15.5-23.2-28.5-28.6-12.9-5.4-26.7-5.2-38.9-.6l31.5 13c19.8 8.2 29.2 30.9 20.9 50.7-8.3 19.9-31 29.2-50.8 21zm173.8-129.9c-34.4 0-62.4-28-62.4-62.3s28-62.3 62.4-62.3 62.4 28 62.4 62.3-27.9 62.3-62.4 62.3zm.1-15.6c25.9 0 46.9-21 46.9-46.8 0-25.9-21-46.8-46.9-46.8s-46.9 21-46.9 46.8c.1 25.8 21.1 46.8 46.9 46.8z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.youtube.com/@NunotabaShinobu"
          target="_blank"
          aria-label="Youtube"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

          

          

          
          <div class="mb-10"></div>
          

        

        
        

          
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_cs61\/CS61A:Structure and Interpretation of Computer Programs\/index.md"
        var oid_likes = "likes_cs61\/CS61A:Structure and Interpretation of Computer Programs\/index.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
      
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/reading/"
            title="">
            
            Reading
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      &copy;
      2025
      mio
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]"
  data-url="http://localhost:1313/"
  style="z-index:500"
>
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"
  >
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)"
      >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

  </div>
</body>

</html>
